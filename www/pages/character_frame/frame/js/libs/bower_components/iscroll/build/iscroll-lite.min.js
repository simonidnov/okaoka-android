!function(e,t,s){function a(s,i){this.wrapper="string"==typeof s?t.querySelector(s):s,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={disablePointer:!n.hasPointer,disableTouch:n.hasPointer||!n.hasTouch,disableMouse:n.hasPointer||n.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof e.onmousedown};for(var a in i)this.options[a]=i[a];this.translateZ=this.options.HWCompositing&&n.hasPerspective?" translateZ(0)":"",this.options.useTransition=n.hasTransition&&this.options.useTransition,this.options.useTransform=n.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?n.ease[this.options.bounceEasing]||n.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},n=function(){function r(e){return a===!1?!1:""===a?e:a+e.charAt(0).toUpperCase()+e.substr(1)}var i={},n=t.createElement("div").style,a=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],s=0,i=e.length;i>s;s++)if(t=e[s]+"ransform",t in n)return e[s].substr(0,e[s].length-1);return!1}();i.getTime=Date.now||function(){return(new Date).getTime()},i.extend=function(e,t){for(var s in t)e[s]=t[s]},i.addEvent=function(e,t,s,i){e.addEventListener(t,s,!!i)},i.removeEvent=function(e,t,s,i){e.removeEventListener(t,s,!!i)},i.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},i.momentum=function(e,t,i,n,a,r){var A,g,o=e-t,h=s.abs(o)/i;return r=void 0===r?6e-4:r,A=e+h*h/(2*r)*(0>o?-1:1),g=h/r,n>A?(A=a?n-a/2.5*(h/8):n,o=s.abs(A-e),g=o/h):A>0&&(A=a?a/2.5*(h/8):0,o=s.abs(e)+A,g=o/h),{destination:s.round(A),duration:g}};var o=r("transform");return i.extend(i,{hasTransform:o!==!1,hasPerspective:r("perspective")in n,hasTouch:"ontouchstart"in e,hasPointer:!(!e.PointerEvent&&!e.MSPointerEvent),hasTransition:r("transition")in n}),i.isBadAndroid=function(){var t=e.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var s=t.match(/Safari\/(\d+.\d)/);return s&&"object"==typeof s&&s.length>=2?parseFloat(s[1])<535.19:!0}return!1}(),i.extend(i.style={},{transform:o,transitionTimingFunction:r("transitionTimingFunction"),transitionDuration:r("transitionDuration"),transitionDelay:r("transitionDelay"),transformOrigin:r("transformOrigin")}),i.hasClass=function(e,t){var s=new RegExp("(^|\\s)"+t+"(\\s|$)");return s.test(e.className)},i.addClass=function(e,t){if(!i.hasClass(e,t)){var s=e.className.split(" ");s.push(t),e.className=s.join(" ")}},i.removeClass=function(e,t){if(i.hasClass(e,t)){var s=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(s," ")}},i.offset=function(e){for(var t=-e.offsetLeft,s=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,s-=e.offsetTop;return{left:t,top:s}},i.preventDefaultException=function(e,t){for(var s in t)if(t[s].test(e[s]))return!0;return!1},i.extend(i.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),i.extend(i.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return s.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,i=.4;return 0===e?0:1==e?1:i*s.pow(2,-10*e)*s.sin((e-t/4)*(2*s.PI)/t)+1}}}),i.tap=function(e,s){var i=t.createEvent("Event");i.initEvent(s,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)},i.click=function(e){var i,s=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(s.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,s.screenX,s.screenY,s.clientX,s.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,s.dispatchEvent(i))},i}();a.prototype={version:"5.2.0",_init:function(){this._initEvents()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=n.eventType[e.type]){var t;if(t=e.which?e.button:e.button<2?0:4==e.button?1:2,0!==t)return}if(this.enabled&&(!this.initiated||n.eventType[e.type]===this.initiated)){!this.options.preventDefault||n.isBadAndroid||n.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var a,i=e.touches?e.touches[0]:e;this.initiated=n.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=n.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,a=this.getComputedPosition(),this._translate(s.round(a.x),s.round(a.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&n.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var o,h,A,g,t=e.touches?e.touches[0]:e,i=t.pageX-this.pointX,a=t.pageY-this.pointY,r=n.getTime();if(this.pointX=t.pageX,this.pointY=t.pageY,this.distX+=i,this.distY+=a,A=s.abs(this.distX),g=s.abs(this.distY),!(r-this.endTime>300&&10>A&&10>g)){if(this.directionLocked||this.options.freeScroll||(A>g+this.options.directionLockThreshold?this.directionLocked="h":g>=A+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,a=this.hasVerticalScroll?a:0,o=this.x+i,h=this.y+a,(o>0||o<this.maxScrollX)&&(o=this.options.bounce?this.x+i/3:o>0?0:this.maxScrollX),(h>0||h<this.maxScrollY)&&(h=this.options.bounce?this.y+a/3:h>0?0:this.maxScrollY),this.directionX=i>0?-1:0>i?1:0,this.directionY=a>0?-1:0>a?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(o,h),r-this.startTime>300&&(this.startTime=r,this.startX=this.x,this.startY=this.y)}}},_end:function(e){if(this.enabled&&n.eventType[e.type]===this.initiated){this.options.preventDefault&&!n.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var i,a,r=(e.changedTouches?e.changedTouches[0]:e,n.getTime()-this.startTime),o=s.round(this.x),h=s.round(this.y),A=s.abs(o-this.startX),g=s.abs(h-this.startY),l=0,c="";if(this.isInTransition=0,this.initiated=0,this.endTime=n.getTime(),!this.resetPosition(this.options.bounceTime))return this.scrollTo(o,h),this.moved?this._events.flick&&200>r&&100>A&&100>g?void this._execEvent("flick"):(this.options.momentum&&300>r&&(i=this.hasHorizontalScroll?n.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},a=this.hasVerticalScroll?n.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:h,duration:0},o=i.destination,h=a.destination,l=s.max(i.duration,a.duration),this.isInTransition=1),o!=this.x||h!=this.y?((o>0||o<this.maxScrollX||h>0||h<this.maxScrollY)&&(c=n.ease.quadratic),void this.scrollTo(o,h,l,c)):void this._execEvent("scrollEnd")):(this.options.tap&&n.tap(e,this.options.tap),this.options.click&&n.click(e),void this._execEvent("scrollCancel"))}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,s=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?s=0:this.y<this.maxScrollY&&(s=this.maxScrollY),t==this.x&&s==this.y?!1:(this.scrollTo(t,s,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=n.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var s=this._events[e].indexOf(t);s>-1&&this._events[e].splice(s,1)}},_execEvent:function(e){if(this._events[e]){var t=0,s=this._events[e].length;if(s)for(;s>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,s,i){e=this.x+e,t=this.y+t,s=s||0,this.scrollTo(e,t,s,i)},scrollTo:function(e,t,s,i){i=i||n.ease.circular,this.isInTransition=this.options.useTransition&&s>0;var a=this.options.useTransition&&i.style;!s||a?(a&&(this._transitionTimingFunction(i.style),this._transitionTime(s)),this._translate(e,t)):this._animate(e,t,s,i.fn)},scrollToElement:function(e,t,i,a,r){if(e=e.nodeType?e:this.scroller.querySelector(e)){var o=n.offset(e);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,i===!0&&(i=s.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),a===!0&&(a=s.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=i||0,o.top-=a||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,t=void 0===t||null===t||"auto"===t?s.max(s.abs(this.x-o.left),s.abs(this.y-o.top)):t,this.scrollTo(o.left,o.top,t,r)}},_transitionTime:function(e){e=e||0;var t=n.style.transitionDuration;if(this.scrollerStyle[t]=e+"ms",!e&&n.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var s=this;i(function(){"0.0001ms"===s.scrollerStyle[t]&&(s.scrollerStyle[t]="0s")})}},_transitionTimingFunction:function(e){this.scrollerStyle[n.style.transitionTimingFunction]=e},_translate:function(e,t){this.options.useTransform?this.scrollerStyle[n.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=s.round(e),t=s.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t},_initEvents:function(t){var s=t?n.removeEvent:n.addEvent,i=this.options.bindToWrapper?this.wrapper:e;s(e,"orientationchange",this),s(e,"resize",this),this.options.click&&s(this.wrapper,"click",this,!0),this.options.disableMouse||(s(this.wrapper,"mousedown",this),s(i,"mousemove",this),s(i,"mousecancel",this),s(i,"mouseup",this)),n.hasPointer&&!this.options.disablePointer&&(s(this.wrapper,n.prefixPointerEvent("pointerdown"),this),s(i,n.prefixPointerEvent("pointermove"),this),s(i,n.prefixPointerEvent("pointercancel"),this),s(i,n.prefixPointerEvent("pointerup"),this)),n.hasTouch&&!this.options.disableTouch&&(s(this.wrapper,"touchstart",this),s(i,"touchmove",this),s(i,"touchcancel",this),s(i,"touchend",this)),s(this.scroller,"transitionend",this),s(this.scroller,"webkitTransitionEnd",this),s(this.scroller,"oTransitionEnd",this),s(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var s,i,t=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(t=t[n.style.transform].split(")")[0].split(", "),s=+(t[12]||t[4]),i=+(t[13]||t[5])):(s=+t.left.replace(/[^-\d.]/g,""),i=+t.top.replace(/[^-\d.]/g,"")),{x:s,y:i}},_animate:function(e,t,s,a){function l(){var u,p,f,c=n.getTime();return c>=g?(r.isAnimating=!1,r._translate(e,t),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(c=(c-A)/s,f=a(c),u=(e-o)*f+o,p=(t-h)*f+h,r._translate(u,p),void(r.isAnimating&&i(l)))}var r=this,o=this.x,h=this.y,A=n.getTime(),g=A+s;this.isAnimating=!0,l()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},a.utils=n,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):e.IScroll=a}(window,document,Math);
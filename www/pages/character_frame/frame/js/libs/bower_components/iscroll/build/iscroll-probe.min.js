!function(e,t,s){function a(s,i){this.wrapper="string"==typeof s?t.querySelector(s):s,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!n.hasPointer,disableTouch:n.hasPointer||!n.hasTouch,disableMouse:n.hasPointer||n.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:"undefined"==typeof e.onmousedown};for(var a in i)this.options[a]=i[a];this.translateZ=this.options.HWCompositing&&n.hasPerspective?" translateZ(0)":"",this.options.useTransition=n.hasTransition&&this.options.useTransition,this.options.useTransform=n.hasTransform&&this.options.useTransform,this.options.eventPassthrough=this.options.eventPassthrough===!0?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"==this.options.eventPassthrough?!1:this.options.scrollY,this.options.scrollX="horizontal"==this.options.eventPassthrough?!1:this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?n.ease[this.options.bounceEasing]||n.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,this.options.tap===!0&&(this.options.tap="tap"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function r(e,s,i){var n=t.createElement("div"),a=t.createElement("div");return i===!0&&(n.style.cssText="position:absolute;z-index:9999",a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:0px solid rgba(255,255,255,0.9);border-radius:3px"),a.className="iScrollIndicator","h"==e?(i===!0&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",a.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(i===!0&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",a.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",s||(n.style.pointerEvents="none"),n.appendChild(a),n}function o(s,a){this.wrapper="string"==typeof a.el?t.querySelector(a.el):a.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=s,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0};for(var r in a)this.options[r]=a[r];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(n.addEvent(this.indicator,"touchstart",this),n.addEvent(e,"touchend",this)),this.options.disablePointer||(n.addEvent(this.indicator,n.prefixPointerEvent("pointerdown"),this),n.addEvent(e,n.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(n.addEvent(this.indicator,"mousedown",this),n.addEvent(e,"mouseup",this))),this.options.fade){this.wrapperStyle[n.style.transform]=this.scroller.translateZ;var o=n.style.transitionDuration;this.wrapperStyle[o]=n.isBadAndroid?"0.0001ms":"0ms";var h=this;n.isBadAndroid&&i(function(){"0.0001ms"===h.wrapperStyle[o]&&(h.wrapperStyle[o]="0s")}),this.wrapperStyle.opacity="0"}}var i=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)},n=function(){function r(e){return a===!1?!1:""===a?e:a+e.charAt(0).toUpperCase()+e.substr(1)}var i={},n=t.createElement("div").style,a=function(){for(var t,e=["t","webkitT","MozT","msT","OT"],s=0,i=e.length;i>s;s++)if(t=e[s]+"ransform",t in n)return e[s].substr(0,e[s].length-1);return!1}();i.getTime=Date.now||function(){return(new Date).getTime()},i.extend=function(e,t){for(var s in t)e[s]=t[s]},i.addEvent=function(e,t,s,i){e.addEventListener(t,s,!!i)},i.removeEvent=function(e,t,s,i){e.removeEventListener(t,s,!!i)},i.prefixPointerEvent=function(t){return e.MSPointerEvent?"MSPointer"+t.charAt(7).toUpperCase()+t.substr(8):t},i.momentum=function(e,t,i,n,a,r){var A,g,o=e-t,h=s.abs(o)/i;return r=void 0===r?6e-4:r,A=e+h*h/(2*r)*(0>o?-1:1),g=h/r,n>A?(A=a?n-a/2.5*(h/8):n,o=s.abs(A-e),g=o/h):A>0&&(A=a?a/2.5*(h/8):0,o=s.abs(e)+A,g=o/h),{destination:s.round(A),duration:g}};var o=r("transform");return i.extend(i,{hasTransform:o!==!1,hasPerspective:r("perspective")in n,hasTouch:"ontouchstart"in e,hasPointer:!(!e.PointerEvent&&!e.MSPointerEvent),hasTransition:r("transition")in n}),i.isBadAndroid=function(){var t=e.navigator.appVersion;if(/Android/.test(t)&&!/Chrome\/\d/.test(t)){var s=t.match(/Safari\/(\d+.\d)/);return s&&"object"==typeof s&&s.length>=2?parseFloat(s[1])<535.19:!0}return!1}(),i.extend(i.style={},{transform:o,transitionTimingFunction:r("transitionTimingFunction"),transitionDuration:r("transitionDuration"),transitionDelay:r("transitionDelay"),transformOrigin:r("transformOrigin")}),i.hasClass=function(e,t){var s=new RegExp("(^|\\s)"+t+"(\\s|$)");return s.test(e.className)},i.addClass=function(e,t){if(!i.hasClass(e,t)){var s=e.className.split(" ");s.push(t),e.className=s.join(" ")}},i.removeClass=function(e,t){if(i.hasClass(e,t)){var s=new RegExp("(^|\\s)"+t+"(\\s|$)","g");e.className=e.className.replace(s," ")}},i.offset=function(e){for(var t=-e.offsetLeft,s=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,s-=e.offsetTop;return{left:t,top:s}},i.preventDefaultException=function(e,t){for(var s in t)if(t[s].test(e[s]))return!0;return!1},i.extend(i.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),i.extend(i.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return s.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){var t=4;return(e-=1)*e*((t+1)*e+t)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){var t=.22,i=.4;return 0===e?0:1==e?1:i*s.pow(2,-10*e)*s.sin((e-t/4)*(2*s.PI)/t)+1}}}),i.tap=function(e,s){var i=t.createEvent("Event");i.initEvent(s,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)},i.click=function(e){var i,s=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(s.tagName)||(i=t.createEvent("MouseEvents"),i.initMouseEvent("click",!0,!0,e.view,1,s.screenX,s.screenY,s.clientX,s.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null),i._constructed=!0,s.dispatchEvent(i))},i}();a.prototype={version:"5.2.0",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=n.eventType[e.type]){var t;if(t=e.which?e.button:e.button<2?0:4==e.button?1:2,0!==t)return}if(this.enabled&&(!this.initiated||n.eventType[e.type]===this.initiated)){!this.options.preventDefault||n.isBadAndroid||n.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var a,i=e.touches?e.touches[0]:e;this.initiated=n.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=n.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,a=this.getComputedPosition(),this._translate(s.round(a.x),s.round(a.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&n.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var o,h,A,g,t=e.touches?e.touches[0]:e,i=t.pageX-this.pointX,a=t.pageY-this.pointY,r=n.getTime();if(this.pointX=t.pageX,this.pointY=t.pageY,this.distX+=i,this.distY+=a,A=s.abs(this.distX),g=s.abs(this.distY),!(r-this.endTime>300&&10>A&&10>g)){if(this.directionLocked||this.options.freeScroll||(A>g+this.options.directionLockThreshold?this.directionLocked="h":g>=A+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);a=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);i=0}i=this.hasHorizontalScroll?i:0,a=this.hasVerticalScroll?a:0,o=this.x+i,h=this.y+a,(o>0||o<this.maxScrollX)&&(o=this.options.bounce?this.x+i/3:o>0?0:this.maxScrollX),(h>0||h<this.maxScrollY)&&(h=this.options.bounce?this.y+a/3:h>0?0:this.maxScrollY),this.directionX=i>0?-1:0>i?1:0,this.directionY=a>0?-1:0>a?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(o,h),r-this.startTime>300&&(this.startTime=r,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&n.eventType[e.type]===this.initiated){this.options.preventDefault&&!n.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var i,a,r=(e.changedTouches?e.changedTouches[0]:e,n.getTime()-this.startTime),o=s.round(this.x),h=s.round(this.y),A=s.abs(o-this.startX),g=s.abs(h-this.startY),l=0,c="";if(this.isInTransition=0,this.initiated=0,this.endTime=n.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(o,h),!this.moved)return this.options.tap&&n.tap(e,this.options.tap),this.options.click&&n.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&200>r&&100>A&&100>g)return void this._execEvent("flick");if(this.options.momentum&&300>r&&(i=this.hasHorizontalScroll?n.momentum(this.x,this.startX,r,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:o,duration:0},a=this.hasVerticalScroll?n.momentum(this.y,this.startY,r,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:h,duration:0},o=i.destination,h=a.destination,l=s.max(i.duration,a.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(o,h);this.currentPage=u,l=this.options.snapSpeed||s.max(s.max(s.min(s.abs(o-u.x),1e3),s.min(s.abs(h-u.y),1e3)),300),o=u.x,h=u.y,this.directionX=0,this.directionY=0,c=this.options.bounceEasing}return o!=this.x||h!=this.y?((o>0||o<this.maxScrollX||h>0||h<this.maxScrollY)&&(c=n.ease.quadratic),void this.scrollTo(o,h,l,c)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){e.refresh()},this.options.resizePolling)},resetPosition:function(e){var t=this.x,s=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?s=0:this.y<this.maxScrollY&&(s=this.maxScrollY),t==this.x&&s==this.y?!1:(this.scrollTo(t,s,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight,this.scrollerWidth=this.scroller.offsetWidth,this.scrollerHeight=this.scroller.offsetHeight,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,this.wrapperOffset=n.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var s=this._events[e].indexOf(t);s>-1&&this._events[e].splice(s,1)}},_execEvent:function(e){if(this._events[e]){var t=0,s=this._events[e].length;if(s)for(;s>t;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,s,i){e=this.x+e,t=this.y+t,s=s||0,this.scrollTo(e,t,s,i)},scrollTo:function(e,t,s,i){i=i||n.ease.circular,this.isInTransition=this.options.useTransition&&s>0;var a=this.options.useTransition&&i.style;!s||a?(a&&(this._transitionTimingFunction(i.style),this._transitionTime(s)),this._translate(e,t)):this._animate(e,t,s,i.fn)},scrollToElement:function(e,t,i,a,r){if(e=e.nodeType?e:this.scroller.querySelector(e)){var o=n.offset(e);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top,i===!0&&(i=s.round(e.offsetWidth/2-this.wrapper.offsetWidth/2)),a===!0&&(a=s.round(e.offsetHeight/2-this.wrapper.offsetHeight/2)),o.left-=i||0,o.top-=a||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,t=void 0===t||null===t||"auto"===t?s.max(s.abs(this.x-o.left),s.abs(this.y-o.top)):t,this.scrollTo(o.left,o.top,t,r)}},_transitionTime:function(e){e=e||0;var t=n.style.transitionDuration;if(this.scrollerStyle[t]=e+"ms",!e&&n.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var s=this;i(function(){"0.0001ms"===s.scrollerStyle[t]&&(s.scrollerStyle[t]="0s")})}if(this.indicators)for(var a=this.indicators.length;a--;)this.indicators[a].transitionTime(e)},_transitionTimingFunction:function(e){if(this.scrollerStyle[n.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[n.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=s.round(e),t=s.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(t){var s=t?n.removeEvent:n.addEvent,i=this.options.bindToWrapper?this.wrapper:e;s(e,"orientationchange",this),s(e,"resize",this),this.options.click&&s(this.wrapper,"click",this,!0),this.options.disableMouse||(s(this.wrapper,"mousedown",this),s(i,"mousemove",this),s(i,"mousecancel",this),s(i,"mouseup",this)),n.hasPointer&&!this.options.disablePointer&&(s(this.wrapper,n.prefixPointerEvent("pointerdown"),this),s(i,n.prefixPointerEvent("pointermove"),this),s(i,n.prefixPointerEvent("pointercancel"),this),s(i,n.prefixPointerEvent("pointerup"),this)),n.hasTouch&&!this.options.disableTouch&&(s(this.wrapper,"touchstart",this),s(i,"touchmove",this),s(i,"touchcancel",this),s(i,"touchend",this)),s(this.scroller,"transitionend",this),s(this.scroller,"webkitTransitionEnd",this),s(this.scroller,"oTransitionEnd",this),s(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var s,i,t=e.getComputedStyle(this.scroller,null);return this.options.useTransform?(t=t[n.style.transform].split(")")[0].split(", "),s=+(t[12]||t[4]),i=+(t[13]||t[5])):(s=+t.left.replace(/[^-\d.]/g,""),i=+t.top.replace(/[^-\d.]/g,"")),{x:s,y:i}},_initIndicators:function(){function h(e){if(n.indicators)for(var t=n.indicators.length;t--;)e.call(n.indicators[t])}var i,e=this.options.interactiveScrollbars,t="string"!=typeof this.options.scrollbars,s=[],n=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(i={el:r("v",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(i.el),s.push(i)),this.options.scrollX&&(i={el:r("h",e,this.options.scrollbars),interactive:e,defaultScrollbars:!0,customStyle:t,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(i.el),s.push(i))),this.options.indicators&&(s=s.concat(this.options.indicators));for(var a=s.length;a--;)this.indicators.push(new o(this,s[a]));this.options.fadeScrollbars&&(this.on("scrollEnd",function(){h(function(){this.fade()})}),this.on("scrollCancel",function(){h(function(){this.fade()})}),this.on("scrollStart",function(){h(function(){this.fade(1)})}),this.on("beforeScrollStart",function(){h(function(){this.fade(1,!0)})})),this.on("refresh",function(){h(function(){this.refresh()})}),this.on("destroy",function(){h(function(){this.destroy()}),delete this.indicators})},_initWheel:function(){n.addEvent(this.wrapper,"wheel",this),n.addEvent(this.wrapper,"mousewheel",this),n.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,n.removeEvent(this.wrapper,"wheel",this),n.removeEvent(this.wrapper,"mousewheel",this),n.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(e){if(this.enabled){e.preventDefault();var t,i,n,a,r=this;if(void 0===this.wheelTimeout&&r._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout(function(){r.options.snap||r._execEvent("scrollEnd"),r.wheelTimeout=void 0},400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,i=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,i=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,i=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=i=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=i=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=i,i=0),this.options.snap)return n=this.currentPage.pageX,a=this.currentPage.pageY,t>0?n--:0>t&&n++,i>0?a--:0>i&&a++,void this.goToPage(n,a);n=this.x+s.round(this.hasHorizontalScroll?t:0),a=this.y+s.round(this.hasVerticalScroll?i:0),this.directionX=t>0?-1:0>t?1:0,this.directionY=i>0?-1:0>i?1:0,n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),a>0?a=0:a<this.maxScrollY&&(a=this.maxScrollY),this.scrollTo(n,a,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",function(){var t,n,a,r,h,l,e=0,i=0,o=0,A=this.options.snapStepX||this.wrapperWidth,g=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(this.options.snap===!0)for(a=s.round(A/2),r=s.round(g/2);o>-this.scrollerWidth;){for(this.pages[e]=[],t=0,h=0;h>-this.scrollerHeight;)this.pages[e][t]={x:s.max(o,this.maxScrollX),y:s.max(h,this.maxScrollY),width:A,height:g,cx:o-a,cy:h-r},h-=g,t++;o-=A,e++}else for(l=this.options.snap,t=l.length,n=-1;t>e;e++)(0===e||l[e].offsetLeft<=l[e-1].offsetLeft)&&(i=0,n++),this.pages[i]||(this.pages[i]=[]),o=s.max(-l[e].offsetLeft,this.maxScrollX),h=s.max(-l[e].offsetTop,this.maxScrollY),a=o-s.round(l[e].offsetWidth/2),r=h-s.round(l[e].offsetHeight/2),this.pages[i][n]={x:o,y:h,width:l[e].offsetWidth,height:l[e].offsetHeight,cx:a,cy:r},o>this.maxScrollX&&i++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1===0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=s.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}}),this.on("flick",function(){var e=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.x-this.startX),1e3),s.min(s.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)})},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,n=this.pages.length,a=0;if(s.abs(e-this.absStartX)<this.snapThresholdX&&s.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);n>i;i++)if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}for(n=this.pages[i].length;n>a;a++)if(t>=this.pages[0][a].cy){t=this.pages[0][a].y;break}return i==this.currentPage.pageX&&(i+=this.directionX,0>i?i=0:i>=this.pages.length&&(i=this.pages.length-1),e=this.pages[i][0].x),a==this.currentPage.pageY&&(a+=this.directionY,0>a?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),t=this.pages[0][a].y),{x:e,y:t,pageX:i,pageY:a}},goToPage:function(e,t,i,n){n=n||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:0>e&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:0>t&&(t=0);var a=this.pages[e][t].x,r=this.pages[e][t].y;i=void 0===i?this.options.snapSpeed||s.max(s.max(s.min(s.abs(a-this.x),1e3),s.min(s.abs(r-this.y),1e3)),300):i,this.currentPage={x:a,y:r,pageX:e,pageY:t},this.scrollTo(a,r,i,n)},next:function(e,t){var s=this.currentPage.pageX,i=this.currentPage.pageY;s++,s>=this.pages.length&&this.hasVerticalScroll&&(s=0,i++),this.goToPage(s,i,e,t)},prev:function(e,t){var s=this.currentPage.pageX,i=this.currentPage.pageY;s--,0>s&&this.hasVerticalScroll&&(s=0,i--),this.goToPage(s,i,e,t)},_initKeys:function(t){var i,s={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==typeof this.options.keyBindings)for(i in this.options.keyBindings)"string"==typeof this.options.keyBindings[i]&&(this.options.keyBindings[i]=this.options.keyBindings[i].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(i in s)this.options.keyBindings[i]=this.options.keyBindings[i]||s[i];n.addEvent(e,"keydown",this),this.on("destroy",function(){n.removeEvent(e,"keydown",this)})},_key:function(e){if(this.enabled){var A,t=this.options.snap,i=t?this.currentPage.pageX:this.x,a=t?this.currentPage.pageY:this.y,r=n.getTime(),o=this.keyTime||0,h=.25;switch(this.options.useTransition&&this.isInTransition&&(A=this.getComputedPosition(),this._translate(s.round(A.x),s.round(A.y)),this.isInTransition=!1),this.keyAcceleration=200>r-o?s.min(this.keyAcceleration+h,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?i+=t?1:this.wrapperWidth:a+=t?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?i-=t?1:this.wrapperWidth:a-=t?1:this.wrapperHeight;break;case this.options.keyBindings.end:i=t?this.pages.length-1:this.maxScrollX,a=t?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:i=0,a=0;break;case this.options.keyBindings.left:i+=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=t?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:i-=t?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=t?1:5+this.keyAcceleration>>0;break;default:return}if(t)return void this.goToPage(i,a);i>0?(i=0,this.keyAcceleration=0):i<this.maxScrollX&&(i=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(i,a,0),this.keyTime=r}},_animate:function(e,t,s,a){function l(){var u,p,f,c=n.getTime();return c>=g?(r.isAnimating=!1,r._translate(e,t),void(r.resetPosition(r.options.bounceTime)||r._execEvent("scrollEnd"))):(c=(c-A)/s,f=a(c),u=(e-o)*f+o,p=(t-h)*f+h,r._translate(u,p),r.isAnimating&&i(l),void(3==r.options.probeType&&r._execEvent("scroll")))}var r=this,o=this.x,h=this.y,A=n.getTime(),g=A+s;this.isAnimating=!0,l()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},o.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(n.removeEvent(this.indicator,"touchstart",this),n.removeEvent(this.indicator,n.prefixPointerEvent("pointerdown"),this),n.removeEvent(this.indicator,"mousedown",this),n.removeEvent(e,"touchmove",this),n.removeEvent(e,n.prefixPointerEvent("pointermove"),this),n.removeEvent(e,"mousemove",this),n.removeEvent(e,"touchend",this),n.removeEvent(e,n.prefixPointerEvent("pointerup"),this),n.removeEvent(e,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(t){var s=t.touches?t.touches[0]:t;t.preventDefault(),t.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=s.pageX,this.lastPointY=s.pageY,this.startTime=n.getTime(),this.options.disableTouch||n.addEvent(e,"touchmove",this),this.options.disablePointer||n.addEvent(e,n.prefixPointerEvent("pointermove"),this),this.options.disableMouse||n.addEvent(e,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var s,i,a,r,t=e.touches?e.touches[0]:e,o=n.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,s=t.pageX-this.lastPointX,this.lastPointX=t.pageX,i=t.pageY-this.lastPointY,this.lastPointY=t.pageY,a=this.x+s,r=this.y+i,this._pos(a,r),1==this.scroller.options.probeType&&o-this.startTime>300?(this.startTime=o,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(t){if(this.initiated){if(this.initiated=!1,t.preventDefault(),t.stopPropagation(),n.removeEvent(e,"touchmove",this),n.removeEvent(e,n.prefixPointerEvent("pointermove"),this),n.removeEvent(e,"mousemove",this),this.scroller.options.snap){var i=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),a=this.options.snapSpeed||s.max(s.max(s.min(s.abs(this.scroller.x-i.x),1e3),s.min(s.abs(this.scroller.y-i.y),1e3)),300);(this.scroller.x!=i.x||this.scroller.y!=i.y)&&(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=i,this.scroller.scrollTo(i.x,i.y,a,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=n.style.transitionDuration;if(this.indicatorStyle[t]=e+"ms",!e&&n.isBadAndroid){this.indicatorStyle[t]="0.0001ms";var s=this;i(function(){"0.0001ms"===s.indicatorStyle[t]&&(s.indicatorStyle[t]="0s")})}},transitionTimingFunction:function(e){this.indicatorStyle[n.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(n.addClass(this.wrapper,"iScrollBothScrollbars"),n.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(n.removeClass(this.wrapper,"iScrollBothScrollbars"),n.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px"));this.wrapper.offsetHeight;this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=s.max(s.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=-this.indicatorWidth+8,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=s.max(s.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=-this.indicatorHeight+8,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&s.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&s.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=s.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=s.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=s.max(this.indicatorHeight+3*t,8),
this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=s.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[n.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){0>e?e=0:e>this.maxPosX&&(e=this.maxPosX),0>t?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?s.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?s.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var s=e?250:500,i=e?0:300;e=e?"1":"0",this.wrapperStyle[n.style.transitionDuration]=s+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),i)}}},a.utils=n,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):e.IScroll=a}(window,document,Math);
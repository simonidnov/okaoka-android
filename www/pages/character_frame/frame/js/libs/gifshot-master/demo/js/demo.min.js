!function(e,t){var E,s=t.querySelector("#create-gif"),i=t.querySelector("#GIFSource"),n=t.querySelector("#GIFType"),a=t.querySelector("#interval"),r=t.querySelector("#numFrames"),o=t.querySelector("#gifHeight"),h=t.querySelector("#gifWidth"),A=t.querySelector("progress"),g=t.querySelector("#gifText"),l=t.querySelector("#fontWeight"),c=t.querySelector("#fontSize"),u=t.querySelector("#fontFamily"),p=t.querySelector("#fontColor"),f=t.querySelector("#textAlign"),d=t.querySelector("#textBaseline"),m=t.querySelector("#sampleInterval"),Q=t.querySelector("#numWorkers"),v=t.querySelector(".gifshot-image-preview-section"),y=t.querySelector(".placeholder-div"),w=t.querySelector(".placeholder-div-dimensions"),B=t.querySelector(".gifshot-code"),b=t.querySelector(".gifshot-code-template"),I=function(){return{gifWidth:+h.value,gifHeight:+o.value,images:"images"===i.value?["http://i.imgur.com/2OO33vX.jpg","http://i.imgur.com/qOwVaSN.png","http://i.imgur.com/Vo5mFZJ.gif"]:!1,video:"video"===i.value?["example.mp4","example.ogv"]:!1,interval:+a.value,numFrames:+r.value,text:g.value,fontWeight:l.value,fontSize:c.value+"px",fontFamily:u.value,fontColor:p.value,textAlign:f.value,textBaseline:d.value,sampleInterval:+m.value,numWorkers:+Q.value}},T=function(t){t=t||{};var s=t.targetElem,i=I(),a=function(){var e={};return _.each(i,function(t,s){t&&(e[s]=t)}),e}(),r=_.template(b.innerHTML,{gifshot:e.gifshot,selectedOptions:a,method:"snapshot"===n.value?"takeSnapShot":"createGIF"}),o=escodegen.generate(esprima.parse(r),{format:{safeConcatenation:!0}});B.innerHTML=o,Prism.highlightElement(B),!s||"gifWidth"!==s.id&&"gifHeight"!==s.id||(i.gifHeight&&i.gifWidth?(v.innerHTML="",y.style.height=i.gifHeight+"px",y.style.width=i.gifWidth+"px",w.innerHTML=i.gifWidth+" x "+i.gifHeight,i.gifWidth<60||i.gifHeight<20?w.classList.add("hidden"):(console.log("placeholderDivDimensions.classList: ",w.classList),w.classList.remove("hidden")),y.classList.remove("hidden")):y.classList.add("hidden"))},C=function(){s.addEventListener("click",function(e){E=_.merge(_.clone(I()),{progressCallback:function(e){v.innerHTML="",y.classList.add("hidden"),A.classList.remove("hidden"),A.value=e}});var s="snapshot"===n.value?"takeSnapShot":"createGIF";gifshot[s](E,function(e){if(e.error)console.log("obj.error",e.error),console.log("obj.errorCode",e.errorCode),console.log("obj.errorMsg",e.errorMsg);else{var s=e.image,i=t.createElement("img");i.src=s,A.classList.add("hidden"),A.value=0,y.classList.add("hidden"),v.innerHTML="",v.appendChild(i)}})},!1),t.addEventListener("change",function(e){T({targetElem:e.target})}),t.addEventListener("keyup",function(e){T({targetElem:e.target})})};C(),T({targetElem:h})}(window,document);
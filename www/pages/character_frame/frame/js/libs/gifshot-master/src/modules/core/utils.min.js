define(function(){var e={URL:window.URL||window.webkitURL||window.mozURL||window.msURL,getUserMedia:function(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?e.bind(navigator):e}(),requestAnimFrame:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame,requestTimeout:function(t,s){function r(){var e=(new Date).getTime(),o=e-i;o>=s?t.call():n.value=a(r)}if(t=t||e.noop,s=s||0,!e.requestAnimFrame)return setTimeout(t,s);var i=(new Date).getTime(),n=new Object,a=e.requestAnimFrame;return n.value=a(r),n},Blob:window.Blob||window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,btoa:function(){var e=window.btoa||function(e){for(var a,r,o,h,A,g,l,t="",s=0,i=e.length,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i>s;)a=e.charCodeAt(s++),r=e.charCodeAt(s++),o=e.charCodeAt(s++),h=a>>2,A=(3&a)<<4|r>>4,g=(15&r)<<2|o>>6,l=63&o,isNaN(r)?g=l=64:isNaN(o)&&(l=64),t=t+n.charAt(h)+n.charAt(A)+n.charAt(g)+n.charAt(l);return t};return e?e.bind(window):function(){}}(),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(t){return e.isObject(t)&&!Object.keys(t).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=document.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return window.Worker},blob:function(){return e.Blob},Uint8Array:function(){return window.Uint8Array},Uint32Array:function(){return window.Uint32Array},videoCodecs:function(){var e=document.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(s){}return t}()},noop:function(){},each:function(t,s){var i,n;if(e.isArray(t))for(i=-1,n=t.length;++i<n&&s(i,t[i])!==!1;);else if(e.isObject(t))for(i in t)if(t.hasOwnProperty(i)&&s(i,t[i])===!1)break},mergeOptions:function t(s,i){if(e.isObject(s)&&e.isObject(i)&&Object.keys){var n={};return e.each(s,function(e,t){n[e]=s[e]}),e.each(i,function(a,r){var o=i[a];e.isObject(o)&&s[a]?n[a]=t(s[a],o):n[a]=o}),n}},setCSSAttr:function(t,s,i){e.isElement(t)&&(e.isString(s)&&e.isString(i)?t.style[s]=i:e.isObject(s)&&e.each(s,function(e,s){t.style[e]=s}))},removeElement:function(t){e.isElement(t)&&t.parentNode&&t.parentNode.removeChild(t)},createWebWorker:function(t){if(!e.isString(t))return{};try{var s=new e.Blob([t],{type:"text/javascript"}),i=e.URL.createObjectURL(s),n=new Worker(i);return{objectUrl:i,worker:n}}catch(a){return""+a}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(e){if(e=e||{},!document.body||e.resizeFont===!1)return e.fontSize;var t=e.text,s=e.gifWidth,i=parseInt(e.fontSize,10),n=parseInt(e.minFontSize,10),a=document.createElement("div"),r=document.createElement("span");for(a.setAttribute("width",s),a.appendChild(r),r.innerHTML=t,r.style.fontSize=i+"px",r.style.textIndent="-9999px",r.style.visibility="hidden",document.body.appendChild(r);r.offsetWidth>s&&i>=n;)r.style.fontSize=--i+"px";return document.body.removeChild(r),i+"px"},webWorkerError:!1};return e});
NeuQuant=function(){var b,x,S,F,D,e={},t=256,s=499,i=491,n=487,a=503,r=3*a,o=t-1,h=4,A=100,g=16,l=1<<g,c=10,p=10,f=l>>p,d=l<<c-p,_=t>>3,m=6,Q=1<<m,v=_*Q,y=30,w=10,B=1<<w,I=8,E=1<<I,T=w+I,C=1<<T,k=[],L=[],j=[],P=[],R=e.NeuQuant=function(e,s,i){var n,a;for(x=e,S=s,F=i,D=new Array(t),n=0;t>n;n++)D[n]=new Array(4),a=D[n],a[0]=a[1]=a[2]=(n<<h+8)/t,j[n]=l/t,L[n]=0},O=function(){for(var e=[],s=new Array(t),i=0;t>i;i++)s[D[i][3]]=i;for(var n=0,a=0;t>a;a++){var r=s[a];e[n++]=D[r][0],e[n++]=D[r][1],e[n++]=D[r][2]}return e},H=function(){var e,s,i,n,a,r,h,A;for(h=0,A=0,e=0;t>e;e++){for(a=D[e],i=e,n=a[1],s=e+1;t>s;s++)r=D[s],r[1]<n&&(i=s,n=r[1]);if(r=D[i],e!=i&&(s=r[0],r[0]=a[0],a[0]=s,s=r[1],r[1]=a[1],a[1]=s,s=r[2],r[2]=a[2],a[2]=s,s=r[3],r[3]=a[3],a[3]=s),n!=h){for(k[h]=A+e>>1,s=h+1;n>s;s++)k[s]=e;h=n,A=e}}for(k[h]=A+o>>1,s=h+1;256>s;s++)k[s]=o},N=function(){var e,t,o,g,l,c,u,p,f,d,_,Q,w,I;for(r>S&&(F=1),b=30+(F-1)/3,Q=x,w=0,I=S,_=S/(3*F),d=_/A|0,p=B,c=v,u=c>>m,1>=u&&(u=0),e=0;u>e;e++)P[e]=p*((u*u-e*e)*E/(u*u));for(f=r>S?3:S%s!==0?3*s:S%i!==0?3*i:S%n!==0?3*n:3*a,e=0;_>e;)if(o=(255&Q[w+0])<<h,g=(255&Q[w+1])<<h,l=(255&Q[w+2])<<h,t=U(o,g,l),q(p,t,o,g,l),0!==u&&Y(u,t,o,g,l),w+=f,w>=I&&(w-=S),e++,0===d&&(d=1),e%d===0)for(p-=p/b,c-=c/y,u=c>>m,1>=u&&(u=0),t=0;u>t;t++)P[t]=p*((u*u-t*t)*E/(u*u))},X=(e.map=function(e,s,i){var n,a,r,o,h,A,g;for(h=1e3,g=-1,n=k[s],a=n-1;t>n||a>=0;)t>n&&(A=D[n],r=A[1]-s,r>=h?n=t:(n++,0>r&&(r=-r),o=A[0]-e,0>o&&(o=-o),r+=o,h>r&&(o=A[2]-i,0>o&&(o=-o),r+=o,h>r&&(h=r,g=A[3])))),a>=0&&(A=D[a],r=s-A[1],r>=h?a=-1:(a--,0>r&&(r=-r),o=A[0]-e,0>o&&(o=-o),r+=o,h>r&&(o=A[2]-i,0>o&&(o=-o),r+=o,h>r&&(h=r,g=A[3]))));return g},e.process=function(){return N(),X(),H(),O()},function(){var e;for(e=0;t>e;e++)D[e][0]>>=h,D[e][1]>>=h,D[e][2]>>=h,D[e][3]=e}),Y=function(e,s,i,n,a){var r,o,h,A,g,l,c;for(h=s-e,-1>h&&(h=-1),A=s+e,A>t&&(A=t),r=s+1,o=s-1,l=1;A>r||o>h;){if(g=P[l++],A>r){c=D[r++];try{c[0]-=g*(c[0]-i)/C,c[1]-=g*(c[1]-n)/C,c[2]-=g*(c[2]-a)/C}catch(u){}}if(o>h){c=D[o--];try{c[0]-=g*(c[0]-i)/C,c[1]-=g*(c[1]-n)/C,c[2]-=g*(c[2]-a)/C}catch(u){}}}},q=function(e,t,s,i,n){var a=D[t];a[0]-=e*(a[0]-s)/B,a[1]-=e*(a[1]-i)/B,a[2]-=e*(a[2]-n)/B},U=function(e,s,i){var n,a,r,o,A,l,u,_,m,Q;for(_=~(1<<31),m=_,l=-1,u=l,n=0;t>n;n++)Q=D[n],a=Q[0]-e,0>a&&(a=-a),r=Q[1]-s,0>r&&(r=-r),a+=r,r=Q[2]-i,0>r&&(r=-r),a+=r,_>a&&(_=a,l=n),o=a-(L[n]>>g-h),m>o&&(m=o,u=n),A=j[n]>>p,j[n]-=A,L[n]+=A<<c;return j[l]+=f,L[l]-=d,u};return R.apply(this,arguments),e};
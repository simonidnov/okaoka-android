importScripts("LZWEncoder.js","NeuQuant.js","GIFEncoder.js"),self.onmessage=function(e){var t,s,i,n,a,r;t=e.data.frame_index,s=e.data.frame_length,i=e.data.height,n=e.data.width,r=e.data.imageData,a=e.data.delay;var o=new GIFEncoder;o.setRepeat(0),o.setQuality(1),o.setSize(n,i),o.setDelay(a),0==t?o.start():(o.cont(),o.setProperties(!0,!1)),o.addFrame(r,!0),s==t&&o.finish(),self.postMessage({frame_index:t,frame_data:o.stream().getData()})};
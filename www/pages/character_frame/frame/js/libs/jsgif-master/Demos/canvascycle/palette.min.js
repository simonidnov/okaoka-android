Class.create("Color",{red:0,green:0,blue:0,__construct:function(e,t,s){this.set(e,t,s)},set:function(e,t,s){this.red=e,this.green=t,this.blue=s}}),Class.create("Cycle",{rate:0,reverse:0,low:0,high:0,__construct:function(e,t,s,i){this.rate=e,this.rev=t,this.low=s,this.high=i}}),Class.create("Palette",{colors:null,baseColors:null,cycles:null,numColors:0,numCycles:0,__static:{PRECISION:100,USE_BLEND_SHIFT:1,CYCLE_SPEED:280,ENABLE_CYCLING:1,DFLOAT_MOD:function(e,t){return Math.floor(e*Palette.PRECISION)%Math.floor(t*Palette.PRECISION)/Palette.PRECISION}},__construct:function(e,t){this.colors=[],this.baseColors=[];for(var s=0,i=e.length;i>s;s++){var n=e[s];this.baseColors.push(new Color(n[0],n[1],n[2]))}this.cycles=[];for(var s=0,i=t.length;i>s;s++){var a=t[s];this.cycles.push(new Cycle(a.rate,a.reverse,a.low,a.high))}this.numColors=this.baseColors.length,this.numCycles=this.cycles.length},copyColors:function(e,t){for(var s=0,i=e.length;i>s;s++)t[s]||(t[s]=new Color),t[s].red=e[s].red,t[s].green=e[s].green,t[s].blue=e[s].blue},swapColors:function(e,t){var s;s=e.red,e.red=t.red,t.red=s,s=e.green,e.green=t.green,t.green=s,s=e.blue,e.blue=t.blue,t.blue=s},reverseColors:function(e,t){var s,i=t.high-t.low+1;for(s=0;i/2>s;s++)this.swapColors(e[t.low+s],e[t.high-s])},fadeColor:function(e,t,s,i){var n=new Color;return i?(0>s&&(s=0),s>i&&(s=i),n.red=Math.floor(e.red+(t.red-e.red)*s/i),n.green=Math.floor(e.green+(t.green-e.green)*s/i),n.blue=Math.floor(e.blue+(t.blue-e.blue)*s/i),n):e},shiftColors:function(e,t,s){var i,n,a;for(s=Math.floor(s),i=0;s>i;i++){for(a=e[t.high],n=t.high-1;n>=t.low;n--)e[n+1]=e[n];e[t.low]=a}},blendShiftColors:function(e,t,s){var i,n;this.shiftColors(e,t,s);var a=Math.floor((s-Math.floor(s))*Palette.PRECISION);for(n=e[t.high],i=t.high-1;i>=t.low;i--)e[i+1]=this.fadeColor(e[i+1],e[i],a,Palette.PRECISION);e[t.low]=this.fadeColor(e[t.low],n,a,Palette.PRECISION)},cycle:function(e,t,s,i){var n,a,r,o;if(this.copyColors(e,this.colors),Palette.ENABLE_CYCLING)for(n=0;n<this.numCycles;n++){var h=this.cycles[n];h.rate&&(a=h.high-h.low+1,r=h.rate/Math.floor(Palette.CYCLE_SPEED/s),h.reverse<3?o=Palette.DFLOAT_MOD(t/(1e3/r),a):3==h.reverse?(o=Palette.DFLOAT_MOD(t/(1e3/r),2*a),o>=a&&(o=2*a-o)):h.reverse<6&&(o=DFLOAT_MOD(t/(1e3/r),a),o=Math.sin(3.1415926*o*2/a)+1,4==h.reverse?o*=a/4:5==h.reverse&&(o*=a/2)),2==h.reverse&&this.reverseColors(this.colors,h),Palette.USE_BLEND_SHIFT&&i?this.blendShiftColors(this.colors,h,o):this.shiftColors(this.colors,h,o),2==h.reverse&&this.reverseColors(this.colors,h),h.cycleAmount=o)}},fade:function(e,t,s){var i;for(i=0;i<this.numColors;i++)this.colors[i]=this.fadeColor(this.colors[i],e.colors[i],t,s)},fadeToColor:function(e,t,s){var i;for(i=0;i<this.numColors;i++)this.colors[i]=this.fadeColor(this.colors[i],e,t,s)},burnOut:function(e,t){var s,i,n=Math.floor(255*(e/t));for(s=0;s<this.numColors;s++)i=this.colors[s],i.red-=n,i.red<0&&(i.red=0),i.green-=n,i.green<0&&(i.green=0),i.blue-=n,i.blue<0&&(i.blue=0)},getRawTransformedColors:function(){for(var e=[],t=0,s=this.colors.length;s>t;t++){var i=this.colors[t];e[t]=[i.red,i.green,i.blue]}return e}});
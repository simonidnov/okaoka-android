var FrameCount={current:0,average:0,frameCount:0,lastSecond:0,startTime:0,totalFrames:0,ie:!!navigator.userAgent.match(/MSIE/),visible:!0,init:function(){if(this.visible){var e='<div id="d_framecount" style="float:right; width:200px; border:1px solid #ccc; background:#eee; margin:10px; padding:10px; font-family:Helvetica,sans-serif; font-size:11px; color:#444;">Waiting for frames...</div>';if(this.ie)setTimeout(function(){document.body.insertAdjacentHTML("beforeEnd",'<div style="position:absolute; z-index:9999; left:0px; top:0px; width:100%;">'+e+"</div>")},1e3);else{var t=document.createElement("DIV");t.style.position="fixed",t.style.zIndex="9999",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.innerHTML=e,document.getElementsByTagName("body")[0].appendChild(t)}}},update:function(){var e=document.getElementById("d_framecount");if(e){var t="";t+="<table>",t+='<tr><td align="right"><b>Current FPS:</b></td><td align="left">'+this.current+"</td></tr>",t+='<tr><td align="right"><b>Average FPS:</b></td><td align="left">'+this.average+"</td></tr>",t+='<tr><td align="right"><b>Total Frames:</b></td><td align="left">'+this.totalFrames+"</td></tr>",t+="</table>",t+='<br/><a href="#" onClick="FrameCount.reset()">Reset</a>',e.innerHTML=t}},reset:function(){this.current=0,this.average=0,this.frameCount=0,this.lastSecond=0,this.startTime=0,this.totalFrames=0,this.update()},_now_epoch:function(){var e=new Date;return e.getTime()/1e3},count:function(){var e=this._now_epoch(),t=parseInt(e,10);t!=this.lastSecond&&(this.totalFrames+=this.frameCount,this.startTime||(this.startTime=t),t>this.startTime?this.average=this.totalFrames/(t-this.startTime):this.average=this.frameCount,this.current=this.frameCount,this.frameCount=0,this.lastSecond=t,this.visible&&this.update()),this.frameCount++}};
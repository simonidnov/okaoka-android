function animDelayValue(){var e=new Number(document.getElementById("animDelay").value/1e3);e.toFixed(2),document.getElementById("animDelayVal").innerHTML=e}animDelayValue(),this.animDelayValue=animDelayValue,this.gifalizer=function(){function e(){for(var e=document.getElementsByName("animScale"),t="4",s=0;s<e.length;s++)if(e[s].checked){t=e[s].value;break}return"1"==t?1:"2"==t?2:4}var t=document.getElementById("animDelay").value,s=e(),i=new Array(paintedCanvases.length),n=new Worker("animWorker.js");n.onmessage=function(e){var t=e.data.frame_index,s=e.data.frame_data;i[t]=s,console.log(t);for(var n=0;n<paintedCanvases.length;n++)if(null==i[n])return;console.log("append");var a=i.join(""),r="data:image/gif;base64,"+window.btoa(a),o=new Image;o.src=r;for(var h=document.getElementById("gifContainer");h.hasChildNodes();)h.removeChild(h.lastChild);document.getElementById("gifContainer").appendChild(o)};for(var a=new Array,r=0;r<paintedCanvases.length;r++)a[r]=new Image,a[r].src=paintedCanvases[r],a[r].isloaded=!1,a[r].index=r,a[r].onload=function(){var e=document.createElement("canvas");e.width=comicPane.width/s,e.height=comicPane.height/s;var i=e.getContext("2d");i.fillStyle="#FFFFFF",i.fillRect(0,0,e.width,e.height),i.drawImage(this,0,0,e.width,e.height);var a=i.getImageData(0,0,e.width,e.height).data;console.log(this.index),n.postMessage({frame_index:this.index,delay:t,frame_length:paintedCanvases.length-1,height:e.height,width:e.width,imageData:a})}};
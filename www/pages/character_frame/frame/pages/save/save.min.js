function save_page(){this._preview=null,this.swiper=null,this.scroll=null,this.base64=null,this.svg=null,this._name="",this._age="",this._datas=JSON.parse(window.localStorage.getItem("last_character"))}save_page.prototype.init=function(){var e=this;this.base64=window.localStorage.getItem("last_character_pix"),$(".img_preview").css("background-image","url("+this.base64+")"),this.svg=window.localStorage.getItem("last_character_svg"),$(".form").css("display","block"),$(".save .bubble").css("width",$(".save .bubble span").width()+5+"px"),$(".save .bubble span").html(app.text("GIVE_NAME")),TweenMax.set($(".save .bubble"),{scaleX:0,scaleY:0}),TweenMax.to($(".save .bubble"),.5,{scaleX:1,scaleY:1,delay:2,ease:Back.easeOut,onStart:function(){app.play_sound("hit")},onComplete:function(){app.say(app.text("GIVE_NAME"),app.locale,1.6,function(){})}}),$("#save_profil_button").off("click").on("click",function(t){e.check_datas("all",function(t){console.log("e check datas ",t),"success"===t&&e.save()})}),this.input=new fake_input("name",$(".form"),"center",function(t){e._name=$(".form span").html(),"validate"===t&&(e._name=$(".form span").html(),e.input.destroy(function(){console.log("completely destroyed")}),$(".save .bubble span").html(app.text("GIVE_AGE")),$(".save .bubble").css("width",$(".save .bubble span").width()+5+"px"),$(".save .bubble .arrow").addClass("agreen"),TweenMax.set($(".save .bubble"),{scaleX:0,scaleY:0}),TweenMax.to($(".save .bubble"),.5,{scaleX:1,scaleY:1,delay:.5,ease:Back.easeOut,onStart:function(){app.play_sound("hit")},onComplete:function(){app.say(app.text("GIVE_AGE"),app.locale,1.6,function(){})}}),e.input=new fake_input("age",$(".form"),"center",function(t){console.log(t),e._age=$(".form span").html(),console.log("self._age :: ",e._age),"validate"===t&&(e._age=$(".form span").html(),e.input.destroy(function(){e.save()}))},"number",2),setTimeout(function(){TweenMax.to($(".img_preview"),.5,{css:{height:window.innerHeight-($(".form").height()+$(".easy_keyboard").height()+5)+"px"}})},1e3))},"text",10),setTimeout($.proxy(function(){console.log("set button event"),$("#save_button").off("click").on("click",$.proxy(function(){this.save()},this)),setTimeout(function(){TweenMax.to($(".img_preview"),.5,{css:{height:window.innerHeight-($(".form").height()+$(".easy_keyboard").height()+5)+"px"}})},300)},this),200)},save_page.prototype.check_datas=function(e,t){if(""!==this._name&&""!==this._age)t("success");else{var s=new PopUp;s.open_popup({title:app.text("NEED_NAME_AND_AGE_TITLE"),message:app.text("NEED_NAME_AND_AGE_MESSAGE"),buttons:[{label:"ok"}]},function(e,t){delete s}),app.say(app.text("NEED_NAME_AND_AGE_MESSAGE"),app.locale,1.6,function(){}),t("uncomplete")}},save_page.prototype.save=function(){TweenMax.to($(".img_preview"),.5,{css:{height:window.innerHeight+"px"}}),this._datas.name=this._name,this._datas.age=this._age,ajax_request.post("/nse/character",{label:this._name,age:this._age,datas:JSON.stringify(this._datas),svg:this.svg,base64:this.base64,type:this._datas.type},function(e){console.log(e),window.localStorage.setItem("last_character",""),app._router.navigate("page/user_gallery/id/"+e.id,{trigger:!0,replace:!1})},function(e){alert("erreur lors de l'enregistrement"),console.log(e)})},save_page.prototype.play=function(){},save_page.prototype.pause=function(){},save_page.prototype.update=function(){},save_page.prototype.refresh=function(e){},save_page.prototype.destroy=function(e){$("#save_button").off("click"),e()};
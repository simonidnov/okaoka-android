function character(e){console.log("character"),ajax_request._loader.show(),this.params=e,"undefined"!=typeof e.width&&"undefined"!=typeof e.height?(this.width=e.width,this.height=e.height):(this.width=window.innerWidth,this.height=window.innerHeight),this.is_motion=!1,this.debug=!1,$(".ticker").css("display","none"),this.define_vars(),this.name="character",this.character_number=_character.length,_character[this.character_number]=this,this.stage=null,this.gif_encode=!1,this.type=0,"undefined"!=typeof app._page_request.type&&(this.type=app._page_request.type)}function hexToRgb(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}_character=[],character.prototype.init=function(e){console.log("init");var t=this;setTimeout($.proxy(function(){"undefined"!=typeof this.params.datas&&this.params.datas?t.init_stage():"undefined"!=typeof app._page_request.id?ajax_request.get("/nse/character",{id:app._page_request.id},function(e){t.params.datas=JSON.parse(e.result[0].datas),t.init_stage(),ajax_request._loader.show()},function(e){t.init_stage()}):t.init_stage()},this),600)},character.prototype.close_shape_nav=function(){this.buttons_container&&null!==this.buttons_container.parent&&this.buttons_container.parent.removeChild(this.buttons_container)},character.prototype.open_shape_nav=function(){var e=this;"undefined"==typeof this.buttons_container?(this.top_button=new lib.circle_buttons,this.bottom_button=new lib.circle_buttons,this.left_button=new lib.circle_buttons,this.right_button=new lib.circle_buttons,this.buttons_container=new createjs.Container,this.right_button.mouseEnabled=!0,this.left_button.mouseEnabled=!0,this.top_button.mouseEnabled=!0,this.bottom_button.mouseEnabled=!0,this.right_button.off("click").on("click",function(){app.play_sound("hit"),e.right_button.hitter.play();var t={sw:e.e_p[e.original_event.element.name].width,sh:e.e_p[e.original_event.element.name].height};return TweenLite.to(t,.5,{sw:e.e_p[e.original_event.element.name].width+30,onUpdate:function(){e.replace_elements(t.sw,t.sh,e.current_target),e.color_changed=!1,e.redraw_body()},ease:Back.easeOut}),!1}),this.left_button.off("click").on("click",function(){app.play_sound("hit"),e.left_button.hitter.play();var t={sw:e.e_p[e.original_event.element.name].width,sh:e.e_p[e.original_event.element.name].height};return TweenLite.to(t,.5,{sw:e.e_p[e.original_event.element.name].width-30,onUpdate:function(){e.replace_elements(t.sw,t.sh,e.current_target),e.color_changed=!1,e.redraw_body()},ease:Back.easeOut}),!1}),this.top_button.off("click").on("click",function(){app.play_sound("hit"),e.top_button.hitter.play();var t={sw:e.e_p[e.original_event.element.name].width,sh:e.e_p[e.original_event.element.name].height};return"head"===e.original_event.element.name||"neck"===e.original_event.element.name?TweenLite.to(t,.5,{sh:e.e_p[e.original_event.element.name].height-30,onUpdate:function(){e.replace_elements(t.sw,t.sh,e.current_target),e.color_changed=!1,e.redraw_body()},ease:Back.easeOut}):TweenLite.to(t,.5,{sh:e.e_p[e.original_event.element.name].height+30,onUpdate:function(){e.replace_elements(t.sw,t.sh,e.current_target),e.color_changed=!1,e.redraw_body()},ease:Back.easeOut}),!1}),this.bottom_button.off("click").on("click",function(){app.play_sound("hit"),e.bottom_button.hitter.play();var t={sw:e.e_p[e.original_event.element.name].width,sh:e.e_p[e.original_event.element.name].height};return"head"===e.original_event.element.name||"neck"===e.original_event.element.name?TweenLite.to(t,.5,{sh:e.e_p[e.original_event.element.name].height+30,onUpdate:function(){e.replace_elements(t.sw,t.sh,e.current_target),e.color_changed=!1,e.redraw_body()},ease:Back.easeOut}):TweenLite.to(t,.5,{sh:e.e_p[e.original_event.element.name].height-30,onUpdate:function(){e.replace_elements(t.sw,t.sh,e.current_target),e.color_changed=!1,e.redraw_body()},ease:Back.easeOut}),!1}),this.buttons_container.addChild(this.top_button),this.buttons_container.addChild(this.bottom_button),this.buttons_container.addChild(this.left_button),this.buttons_container.addChild(this.right_button)):null!==this.buttons_container.parent&&this.buttons_container.parent.removeChild(this.buttons_container),this.original_event.element.parent.addChild(this.buttons_container),setTimeout(function(){e.right_button.icon.gotoAndStop("right"),e.left_button.icon.gotoAndStop("left"),e.top_button.icon.gotoAndStop("top"),e.bottom_button.icon.gotoAndStop("bottom")},20)},character.prototype.init_stage=function(){var e=this;"undefined"==typeof this.params.height?(this.size={w:e.width,h:e.height-120},$("#"+this.params.canvas).css({width:this.size.w,height:this.size.h,left:e.width/2-this.size.w/2+"px",position:"absolute"})):(this.size={w:e.params.width,h:e.params.height},$("#"+this.params.canvas).css({width:this.size.w,height:this.size.h})),this.stage=new createjs.Stage(this.params.canvas),$("#"+this.params.canvas).attr({width:this.size.w,height:this.size.h}),this.stage.autoClear=!0,this.ticker.name="ticker",createjs.Ticker.addEventListener("tick",$.proxy(this.ticker,this)),createjs.EventDispatcher.initialize(this),this.params.touch_enabled===!0&&(createjs.Touch.enable(this.stage),$("#animate_button").off("click").on("click",$.proxy(this.save,this)),$("#infos_button").off("click").on("click",function(){var e=new PopUp;return e.open_popup({title:"Aide ?",message:'<video src="videos/tutorial.m4v" width="200" autoplay controls></video>',buttons:[{label:"ok"}]},function(t,a){delete e}),!1}),$("#save_button").off("click").on("click",$.proxy(this.save,this)),$("#prev_button").off("click").on("click",$.proxy(this.unanimate,this))),createjs.Ticker.setFPS(120),this.background=new createjs.Shape,"undefined"!=typeof this.params.bkcolor?this.bkcolor=this.params.bkcolor:this.bkcolor=this.filters.color[Math.floor(Math.random()*this.filters.color.length)],console.log("this.bkcolor :::::::: ",this.bkcolor),this.background.graphics.beginFill(this.bkcolor).drawRect(0,0,window.innerWidth,window.innerHeight),this.stage.addChild(this.background),this.create_body(),this.params.touch_enabled===!0&&(setTimeout($.proxy(function(){this.create_navigation()},this),2e3),this.set_motion()),$("#print_button").off("click").on("click",function(){return window.print(),!1}),$(document).on("resize",function(){return e.resize(),!1}),setTimeout(function(){app.stage_inited()},2500)},character.prototype.unanimate=function(){var e=this;e.close_shape_nav(),e.positions(e,e.positions_list.stand.infos),$("#prev_button").css("display","none"),$("#animate_button").css("display","block"),$("#save_button").css("display","none"),this.is_motion=!1;for(var t=0;t<_.keys(this.e_p).length;t++){var a=this[_.keys(this.e_p)[t]];a.removeAllEventListeners(),a.on("mousedown",function(t){e.set_original_event(this,t)}),a.on("pressmove",function(t){e.resize_element(this,t)}),a.on("pressup",function(t){e.set_element(this,t)})}this.hands_assets_1.removeAllEventListeners(),this.hands_assets_2.removeAllEventListeners(),this.shoes_assets_1.removeAllEventListeners(),this.shoes_assets_2.removeAllEventListeners(),this.create_navigation(),this.motions.stand()},character.prototype.animate=function(){if(window.innerWidth>=700)var e=80;else var e=60;this.close_shape_nav(),$("#prev_button").css("display","block"),$("#animate_button").css("display","none"),$("#save_button").css("display","block");for(var t=0;t<_.keys(this.e_p).length;t++){var a=this[_.keys(this.e_p)[t]];a.removeAllEventListeners(),a.on("mousedown",function(e){s.set_original_event(this,e)}),a.on("pressmove",function(e){s.rotate_element(this,e,s)}),a.on("pressup",function(e){s.rotated_element(this,e)})}this.hands_assets_1.mouseEnabled=!0,this.hands_assets_1.on("click",function(){return 1===s.hands_assets_1.children[0].scaleX?s.hands_assets_1.children[0].scaleX=-1:s.hands_assets_1.children[0].scaleX=1,!1}),this.hands_assets_2.mouseEnabled=!0,this.hands_assets_2.on("click",function(){return 1===s.hands_assets_2.children[0].scaleX?s.hands_assets_2.children[0].scaleX=-1:s.hands_assets_2.children[0].scaleX=1,!1}),this.shoes_assets_1.mouseEnabled=!0,this.shoes_assets_1.on("click",function(){return 1===s.shoes_assets_1.children[0].scaleX?s.shoes_assets_1.children[0].scaleX=-1:s.shoes_assets_1.children[0].scaleX=1,!1}),this.shoes_assets_2.mouseEnabled=!0,this.shoes_assets_2.on("click",function(){return 1===s.shoes_assets_2.children[0].scaleX?s.shoes_assets_2.children[0].scaleX=-1:s.shoes_assets_2.children[0].scaleX=1,!1}),this.is_motion=!0,"undefined"!=typeof this.myTween&&null!==this.myTween&&(this.myTween.kill(),delete this.myTween),$(".navigation").css("height",e+"px"),$(".nav_selector .container").html(""),$(".nav_picker, .nav_filter").css("display","none");var s=this;this.resize();for(var t=0;t<_.keys(s.positions_list).length;t++)$(".nav_selector .container").append('<div class="button" data-type="'+_.keys(s.positions_list)[t]+'"><img src="'+s.positions_list[_.keys(s.positions_list)[t]].icon+'"/></div>');$(".nav_selector .container .button").off("click").on("click",function(e){console.log("click"),e.stopPropagation(),e.preventDefault(),$(".nav_selector .container .button").removeClass("selected"),$(this).addClass("selected");var t=$(this).attr("data-type");return s.positions(s,s.positions_list[t].infos),!1}),$("#nav_selector .container").css("width",e*_.keys(s.positions_list).length+"px"),TweenLite.set("#nav_selector .scroller",{x:0,y:0})},character.prototype.resize=function(){var e=this;if(!e.body)return!1;if("undefined"!=typeof e.myTween&&e.myTween.kill(),this.params.touch_enabled?(this.size={w:e.width,h:e.height-$(".character .navigation").height()},$("#"+this.params.canvas).css({width:e.size.w,height:e.size.h,left:e.width/2-e.size.w/2+"px",position:"absolute"})):(this.size={w:e.params.width,h:e.params.height},$("#"+this.params.canvas).css({width:e.size.w,height:e.size.h})),(parseInt($("#"+this.params.canvas).attr("width"))!==e.size.w||parseInt($("#"+this.params.canvas).attr("height"))!==e.size.h)&&$("#"+this.params.canvas).attr({width:e.size.w,height:e.size.h}),"undefined"!=typeof e.container){var t=e.container.getBounds().height+100,a=e.container.getBounds().width+100,s=e.size.h,i=(s/t).toFixed(2);if(e.size.h<e.size.w)var i=(s/a).toFixed(2);if(e.legLeft.y+e.legLeft.getBounds().height>e.armLeft.y+e.armLeft.getBounds().height)var o=e.legLeft.y+e.legLeft.getBounds().height;else var o=e.armLeft.y+e.armLeft.getBounds().height;e.container.regY=o,TweenLite.to(e.container,.5,{scaleX:i,scaleY:i,y:e.size.h,onComplete:function(){function t(){e.myTween.reverse()}function a(){e.myTween.restart()}e.stage.update(),"undefined"==typeof e.params.touch_enabled||e.params.touch_enabled!==!0||e.is_motion||(e.myTween=new TweenLite(e.container,1,{y:e.container.y-10,onComplete:t,onReverseComplete:a}))}})}},character.prototype.set_motion=function(){var e=2e4;this.params.touch_enabled||(e=Math.round(5e3*Math.random())+2e3),setTimeout($.proxy(function(){return this.print?!1:this.is_motion?!1:void this.set_motion()},this),e)},character.prototype.create_navigation=function(){var e=this;if(window.innerWidth>=700)var t=80;else var t=60;$(".nav_selector .container").html("");for(var a=0;a<_.keys(e.navigation_types).length;a++)0!==parseInt(e.type)?(console.log("type not 0 ",e.type),("all"===e.navigation_types[_.keys(e.navigation_types)[a]].type||e.navigation_types[_.keys(e.navigation_types)[a]].type==e.type)&&$(".nav_selector .container").append('<div class="button" data-type="'+_.keys(e.navigation_types)[a]+'"><img src="'+e.navigation_types[_.keys(e.navigation_types)[a]].icon+'"/></div>')):$(".nav_selector .container").append('<div class="button" data-type="'+_.keys(e.navigation_types)[a]+'"><img src="'+e.navigation_types[_.keys(e.navigation_types)[a]].icon+'"/></div>');$(".nav_selector .container .button").unbind("click").off("click").on("click",function(t){return console.log("click nav"),t.stopPropagation(),t.preventDefault(),$(".nav_selector .container .button").removeClass("selected"),$(this).addClass("selected"),e.set_subnav($(this).attr("data-type")),_UI.displayTouch($(this)),!1}),this.nav_width=t*Math.floor(e.width/t),this.nav_width>12*t&&(this.nav_width=12*t),$("#nav_selector").css("width",this.nav_width+"px"),$(".nav_selector .container").css("width",t*$(".nav_selector .container .button").length+"px"),e.scroll_nav=Draggable.create("#nav_selector .scroller",{type:"x",edgeResistance:.5,throwProps:!0,lockAxis:!0,bounds:"#nav_selector",snap:{x:function(e){return Math.round(e/$(".nav_selector").width())*$(".nav_selector").width()}},onClick:function(e){e.stopPropagation(),e.preventDefault()}}),$("#nav_picker").css("width",e.nav_width+"px"),this.scroll_nav=Draggable.create("#nav_picker .scroller",{type:"x",edgeResistance:.5,throwProps:!0,lockAxis:!0,bounds:"#nav_picker",snap:{x:function(e){return Math.round(e/$(".nav_selector").width())*$(".nav_selector").width()}},onClick:function(e){e.stopPropagation(),e.preventDefault()}}),$("#nav_filter").css("width",this.nav_width+"px"),this.scroll_nav=Draggable.create("#nav_filter .scroller",{type:"x",edgeResistance:.5,throwProps:!0,lockAxis:!0,bounds:"#nav_filter",snap:{x:function(e){return Math.round(e/$(".nav_selector").width())*$(".nav_selector").width()}},onClick:function(e){e.stopPropagation(),e.preventDefault()}}),e.set_subnav("skins")},character.prototype.set_subnav=function(e){var t=this;if(window.innerWidth>=700)var a=80;else var a=60;var s=a;if(t.close_shape_nav(),TweenLite.set("#nav_filter .scroller",{x:0,y:0}),TweenLite.set("#nav_picker .scroller",{x:0,y:0}),$(".nav_picker .container").html(""),"undefined"!=typeof t.navigation_types[e].maps){$(".nav_picker").css("display","block"),s+=a;for(var i="",o=0;o<_.keys(t.navigation_types[e].maps).length;o++){var n=t.navigation_types[e].maps[_.keys(t.navigation_types[e].maps)[o]];console.log("curi ::: ",n),console.log("curi.type ::: ",n.type),0!==parseInt(t.type)?("all"==n.type||n.type==t.type)&&(i+='<div class="button" data-type="'+e+'" data-id="'+o+'" data-name="'+_.keys(t.navigation_types[e].maps)[o]+'"><div class="head_preview_asset" style="background-image:url('+n.preview+');"></div></div>'):i+='<div class="button" data-type="'+e+'" data-id="'+o+'" data-name="'+_.keys(t.navigation_types[e].maps)[o]+'"><div class="head_preview_asset" style="background-image:url('+n.preview+');"></div></div>'}$("#nav_picker_container").html(i),$(".nav_picker .container").css({width:$(".nav_picker .container .button").length*a+"px"}),$(".nav_picker .container .button").unbind("click").off("click").on("click",function(e){console.log("click subnav picker"),e.stopPropagation(),e.preventDefault(),$(".nav_picker .container .button").removeClass("selected"),$(this).addClass("selected");var a=null;switch(_UI.displayTouch($(this)),t.close_shape_nav(),$(this).attr("data-type")){case"hairs":a=t.hair_assets.hairs,t.containers.hairs_container.assets.hairs.status=$(this).attr("data-id"),t.containers.backhairs_container.assets.backhairs.status=$(this).attr("data-id"),t.redraw_body();break;case"noses":a=t.face_assets.noses,t.containers.faces_container.assets.noses.status=$(this).attr("data-id");break;case"eyes":a=t.face_assets.eyes,t.containers.faces_container.assets.eyes.status=$(this).attr("data-id");break;case"eyebrow":a=t.face_assets.eyebrow,t.containers.faces_container.assets.eyebrow.status=$(this).attr("data-id");break;case"mouths":a=t.face_assets.mouths,t.containers.faces_container.assets.mouths.status=$(this).attr("data-id");break;case"mustach":a=t.face_assets.mustach,t.containers.faces_container.assets.mustach.status=$(this).attr("data-id");break;case"barbes":a=t.barbes_assets.barbes,t.containers.barbes_container.assets.barbes.status=$(this).attr("data-id");break;case"hats":a=t.accessories_assets.hats,t.containers.accessories_container.assets.hats.status=$(this).attr("data-id");break;case"ears":a=t.hair_assets.ears,t.containers.hairs_container.assets.ears.status=$(this).attr("data-id");break;case"glasses":a=t.face_assets.glasses,t.containers.faces_container.assets.glasses.status=$(this).attr("data-id");break;case"tops":a=t.tops_assets.tshirt,t.containers.tops_container.assets.tshirt.status=$(this).attr("data-id");break;case"shoes":a=t.shoes_assets_1.shoes,t.containers.shoes_01.assets.shoes.status=$(this).attr("data-id"),t.containers.shoes_02.assets.shoes.status=$(this).attr("data-id");break;case"hand":a=t.hands_assets_1.hand,t.containers.hands_01.assets.hand.status=$(this).attr("data-id"),t.containers.hands_02.assets.hand.status=$(this).attr("data-id");break;case"shoes_01":a=t.shoes_assets_1.shoes,t.containers.shoes_01.assets.shoes.status=$(this).attr("data-id");break;case"shoes_02":a=t.shoes_assets_2.shoes,t.containers.shoes_02.assets.shoes.status=$(this).attr("data-id")}return t.set_containers(),!1}),setTimeout(function(){$(".nav_picker").css("display","block")},10)}else $(".nav_picker").css("display","none");if("undefined"!=typeof t.navigation_types[e].colors){s+=a,$(".nav_filter .container").css({width:t.navigation_types[e].colors.length*a+"px"}).html("");for(var o=0;o<t.navigation_types[e].colors.length;o++)$(".nav_filter .container").append('<div class="button" data-type="'+e+'" data-color="'+t.navigation_types[e].colors[o]+'" style="background-color:'+t.navigation_types[e].colors[o]+';"></div>');$(".nav_filter .container .button").unbind("click").off("click").on("click",function(e){switch(console.log("click nav filter"),e.preventDefault(),e.stopPropagation(),_UI.displayTouch($(this)),t.close_shape_nav(),$(this).attr("data-type")){case"skins":t.skin_color=$(this).attr("data-color");break;case"bkcolor":t.bkcolor=$(this).attr("data-color"),t.background.graphics.clear(),t.background.graphics.beginFill($(this).attr("data-color")).drawRect(0,0,window.innerWidth,window.innerHeight);break;case"tops":t.t_color=$(this).attr("data-color");break;case"bottoms":t.b_color=$(this).attr("data-color");break;case"hairs":t.hair_color=$(this).attr("data-color");break;case"eyes":t.eyes_color=$(this).attr("data-color");break;case"shoes":t.shoes_color=$(this).attr("data-color");break;case"glasses":t.glasses_color=$(this).attr("data-color")}return t.color_changed=!0,t.redraw_body(),!1}),$(".nav_filter").css("display","block")}else if($(".nav_filter").css("display","none"),$(".navigation").css("height",2*a+"px"),"undefined"!=typeof t.navigation_types[e].filter){s+=a,$(".nav_filter").css("display","block"),$(".nav_filter .container").css({width:t.filters[t.navigation_types[e].filter].length*a+"px"}).html("");for(var o=0;o<t.filters[t.navigation_types[e].filter].length;o++)$(".nav_filter .container").append('<div class="button" data-color="'+t.filters[t.navigation_types[e].filter][o]+'" style="background-color:'+t.filters[t.navigation_types[e].filter][o]+';"></div>');$(".nav_filter .container .button").unbind("click").off("click").on("click",function(e){return console.log("click nav filter 2"),e.stopPropagation(),e.preventDefault(),t.close_shape_nav(),"hairs"===$(this).attr("data-type")?t.hair_color=$(this).attr("data-color"):"eyes"===$(this).attr("data-type")&&(t.eyes_color=$(this).attr("data-color")),t.color_changed=!0,t.redraw_body(),!1})}else $(".nav_filter").css("display","none"),$(".navigation").css("height",2*a+"px");$(".navigation").css("height",s+"px"),this.resize()},character.prototype.ticker=function(e){var t=this;if(t.debug&&$(".ticker").html(createjs.Ticker.getMeasuredFPS().toFixed(2)),t.print)return t.stage.update(),!1;if("undefined"==typeof t.neck||"undefined"==typeof t.farm_left)return!1;if("undefined"!=typeof this.top_button&&this.original_event)switch(this.default_elements[this.original_event.element.name].reg){case"bottom center":this.top_button.y=-this.original_event.element.getBounds().height-50,this.bottom_button.y=-25,this.left_button.x=-this.original_event.element.getBounds().width/2-50,this.right_button.x=this.original_event.element.getBounds().width/2+50,this.left_button.y=-this.original_event.element.getBounds().height/2,this.right_button.y=-this.original_event.element.getBounds().height/2;break;case"top center":this.top_button.y=-50,this.bottom_button.y=this.original_event.element.getBounds().height/2+50,this.left_button.x=-this.original_event.element.getBounds().width/2-50,this.right_button.x=this.original_event.element.getBounds().width/2+50,this.left_button.y=this.original_event.element.getBounds().height/2,this.right_button.y=this.original_event.element.getBounds().height/2;break;case"top top center":this.top_button.y=-50,this.bottom_button.y=this.original_event.element.getBounds().height/2+100,this.left_button.x=-this.original_event.element.getBounds().width/2-50,this.right_button.x=this.original_event.element.getBounds().width/2+50,this.left_button.y=this.original_event.element.getBounds().height/2,this.right_button.y=this.original_event.element.getBounds().height/2;break;case"top left":this.top_button.y=-50,this.bottom_button.y=this.original_event.element.getBounds().height/2+100,this.left_button.x=-this.original_event.element.getBounds().width/2-50,this.right_button.x=this.original_event.element.getBounds().width/2+50,this.left_button.y=this.original_event.element.getBounds().height/2,this.right_button.y=this.original_event.element.getBounds().height/2;break;case"top right":this.top_button.y=-50,this.bottom_button.y=this.original_event.element.getBounds().height/2+100,this.left_button.x=-this.original_event.element.getBounds().width/2-50,this.right_button.x=this.original_event.element.getBounds().width/2+50,this.left_button.y=this.original_event.element.getBounds().height/2,this.right_button.y=this.original_event.element.getBounds().height/2;break;default:this.top_button.y=-this.original_event.element.getBounds().height/2-50,this.bottom_button.y=this.original_event.element.getBounds().height/2+50,this.left_button.x=-this.original_event.element.getBounds().width/2-50,this.right_button.x=this.original_event.element.getBounds().width/2+50}if(t.head.x=0,t.head.y=-(t.neck.getBounds().height-10),t.body.x=0,t.body.y=0,t.neck.y=7,t.neck.x=0,t.is_motion?(t.armLeft.x=-(t.gbody.getBounds().width/2*t.gbody.parent.scaleX)-t.arm_left.getBounds().width/2*t.armLeft.scaleX+t.arm_left.getBounds().width/2,t.armRight.x=t.gbody.getBounds().width/2*t.gbody.parent.scaleX+t.arm_right.getBounds().width/2*t.armRight.scaleX-t.arm_right.getBounds().width/2):(t.armLeft.x=-(t.gbody.getBounds().width/2*t.gbody.parent.scaleX)-t.arm_left.getBounds().width/2*t.armLeft.scaleX,t.armRight.x=t.gbody.getBounds().width/2*t.gbody.parent.scaleX+t.arm_right.getBounds().width/2*t.armRight.scaleX),t.armLeft.y=t.gbody.getBounds().height/4,t.armRight.y=t.gbody.getBounds().height/4,t.farmLeft.y=t.arm_left.getBounds().height-t.arm_left.getBounds().width,t.farmRight.y=t.arm_right.getBounds().height-t.arm_right.getBounds().width,t.hands_01.y=t.farm_left.getBounds().height-t.farm_left.y-t.e_p.farm_left.current_radius.bl,t.hands_02.y=t.farm_right.getBounds().height-t.farm_right.y-t.e_p.farm_left.current_radius.bl,t.shoes_01.regX=t.leg_left.getBounds().width/2,t.shoes_02.regX=t.leg_left.getBounds().width/2,t.shoes_01.y=t.flegLeft.getBounds().height-t.e_p.fleg_left.current_radius.bl,t.shoes_02.y=t.flegRight.getBounds().height-t.e_p.fleg_left.current_radius.bl,t.flegLeft.regX=t.flegLeft.getBounds().width/2,t.flegLeft.regY=0,t.flegLeft.x=t.flegLeft.getBounds().width/2,t.flegLeft.y=t.leg_left.getBounds().height-t.leg_left.getBounds().width,t.flegRight.regX=-t.flegLeft.getBounds().width/2,t.flegRight.regY=0,t.flegRight.x=-t.flegRight.getBounds().width/2,t.flegRight.y=t.leg_right.getBounds().height-t.leg_right.getBounds().width,t.legLeft.regX=t.legLeft.getBounds()["with"]/2,t.legLeft.regY=t.legLeft.getBounds()["with"]/2,t.legLeft.x=-(t.gbody.getBounds().width/2),t.legLeft.y=t.gbody.getBounds().height,t.legRight.x=t.gbody.getBounds().width/2,t.legRight.y=t.gbody.getBounds().height,null===t.pantalon.parent&&t.body.addChild(t.pantalon),"undefined"!=typeof t.current_target){if("ghead"===t.current_target.name){var a=t.ghead.getBounds().width/400,s=t.ghead.getBounds().height/400;t.barbes_container.scaleX=t.backhairs_container.scaleX=t.backhairs_container.scaleY=t.hairs_container.scaleX=t.hairs_container.scaleY=t.accessories_container.scaleX=t.accessories_container.scaleY=a,t.barbes_container.scaleY=s,t.backhairs_container.x=t.hairs_container.x=t.accessories_container.x=-t.ghead.getBounds().width,t.ghead.getBounds().width<t.ghead.getBounds().height?(t.faces_container.scaleX=t.faces_container.scaleY=a,t.faces_container.y=-t.ghead.getBounds().height-t.ghead.getBounds().width/2):(t.faces_container.scaleX=t.faces_container.scaleY=s,t.faces_container.y=-t.ghead.getBounds().height-t.ghead.getBounds().height/2),t.faces_container.x=-400*t.faces_container.scaleX,t.backhairs_container.y=t.hairs_container.y=t.accessories_container.y=-t.ghead.getBounds().height-t.ghead.getBounds().width/2}if("gbody"===t.current_target.name){var a=t.gbody.getBounds().width/400,s=t.gbody.getBounds().height/400;t.gbody.getBounds().width<t.gbody.getBounds().height?t.tops_container.scaleX=t.tops_container.scaleY=a:t.tops_container.scaleX=t.tops_container.scaleY=s}}t.stage.update()},character.prototype.transition_end=function(){},character.prototype.play=function(){},character.prototype.pause=function(){"undefined"!=typeof this._randomTween&&null!==this._randomTween&&(this._randomTween.kill(),delete this._randomTween),"undefined"!=typeof this.myTween&&null!==this.myTween&&(this.myTween.kill(),delete this.myTween),"undefined"==typeof this.params.random&&this.container.cache(-800,-800,1600,1600),this.stage.autoClear=!1,this.stage.enableDOMEvents(!1),createjs.Ticker.setFPS(0),createjs.Ticker.removeAllEventListeners("tick")},character.prototype.update=function(){createjs.Ticker.addEventListener("tick",$.proxy(this.ticker,this)),createjs.Ticker.setFPS(120),this.stage.autoClear=!0},character.prototype.refresh=function(e){},character.prototype.destroy=function(e){this.stage.autoClear=!1,this.stage.enableDOMEvents(!1),createjs.Ticker.reset(),createjs.Ticker.removeAllEventListeners("tick"),this.stage.removeAllChildren(),this.stage.update(),createjs.Ticker.setFPS(24),createjs.Sound.stop(),app.set_nav_button(),this.containers=[],this.e_p=[],this.skin_color="",this.bkcolor="",this.t_color="",this.b_color="",this.hair_color="",this.eyes_color="",this.border_color="",delete this.containers,_character=[],"undefined"!=typeof this.myTween&&null!==this.myTween&&(this.myTween.kill(),delete this.myTween),e()},character.prototype.create_body=function(){var e=this;$("#"+this.params.canvas).css("visibility","hidden"),e.e_p=_.clone(e.default_elements),e.container=new createjs.Container,e.stage.addChild(e.container),e.container.x=e.size.w/2,TweenLite.set(e.container,{scaleX:0,scaleY:0});for(var t=0;t<_.keys(e.containers).length;t++)e[_.keys(e.containers)[t]]=new createjs.Container,e[_.keys(e.containers)[t]].name=_.keys(e.containers)[t],"undefined"!=typeof e.containers[_.keys(e.containers)[t]].parent?e[e.containers[_.keys(e.containers)[t]].parent].addChild(e[_.keys(e.containers)[t]]):e.container.addChild(e[_.keys(e.containers)[t]]),"undefined"!=typeof e.containers[_.keys(e.containers)[t]].movieclip&&"undefined"!=typeof lib[e.containers[_.keys(e.containers)[t]].movieclip]&&(e[e.containers[_.keys(e.containers)[t]].movieclipname]=new(lib[e.containers[_.keys(e.containers)[t]].movieclip]),e[_.keys(e.containers)[t]].addChild(e[e.containers[_.keys(e.containers)[t]].movieclipname]),e[e.containers[_.keys(e.containers)[t]].movieclipname].mouseEnabled=!1);setTimeout(function(){e.current_target=window.ghead,e.redraw_body()},1500),setTimeout($.proxy(function(){this.current_target=this.gbody,setTimeout($.proxy(function(){this.color_changed=!0,this.current_target=this.ghead,this.redraw_body(),setTimeout($.proxy(function(){"undefined"!=typeof this.params.datas&&this.params.datas?this.set_datas(this.params.datas):($("#"+this.params.canvas).css("visibility","visible"),""!==window.localStorage.getItem("last_character")&&null!==window.localStorage.getItem("last_character")&&this.set_datas(JSON.parse(window.localStorage.getItem("last_character")))),this.resize(),ajax_request._loader.hide()},this),10)},this),10)},this),2e3)},character.prototype.redraw_body=function(){for(var e=this,t=0;t<_.keys(e.e_p).length;t++){e.to_add=!1,"undefined"==typeof e[_.keys(e.e_p)[t]]?(e.to_add=!0,e[_.keys(e.e_p)[t]]=new createjs.Shape):e[_.keys(e.e_p)[t]].graphics.clear();var a=e[_.keys(e.e_p)[t]],s=_.keys(e.e_p)[t];if(a.name=s,"undefined"!=typeof e.e_p[a.name].current_radius)var i=e.e_p[a.name].current_radius;else{var i={tl:e.e_p[a.name].width/2,tr:e.e_p[a.name].width/2,bl:e.e_p[a.name].width/2,br:e.e_p[a.name].width/2};e.e_p[a.name].height<e.e_p[a.name].width&&(i.tl=e.e_p[a.name].height/2),i.tl>e.e_p[a.name].radius.tl&&(i.tl=e.e_p[a.name].radius.tl),i.tr>e.e_p[a.name].radius.tr&&(i.tr=e.e_p[a.name].radius.tr),i.bl>e.e_p[a.name].radius.bl&&(i.bl=e.e_p[a.name].radius.bl),i.br>e.e_p[a.name].radius.br&&(i.br=e.e_p[a.name].radius.br)}a.graphics.beginStroke(e.border_color).beginFill(e[e.e_p[s].color]).drawRoundRectComplex(0,0,e.e_p[s].width.toFixed(1),e.e_p[s].height.toFixed(1),i.tl,i.tr,i.bl,i.br),"undefined"!=typeof e.hands_assets_1.hand.skin&&"undefined"!=typeof e.hands_assets_1.hand.skin.children[0]&&(e.hands_assets_1.hand.skin.children[0].graphics._fill.style=e.hands_assets_2.hand.skin.children[0].graphics._fill.style=this.skin_color,e.hands_assets_1.scaleY=e.hands_assets_1.scaleX=e.hands_assets_2.scaleY=e.hands_assets_2.scaleX=e.farm_left.getBounds().width/50,e.shoes_assets_1.scaleY=e.shoes_assets_1.scaleX=e.shoes_assets_2.scaleY=e.shoes_assets_2.scaleX=e.fleg_left.getBounds().width/50),a.setBounds(0,0,e.e_p[s].width,e.e_p[s].height),a.graphics.endFill().endStroke(),e.to_add&&(e[e.e_p[s].container].addChild(a),e.params.touch_enabled===!0&&("undefined"!=typeof e.e_p[s].mouse_enabled?e.e_p[s].mouse_enabled===!0&&(a.on("mousedown",function(t){e.set_original_event(this,t)}),a.on("pressmove",function(t){e.resize_element(this,t)}),a.on("pressup",function(t){e.set_element(this,t)})):(a.on("mousedown",function(t){e.set_original_event(this,t)}),a.on("pressmove",function(t){e.resize_element(this,t)}),a.on("pressup",function(t){e.set_element(this,t)})))),this.set_reg(a.name),e.color_changed&&(e.set_containers(),e.color_changed=!1);var o=!1;"undefined"==typeof e.pantalon?(o=!0,e.pantalon=new createjs.Shape):e.pantalon.graphics.clear(),e.pantalon.graphics.beginStroke(e.border_color).beginFill(e.b_color).drawRect(0,0,e.e_p.gbody.width,e.e_p.leg_left.width),e.pantalon.y=e.e_p.gbody.height-1,e.pantalon.x=-e.e_p.gbody.width/2,o&&e.body.addChild(self.pantalon),t===_.keys(e.e_p).length-1&&setTimeout(function(){e.can_redraw=!0},100)}e.farmLeft.removeChild(e.hands_01),e.farmLeft.addChild(e.hands_01),e.farmRight.removeChild(e.hands_02),e.farmRight.addChild(e.hands_02),e.flegLeft.removeChild(e.shoes_01),e.flegLeft.addChild(e.shoes_01),e.shoes_01.scaleX=-1,e.hands_01.scaleX=-1,e.flegRight.removeChild(e.shoes_02),e.flegRight.addChild(e.shoes_02),e.body.removeChild(e.tops_container),e.body.addChild(e.tops_container),e.body.removeChild(e.armRight),e.body.addChild(e.armRight),e.body.removeChild(e.armLeft),e.body.addChild(e.armLeft),e.head.removeChild(e.faces_container),e.head.addChild(e.faces_container),e.head.removeChild(e.hairs_container),e.head.addChild(e.hairs_container),e.head.removeChild(e.accessories_container),e.head.addChild(e.accessories_container),e.head.removeChild(e.barbes_container),e.head.addChild(e.barbes_container),e.barbes_container.mask=e.ghead},character.prototype.set_original_event=function(e,t){var a=this;a.current_target=e,a.original_event={element:e,event:t,scale:e.parent.scaleX,width:a.e_p[a.current_target.name].width,height:a.e_p[a.current_target.name].height},!this.is_motion},character.prototype.resize_element=function(e,t){var a=this,s=-(a.original_event.event.stageX-t.stageX)/500,i=(a.original_event.event.stageY-t.stageY)/500;"ghead"!==a.original_event.element.name&&"neck"!==a.original_event.element.name&&(i=-i);
var o=parseInt(a.original_event.width+500*s),n=parseInt(a.original_event.height+500*i);o>a.e_p[a.original_event.element.name].max_width?o=a.e_p[a.original_event.element.name].max_width:o<a.e_p[a.original_event.element.name].min_width&&(o=a.e_p[a.original_event.element.name].min_width),o=0>o?-o:Math.abs(o),a.replace_elements(o,n,a.current_target),a.color_changed=!1,a.redraw_body()},character.prototype.get_angle=function(e,t){var a=t.x-e.x,s=t.y-e.y,i=Math.atan2(s,a),o=i+Math.PI;return 180*o/Math.PI-90},character.prototype.rotate_element=function(e,t,a){var s=e.parent.name,i=(a.original_event.event.stageX-t.stageX)/50;(a.original_event.event.stageY-t.stageY)/50;("ghead"===a.original_event.element.name||"neck"===a.original_event.element.name)&&(i=-i);var n=e.parent.rotation+i;"undefined"!=typeof a.containers[s].rotate&&(n<parseInt(a.containers[s].rotate.min)&&(n=parseInt(a.containers[s].rotate.min)),n>parseInt(a.containers[s].rotate.max)&&(n=parseInt(a.containers[s].rotate.max))),e.parent.rotation=n},character.prototype.rotated_element=function(e,t){},character.prototype.save_pos=function(){var e={rotation:{head:this.head.rotation.toFixed(2),body:this.body.rotation.toFixed(2),armLeft:this.armLeft.rotation.toFixed(2),farmLeft:this.farmLeft.rotation.toFixed(2),armRight:this.armRight.rotation.toFixed(2),farmRight:this.farmRight.rotation.toFixed(2),legLeft:this.legLeft.rotation.toFixed(2),flegLeft:this.flegLeft.rotation.toFixed(2),legRight:this.legRight.rotation.toFixed(2),flegRight:this.flegRight.rotation.toFixed(2)},scaleX:{hands_assets_1:this.hands_assets_1.scaleX,hands_assets_2:this.hands_assets_2.scaleX,shoes_assets_1:this.shoes_assets_1.scaleX,shoes_assets_2:this.shoes_assets_1.scaleX}};return e},character.prototype.set_reg_containers=function(e){for(var t=this,a=0;a<_.keys(t.containers).length;a++){var e=_.keys(t.containers)[a],s=t.containers[e].reg,i=t[e];if("undefined"!=typeof i&&i.getBounds())switch(s){case"top left":i.regX=0,i.regY=0;break;case"top center":i.regX=i.getBounds().width/2,i.regY=0;break;case"top right":i.regX=i.getBounds().width,i.regY=0;break;case"bottom left":i.regX=0,i.regY=i.getBounds().height;break;case"bottom center":i.regX=i.getBounds().width/2,i.regY=i.getBounds().height;break;case"bottom right":i.regX=i.getBounds().width,i.regY=i.getBounds().height;break;case"center left":i.regX=0,i.regY=i.getBounds().height;break;case"center center":i.regX=i.getBounds().width/2,i.regY=i.getBounds().height/2;break;case"center right":i.regX=i.getBounds().width,i.regY=i.getBounds().height/2}}},character.prototype.set_reg=function(e){var t=this,a=t.e_p[e].reg,s=t.e_p[e],i=t[e];switch(a){case"top left":i.regX=0,i.regY=s.width/2;break;case"top center":i.regX=s.width/2,i.regY=s.width/2;break;case"top top center":i.regX=s.width/2,i.regY=0;break;case"top right":i.regX=s.width,i.regY=s.width/2;break;case"bottom left":i.regX=0,i.regY=s.height-s.width/2;break;case"bottom center":i.regX=s.width/2,i.regY=s.height;break;case"bottom bottom center":i.regX=s.width/2,i.regY=s.height;break;case"bottom right":i.regX=s.width,i.regY=s.height-s.width/2;break;case"center left":i.regX=0,i.regY=s.height/2;break;case"center center":i.regX=s.width/2,i.regY=s.height/2;break;case"center right":i.regX=s.width,i.regY=s.height/2}},character.prototype.set_element=function(e,t){this.is_move=!1,this.resize()},character.prototype.replace_elements=function(e,t,a){var s=this;if(t>s.e_p[a.name].max_height&&(t=s.e_p[a.name].max_height),t<s.e_p[a.name].min_height&&(t=s.e_p[a.name].min_height),e>s.e_p[a.name].max_width&&(e=s.e_p[a.name].max_width),e<s.e_p[a.name].min_width&&(e=s.e_p[a.name].min_width),"undefined"!=typeof s.e_p[a.name].contrainst.min_height)switch(s.e_p[a.name].contrainst.min_height){case"<width/2":e/2>t&&(t=e/2)}if("undefined"!=typeof s.e_p[a.name].contrainst.max_width)switch(s.e_p[a.name].contrainst.max_width){case"gbody.width/2":e>s.e_p.gbody.width/2&&(e=s.e_p.gbody.width/2)}s.e_p[a.name].width=e,s.e_p[a.name].height=t;var i={tl:s.e_p[a.name].width/2,tr:s.e_p[a.name].width/2,bl:s.e_p[a.name].width/2,br:s.e_p[a.name].width/2};if(i.tl>s.e_p[a.name].radius.tl&&(i.tl=s.e_p[a.name].radius.tl),i.tr>s.e_p[a.name].radius.tr&&(i.tr=s.e_p[a.name].radius.tr),i.bl>s.e_p[a.name].radius.bl&&(i.bl=s.e_p[a.name].radius.bl),i.br>s.e_p[a.name].radius.br&&(i.br=s.e_p[a.name].radius.br),i.bl>=s.e_p[a.name].height-s.e_p[a.name].radius.tl&&"ghead"===a.name){var o=s.e_p[a.name].height-s.e_p[a.name].width/2;o>s.e_p[a.name].width/2&&(o=s.e_p[a.name].width/2),0>o&&(o=0),i.bl=o,i.br=o}s.e_p[a.name].current_radius=i;for(var n=0;n<s.e_p[a.name].contrainst.width.length;n++){var c=(s[s.e_p[a.name].contrainst.width[n]],s.e_p[a.name].contrainst.width[n]);i.br>s.e_p[c].radius.br&&(i.br=s.e_p[c].radius.br),i.bl>s.e_p[c].radius.bl&&(i.bl=s.e_p[c].radius.bl),s.e_p[c].width=s.e_p[a.name].width,"none"!==s.e_p[c].radius&&(s.e_p[c].current_radius=i)}for(var n=0;n<s.e_p[a.name].contrainst.height.length;n++){var c=(s[s.e_p[a.name].contrainst.height[n]],s.e_p[a.name].contrainst.height[n]);i.br>s.e_p[c].radius.br&&(i.br=s.e_p[c].radius.br),i.bl>s.e_p[c].radius.bl&&(i.bl=s.e_p[c].radius.bl),s.e_p[c].height=s.e_p[a.name].height,"none"!==s.e_p[c].radius&&(s.e_p[c].current_radius=i)}},character.prototype.export_svg=function(){function l(){var e=new XMLSerializer,a=e.serializeToString(t.svg),s=JSON.parse(window.localStorage.getItem("containers"));s[app._page_request.id].path="data:image/svg+xml,\n"+encodeURIComponent(a),window.localStorage.setItem("containers",JSON.stringify(s)),app._router.navigate("page/free/",{trigger:!0,replace:!1})}var e=this;this.draw_cotent=new createjs.Container,this.stage.addChild(this.draw_cotent),this.draw_cotent.addChild(head);var t=new SVGExporter(this.draw_cotent,!1,!1,!1);(new Date).getTime();t.run(),$("#svg_container").append('<div id="svg" style="width:'+e.width+"px; height:"+e.height+'px;"></div>'),$("#svg").append(t.svg);var s=document.getElementById("container"),i=s.getBBox(),o={x:i.x,y:i.y,w:i.width,h:i.height},r=($("#container").attr("transform","translate(0 0)"),document.getElementById("svg")),c='<svg xmlns:xlink="http://www.w3.org/1999/xlink" width="'+o.width+'" height="'+o.height+'">';c+=r.innerHtml,c+="</svg>",$("#svg").html(c),setTimeout(l,1)},character.prototype.start_gif=function(){var e=this;gif_creator.start(e.params.canvas);var t=document.getElementById(e.params.canvas);t.getContext("2d");createjs.Ticker.setFPS(20),e.gif_images=[],e.gif_Interval=setInterval(function(){e.gif_images.push(t.toDataURL())},100)},character.prototype.end_gif=function(e,t){console.log("end_gif");var a=this;stickers_helper.file_exist(a.params.datas.name+"_"+e+".gif",function(s){s?t({file_url:"pictures/"+a.params.datas.name+"_"+e+".gif"}):setTimeout(function(){clearInterval(a.gif_Interval),gifshot_creator.generate(a.gif_images,function(s){stickers_helper.save_file(s,a.params.datas.name+"_"+e,t),createjs.Ticker.setFPS(120),a.gif_images=[]})},500)})},character.prototype.positions=function(e,t){for(var a=0;a<_.keys(t.rotation).length;a++)TweenLite.to(e[_.keys(t.rotation)[a]],.3,{rotation:t.rotation[_.keys(t.rotation)[a]]})},character.prototype.motions=function(){},character.prototype.kiss=function(){this.timeline=new createjs.Timeline;var e=createjs;this.timeline.addTween(e.Tween.get({}).to({state:[{t:this.body},{t:this.head,p:{rotation:0,y:234,x:448.5}},{t:this.armRight,p:{rotation:0,y:258,x:511,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:0,x:518,y:346}},{t:this.armLeft,p:{rotation:0,x:377,y:266}},{t:this.farmLeft,p:{rotation:0,x:377,y:346}},{t:this.legLeft,p:{rotation:0,x:410.5,y:362,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:0,x:411,y:458}},{t:this.legRight,p:{rotation:0,x:482.5,y:362,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:0,x:483,y:458}}]}).to({state:[{t:this.body},{t:this.head,p:{rotation:-1,y:233.9,x:448.5}},{t:this.armRight,p:{rotation:-4.5,y:257.5,x:511,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-4.5,x:524.9,y:344.7}},{t:this.armLeft,p:{rotation:4.8,x:376.9,y:266}},{t:this.farmLeft,p:{rotation:7.7,x:370.2,y:345.7}},{t:this.legLeft,p:{rotation:2.3,x:409.8,y:361.8,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:.3,x:406.5,y:457.7}},{t:this.legRight,p:{rotation:-1.3,x:482.7,y:361.9,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-6,x:485.4,y:457.9}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-2,y:233.9,x:448.5}},{t:this.armRight,p:{rotation:-9.1,y:257.1,x:511,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-9.1,x:531.8,y:342.9}},{t:this.armLeft,p:{rotation:9.6,x:376.9,y:265.9}},{t:this.farmLeft,p:{rotation:15.4,x:363.5,y:344.8}},{t:this.legLeft,p:{rotation:4.5,x:409.1,y:361.5,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:.6,x:402.1,y:457.3}},{t:this.legRight,p:{rotation:-2.7,x:482.8,y:361.7,regY:-16.1,regX:-.5}},{t:this.flegRight,p:{rotation:-12,x:487.8,y:457.7}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-3,y:233.9,x:448.4}},{t:this.armRight,p:{rotation:-13.6,y:256.6,x:511.1,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-13.6,x:538.6,y:340.5}},{t:this.armLeft,p:{rotation:14.4,x:376.9,y:265.9}},{t:this.farmLeft,p:{rotation:23.1,x:357,y:343.4}},{t:this.legLeft,p:{rotation:6.8,x:408.4,y:361.3,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:.9,x:397.6,y:456.7}},{t:this.legRight,p:{rotation:-4,x:483,y:361.8,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-18,x:490.2,y:457.5}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-3.9,y:233.9,x:448.4}},{t:this.armRight,p:{rotation:-18.1,y:256.1,x:511.2,regX:-6.9,regY:-8}},{t:this.farmRight,p:{rotation:-18.1,x:545.2,y:337.6}},{t:this.armLeft,p:{rotation:19.3,x:376.9,y:265.9}},{t:this.farmLeft,p:{rotation:30.8,x:350.5,y:341.4}},{t:this.legLeft,p:{rotation:9,x:407.7,y:361,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:1.1,x:393.2,y:456}},{t:this.legRight,p:{rotation:-5.3,x:483.2,y:361.7,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-23.9,x:492.6,y:457.3}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-4.9,y:233.9,x:448.4}},{t:this.armRight,p:{rotation:-22.6,y:255.7,x:511.2,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-22.6,x:551.5,y:334.2}},{t:this.armLeft,p:{rotation:24.1,x:376.9,y:265.9}},{t:this.farmLeft,p:{rotation:38.5,x:344.3,y:338.9}},{t:this.legLeft,p:{rotation:11.3,x:407,y:360.8,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:1.4,x:388.8,y:455.1}},{t:this.legRight,p:{rotation:-6.7,x:483.4,y:361.6,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-29.9,x:495,y:456.9}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-5.9,y:234,x:448.3}},{t:this.armRight,p:{rotation:-27.2,y:255.3,x:511.2,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-27.2,x:557.6,y:330.4}},{t:this.armLeft,p:{rotation:28.9,x:376.9,y:265.8}},{t:this.farmLeft,p:{rotation:46.2,x:338.2,y:335.9}},{t:this.legLeft,p:{rotation:13.5,x:406.3,y:360.6,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:1.7,x:384.3,y:454}},{t:this.legRight,p:{rotation:-8,x:483.6,y:361.6,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-35.9,x:497.4,y:456.6}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-6.9,y:233.9,x:448.3}},{t:this.armRight,p:{rotation:-31.7,y:254.9,x:511.3,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-31.7,x:563.5,y:326}},{t:this.armLeft,p:{rotation:33.7,x:376.9,y:265.8}},{t:this.farmLeft,p:{rotation:53.9,x:332.5,y:332.3}},{t:this.legLeft,p:{rotation:15.8,x:405.5,y:360.3,regX:-.6,regY:-16}},{t:this.flegLeft,p:{rotation:2,x:380,y:452.8}},{t:this.legRight,p:{rotation:-9.3,x:483.7,y:361.5,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-41.9,x:499.8,y:456.2}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-7.9,y:233.9,x:448.3}},{t:this.armRight,p:{rotation:-36.2,y:254.4,x:511.3,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-36.2,x:568.9,y:321.2}},{t:this.armLeft,p:{rotation:38.5,x:376.9,y:265.8}},{t:this.farmLeft,p:{rotation:61.6,x:327.1,y:328.3}},{t:this.legLeft,p:{rotation:18,x:404.9,y:360.1,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:2.3,x:375.7,y:451.5}},{t:this.legRight,p:{rotation:-10.6,x:483.9,y:361.5,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-47.9,x:502.2,y:455.7}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-8.9,y:233.9,x:448.3}},{t:this.armRight,p:{rotation:-40.8,y:254,x:511.4,regX:-7,regY:-7.9}},{t:this.farmRight,p:{rotation:-40.8,x:574.1,y:316}},{t:this.armLeft,p:{rotation:43.4,x:376.9,y:265.7}},{t:this.farmLeft,p:{rotation:69.3,x:322,y:323.9}},{t:this.legLeft,p:{rotation:20.3,x:404.3,y:359.8,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:2.6,x:371.5,y:450}},{t:this.legRight,p:{rotation:-12,x:484.1,y:361.4,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-53.9,x:504.5,y:455.2}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-9.9,y:233.9,x:448.3}},{t:this.armRight,p:{rotation:-45.3,y:253.5,x:511.3,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-45.3,x:578.8,y:310.4}},{t:this.armLeft,p:{rotation:48.2,x:376.9,y:265.7}},{t:this.farmLeft,p:{rotation:77,x:317.3,y:319}},{t:this.legLeft,p:{rotation:22.6,x:403.6,y:359.4,regX:-.5,regY:-16.1}},{t:this.flegLeft,p:{rotation:2.9,x:367.3,y:448.4}},{t:this.legRight,p:{rotation:-13.3,x:484.2,y:361.4,regY:-16,regX:-.6}},{t:this.flegRight,p:{rotation:-59.9,x:506.9,y:454.7}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-10.9,y:233.9,x:448.2}},{t:this.armRight,p:{rotation:-49.8,y:253,x:511.4,regX:-6.9,regY:-8}},{t:this.farmRight,p:{rotation:-49.8,x:583.1,y:304.5}},{t:this.armLeft,p:{rotation:53,x:376.9,y:265.7}},{t:this.farmLeft,p:{rotation:84.7,x:313,y:313.8}},{t:this.legLeft,p:{rotation:24.8,x:402.9,y:359.3,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:3.2,x:363.1,y:446.6}},{t:this.legRight,p:{rotation:-14.6,x:484.5,y:361.3,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-65.9,x:509.2,y:454}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-11.9,y:233.9,x:448.2}},{t:this.armRight,p:{rotation:-54.4,y:252.7,x:511.3,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-54.4,x:586.9,y:298.2}},{t:this.armLeft,p:{rotation:57.8,x:376.9,y:265.6}},{t:this.farmLeft,p:{rotation:92.4,x:309.2,y:308.3}},{t:this.legLeft,p:{rotation:27.1,x:402.3,y:358.9,regX:-.5,regY:-16.1}},{t:this.flegLeft,p:{rotation:3.4,x:359,y:444.7}},{t:this.legRight,p:{rotation:-16,x:484.6,y:361.2,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-71.8,x:511.6,y:453.4}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-12.8,y:233.9,x:448.2}},{t:this.armRight,p:{rotation:-58.9,y:252.1,x:511.4,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-58.9,x:590.3,y:291.6}},{t:this.armLeft,p:{rotation:62.6,x:376.9,y:265.6}},{t:this.farmLeft,p:{rotation:100.1,x:305.8,y:302.4}},{t:this.legLeft,p:{rotation:29.3,x:401.6,y:358.7,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:3.7,x:355,y:442.6}},{t:this.legRight,p:{rotation:-17.3,x:484.7,y:361.1,regY:-16.1,regX:-.5}},{t:this.flegRight,p:{rotation:-77.8,x:513.9,y:452.7}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-13.8,y:233.9,x:448.2}},{t:this.armRight,p:{rotation:-63.4,y:251.7,x:511.4,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-63.4,x:593.2,y:284.8}},{t:this.armLeft,p:{rotation:67.4,x:376.9,y:265.6}},{t:this.farmLeft,p:{rotation:107.8,x:303,y:296.2}},{t:this.legLeft,p:{rotation:31.6,x:400.9,y:358.4,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:4,x:351,y:440.5}},{t:this.legRight,p:{rotation:-18.6,x:485.1,y:361.1,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-83.8,x:516.1,y:451.9}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-14.8,y:233.9,x:448.2}},{t:this.armRight,p:{rotation:-67.9,y:251.3,x:511.4,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-67.9,x:595.6,y:277.8}},{t:this.armLeft,p:{rotation:72.3,x:376.9,y:265.6}},{t:this.farmLeft,p:{rotation:115.5,x:300.7,y:289.9}},{t:this.legLeft,p:{rotation:33.8,x:400.3,y:358.1,regX:-.5,regY:-16.1}},{t:this.flegLeft,p:{rotation:4.3,x:347.2,y:438.2}},{t:this.legRight,p:{rotation:-20,x:485.2,y:361,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-89.8,x:518.4,y:451.1}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-15.8,y:233.9,x:448.1}},{t:this.armRight,p:{rotation:-72.5,y:250.8,x:511.3,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-72.5,x:597.4,y:270.6}},{t:this.armLeft,p:{rotation:77.1,x:376.8,y:265.5}},{t:this.farmLeft,p:{rotation:123.2,x:298.9,y:283.4}},{t:this.legLeft,p:{rotation:36.1,x:399.4,y:357.8,regX:-.6,regY:-16}},{t:this.flegLeft,p:{rotation:4.6,x:343.5,y:435.7}},{t:this.legRight,p:{rotation:-21.3,x:485.4,y:361,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-95.8,x:520.7,y:450.2}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-16.8,y:233.9,x:448.1}},{t:this.armRight,p:{rotation:-77,y:250.2,x:511.4,regX:-6.9,regY:-8}},{t:this.farmRight,p:{rotation:-77,x:598.7,y:263.3}},{t:this.armLeft,p:{rotation:81.9,x:376.8,y:265.5}},{t:this.farmLeft,p:{rotation:130.9,x:297.6,y:276.7}},{t:this.legLeft,p:{rotation:38.3,x:398.9,y:357.6,regX:-.5,regY:-16}},{t:this.flegLeft,p:{rotation:4.9,x:339.8,y:433.2}},{t:this.legRight,p:{rotation:-22.6,x:485.6,y:360.9,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-101.8,x:522.9,y:449.3}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-17.8,y:233.9,x:448.1}},{t:this.armRight,p:{rotation:-81.5,y:249.9,x:511.5,regX:-7,regY:-7.9}},{t:this.farmRight,p:{rotation:-81.5,x:599.5,y:255.9}},{t:this.armLeft,p:{rotation:86.7,x:376.8,y:265.5}},{t:this.farmLeft,p:{rotation:138.6,x:297,y:270}},{t:this.legLeft,p:{rotation:40.6,x:398.1,y:357.2,regX:-.6,regY:-16}},{t:this.flegLeft,p:{rotation:5.2,x:336.2,y:430.5}},{t:this.legRight,p:{rotation:-24,x:485.7,y:360.9,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-107.8,x:525.2,y:448.4}}]},1).to({state:[{t:this.body},{t:this.head,p:{rotation:-18.8,y:233.9,x:448.1}},{t:this.armRight,p:{rotation:-86.1,y:249.5,x:511.4,regX:-7,regY:-8}},{t:this.farmRight,p:{rotation:-86.1,x:599.7,y:248.5}},{t:this.armLeft,p:{rotation:91.5,x:376.8,y:265.4}},{t:this.farmLeft,p:{rotation:146.3,x:296.9,y:263.3}},{t:this.legLeft,p:{rotation:42.9,x:397.6,y:356.9,regX:-.5,regY:-16.1}},{t:this.flegLeft,p:{rotation:5.5,x:332.7,y:427.7}},{t:this.legRight,p:{rotation:-25.3,x:485.9,y:360.8,regY:-16,regX:-.5}},{t:this.flegRight,p:{rotation:-113.8,x:527.4,y:447.4}}]},1).wait(1))},character.prototype.motions.headlo=function(e,t,a){TweenLite.to(e.head,.2,{rotation:-20,ease:Elastic.easeInOut,yoyo:!0,repeat:5,onComplete:function(){e.motions.stand(e)}})},character.prototype.motions.robot=function(e,t,a){e.motions.stand(e),t&&e.start_gif(),e.accessories_assets.motions.gotoAndStop(0),app.play_sound("robot"),TweenMax.to(e.armLeft,1,{rotation:90,ease:Elastic.easeOut}),TweenMax.to(e.farmLeft,1,{rotation:90,delay:1,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(e.farmLeft,1,{rotation:-90,delay:1,ease:Elastic.easeOut})}}),TweenMax.to(e.head,1,{rotation:20,delay:1,ease:Elastic.easeOut}),TweenMax.to(e.armRight,1,{rotation:-90,ease:Elastic.easeOut}),TweenMax.to(e.farmRight,1,{rotation:90,delay:1,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(e.farmRight,1,{rotation:-90,delay:1,ease:Elastic.easeOut}),TweenMax.to(e.head,1,{rotation:-20,delay:1,ease:Elastic.easeOut})}}),TweenMax.to(e.legRight,1,{rotation:-90,ease:Elastic.easeOut}),TweenMax.to(e.flegRight,1,{rotation:90,ease:Elastic.easeOut,onComplete:function(){}}),TweenMax.to(e.legRight,1,{rotation:0,delay:.9,ease:Elastic.easeOut}),TweenMax.to(e.flegRight,1,{rotation:0,delay:.9,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(e.legLeft,1,{rotation:90,ease:Elastic.easeOut}),TweenMax.to(e.flegLeft,1,{rotation:-90,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(e.legLeft,1,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(e.flegLeft,1,{rotation:0,ease:Elastic.easeOut,onComplete:function(){TweenMax.to(e.armLeft,1,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(e.farmLeft,1,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(e.armRight,1,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(e.farmRight,1,{rotation:0,ease:Elastic.easeOut}),TweenMax.to(e.head,1,{rotation:0,ease:Elastic.easeOut}),t&&e.end_gif("robot",a),e.resize()}})}})}})},character.prototype.motions.hello=function(e,t,a){e.motions.stand(e),t&&e.start_gif(),e.face_assets.mouths.gotoAndStop("win"),app.play_sound("hi"),TweenMax.set(e.armRight,{rotation:-135}),TweenMax.to(e.armLeft,.3,{rotation:15}),TweenMax.to(e.head,.3,{rotation:-15}),TweenMax.to(e.farmLeft,.3,{rotation:15}),TweenMax.to(e.farmRight,.2,{rotation:-20,ease:Power4.easeInOut,yoyo:!0,repeat:5,onComplete:function(){TweenMax.to(e.farmRight,.2,{rotation:0})}}),TweenMax.to(e.armRight,.1,{rotation:-150,ease:Power4.easeInOut,yoyo:!0,repeat:5,onComplete:function(){TweenMax.to(e.armRight,.2,{rotation:0}),TweenMax.to(e.armLeft,.3,{rotation:0}),TweenMax.to(e.farmLeft,.3,{rotation:0}),TweenMax.to(e.head,.3,{rotation:0,onComplete:function(){t&&e.end_gif("hello",a),e.resize()}})}})},character.prototype.motions.stand=function(e,t,a){return TweenMax.killAll(),"undefined"==typeof e.armLeft?!1:(TweenLite.set(e.armLeft,{rotation:0}),TweenLite.set(e.farmLeft,{rotation:0}),TweenLite.set(e.armRight,{rotation:0}),TweenLite.set(e.farmRight,{rotation:0}),TweenLite.set(e.legLeft,{rotation:0}),TweenLite.set(e.flegLeft,{rotation:0}),TweenLite.set(e.legRight,{rotation:0}),TweenLite.set(e.flegRight,{rotation:0}),TweenLite.set(e.head,{rotation:0}),TweenLite.set(e.container,{rotation:0}),void e.resize())},character.prototype.motions.jump=function(e,t,a){e.motions.stand(e),TweenLite.to(e.armLeft,.3,{rotation:90}),TweenLite.to(e.farmLeft,.3,{rotation:-90}),TweenLite.to(e.armRight,.3,{rotation:-90}),TweenLite.to(e.farmRight,.3,{rotation:90}),TweenLite.to(e.legLeft,.3,{rotation:90}),TweenLite.to(e.flegLeft,.3,{rotation:-90}),TweenLite.to(e.legRight,.3,{rotation:-90}),TweenLite.to(e.flegRight,.3,{rotation:90}),TweenLite.to(e.container,.5,{y:e.container.y+20,onComplete:function(){TweenLite.to(e.container,.2,{y:e.container.y-200}),TweenLite.to(e.armLeft,.3,{rotation:160}),TweenLite.to(e.farmLeft,.3,{rotation:10}),TweenLite.to(e.armRight,.3,{rotation:-160}),TweenLite.to(e.farmRight,.3,{rotation:-10}),TweenLite.to(e.legLeft,.3,{rotation:20}),TweenLite.to(e.flegLeft,.3,{rotation:0}),TweenLite.to(e.legRight,.3,{rotation:20}),TweenLite.to(e.flegRight,.3,{rotation:0}),TweenLite.to(e.head,.3,{rotation:-10}),TweenLite.to(e.legLeft,.3,{rotation:-20,delay:.3}),TweenLite.to(e.legRight,.3,{rotation:-20,delay:.3}),TweenLite.to(e.flegLeft,.3,{rotation:10,delay:.3}),TweenLite.to(e.flegRight,.3,{rotation:10,delay:.3}),TweenLite.to(e.head,.3,{rotation:-10,delay:.3}),TweenLite.to(e.container,.3,{rotation:-10,delay:.3}),TweenLite.to(e.armLeft,.3,{rotation:150,delay:.3}),TweenLite.to(e.armRight,.3,{rotation:-180,delay:.3}),TweenLite.to(e.container,1,{y:e.container.y-120,onComplete:function(){e.motions.stand(e),e.resize()}})}})},character.prototype.motions.coucou=function(e,t,a){e.motions.stand(e),TweenLite.to(e.armLeft,.3,{rotation:45}),TweenLite.to(e.farmLeft,.3,{rotation:45}),TweenLite.to(e.armRight,.3,{rotation:-45}),TweenLite.to(e.farmRight,.3,{rotation:-45})},character.prototype.motions.love=function(e,t,a){e.motions.stand(e),t&&e.start_gif(),e.accessories_assets.motions.gotoAndStop(0),e.current_target=e.arm_left;e.face_assets.eyes.currentFrame,e.face_assets.mouths.currentFrame;e.face_assets.eyes.gotoAndStop("heart"),e.face_assets.mouths.gotoAndStop("heart"),e.faces_container.cache(0,0,800,800),app.play_sound("kiss");var o=e.container.y;TweenMax.to(e.head,.3,{rotation:-10}),TweenMax.to(e.container,.3,{y:o+10}),TweenMax.to(e.armLeft,.3,{rotation:90}),TweenMax.to(e.farmLeft,.3,{rotation:90}),TweenMax.to(e.armRight,.3,{rotation:-90}),TweenMax.to(e.farmRight,.3,{rotation:-90}),TweenMax.to(e.legRight,.3,{rotation:-90}),TweenMax.to(e.flegRight,.3,{rotation:90}),TweenMax.to(e.legLeft,.3,{rotation:90}),TweenMax.to(e.flegLeft,.3,{rotation:-90}),setTimeout(function(){e.accessories_assets.motions.gotoAndStop("hearts"),e.face_assets.eyes.gotoAndStop(e.params.datas.containers.faces_container.assets.eyes.status),e.face_assets.mouths.gotoAndStop(e.params.datas.containers.faces_container.assets.mouths.status),e.faces_container.cache(0,0,800,800)},800),TweenMax.to(e.armLeft,2,{rotation:-360,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.farmLeft,.5,{rotation:0,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.armRight,2,{rotation:360,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.farmRight,.5,{rotation:0,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.legLeft,.8,{rotation:40,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.flegLeft,.2,{rotation:0,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.legRight,.8,{rotation:-40,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.flegRight,.2,{rotation:0,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.container,.2,{y:o-20,rotation:15,delay:.5,ease:Power4.easeOut}),TweenMax.to(e.container,.2,{y:o,rotation:0,delay:1.5,ease:Bounce.easeOut}),TweenMax.to(e.head,.2,{rotation:0,delay:1.5,ease:Bounce.easeOut}),TweenMax.to(e.legLeft,.2,{rotation:0,delay:1.5,ease:Bounce.easeOut}),TweenMax.to(e.legRight,.2,{rotation:0,delay:1.5,ease:Bounce.easeOut,onComplete:function(){e.armLeft.rotation=0,e.armRight.rotation=0,e.accessories_assets.motions.gotoAndStop(0),t&&e.end_gif("love",a),e.resize()}})},character.prototype.motions.sleep=function(e,t,a){e.motions.stand(e),t&&e.start_gif(),e.accessories_assets.motions.gotoAndStop(0);e.face_assets.eyes.currentFrame,e.face_assets.mouths.currentFrame;e.face_assets.eyes.gotoAndStop("sleep"),e.face_assets.mouths.gotoAndStop("sleep"),e.faces_container.cache(0,0,800,800),e.current_target=e.arm_left,e.accessories_assets.motions.gotoAndStop("sleep"),app.play_sound("sleep"),TweenMax.to(e.head,.5,{rotation:-30,ease:Elastic.easeOut}),setTimeout(function(){e.face_assets.eyes.gotoAndStop(e.params.datas.containers.faces_container.assets.eyes.status),e.face_assets.mouths.gotoAndStop(e.params.datas.containers.faces_container.assets.mouths.status),e.faces_container.cache(0,0,800,800),TweenMax.to(e.head,.8,{rotation:0,ease:Elastic.easeOut,onComplete:function(){t&&e.end_gif("sleep",a),e.resize()}}),e.accessories_assets.motions.gotoAndStop(0)},3e3)},character.prototype.motions.dance=function(e,t,a){e.motions.stand(e);var s=11;if(t){e.start_gif();var s=3}e.accessories_assets.motions.gotoAndStop(0),TweenMax.set(e.head,{rotation:20}),TweenMax.set(e.armLeft,{rotation:-70}),TweenMax.set(e.armRight,{rotation:-90}),TweenMax.to(e.head,.5,{rotation:-20,yoyo:!0,repeat:s,ease:Back.easeInOut}),TweenMax.to(e.armLeft,.5,{rotation:90,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.armRight,.5,{rotation:70,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.farmLeft,.5,{rotation:90,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.farmRight,.5,{rotation:70,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.legLeft,.5,{rotation:50,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.legRight,.5,{rotation:-50,delay:.5,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.flegLeft,.5,{rotation:-50,yoyo:!0,repeat:s,ease:Circ.easeInOut}),TweenMax.to(e.flegRight,.5,{rotation:50,delay:.5,yoyo:!0,repeat:s,ease:Circ.easeInOut,onComplete:function(){TweenMax.to(e.head,.2,{rotation:0}),TweenMax.to(e.armLeft,.2,{rotation:0}),TweenMax.to(e.armRight,.2,{rotation:0}),TweenMax.to(e.farmLeft,.2,{rotation:0}),TweenMax.to(e.farmRight,.2,{rotation:0,onComplete:function(){t&&e.end_gif("dance",a),e.resize()}})}})},character.prototype.motions.smile=function(e,t,a){e.motions.stand(e),t&&e.start_gif(),e.accessories_assets.motions.gotoAndStop(0),e.current_target=e.arm_left;e.face_assets.eyes.currentFrame,e.face_assets.mouths.currentFrame;e.face_assets.eyes.gotoAndStop("win"),e.face_assets.mouths.gotoAndStop("win"),e.faces_container.cache(0,0,800,800),app.play_sound("smile"),e.accessories_assets.motions.gotoAndStop("smile"),TweenMax.to(e.container,.8,{rotation:-20,ease:Power4.easeOut}),TweenMax.to(e.legLeft,.8,{rotation:20,ease:Power4.easeOut}),TweenMax.to(e.legRight,.8,{rotation:-50,ease:Power4.easeOut}),TweenMax.to(e.head,.8,{rotation:-15,ease:Power4.easeOut}),TweenMax.to(e.armLeft,.8,{rotation:60,ease:Power4.easeOut}),TweenMax.to(e.farmLeft,.8,{rotation:20,ease:Power4.easeIn}),TweenMax.to(e.farmRight,.8,{rotation:-20,ease:Power4.easeIn}),TweenMax.to(e.faces_container,.1,{y:e.faces_container.y+10,yoyo:!0,repeat:11}),TweenMax.to(e.armRight,.8,{rotation:-120,ease:Power4.easeOut,onComplete:function(){e.accessories_assets.motions.gotoAndStop(0),TweenMax.to(e.container,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.legLeft,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.legRight,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.head,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.armLeft,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.farmLeft,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.farmRight,.8,{rotation:0,ease:Power4.easeIn}),TweenMax.to(e.armRight,.8,{rotation:0,ease:Power4.easeIn,onComplete:function(){e.face_assets.eyes.gotoAndStop(e.params.datas.containers.faces_container.assets.eyes.status),e.face_assets.mouths.gotoAndStop(e.params.datas.containers.faces_container.assets.mouths.status),e.faces_container.cache(0,0,800,800),t&&e.end_gif("smile",a),e.resize()}})}})},character.prototype.motions.win=function(e,t,a){e.motions.stand(e);var s=21;t&&(e.start_gif(),s=3);e.face_assets.eyes.currentFrame,e.face_assets.mouths.currentFrame;e.face_assets.eyes.gotoAndStop("win"),e.face_assets.mouths.gotoAndStop("win"),e.faces_container.cache(0,0,800,800),e.accessories_assets.motions.gotoAndStop("win"),app.play_sound("motion_win"),TweenMax.to(e.armLeft,.5,{rotation:120,yoyo:!0,repeat:s,ease:Power4.easeOut}),TweenMax.to(e.armRight,.5,{rotation:-120,yoyo:!0,repeat:s,ease:Power4.easeOut}),TweenMax.to(e.legLeft,.5,{rotation:80,yoyo:!0,repeat:s,ease:Power4.easeOut}),TweenMax.to(e.legRight,.5,{rotation:-80,yoyo:!0,repeat:s,ease:Power4.easeOut}),TweenMax.to(e.container,.5,{y:e.container.y-50,rotation:20*Math.random()-10,yoyo:!0,repeat:s,ease:Power4.easeOut,onComplete:function(){e.face_assets.eyes.gotoAndStop(e.params.datas.containers.faces_container.assets.eyes.status),e.face_assets.mouths.gotoAndStop(e.params.datas.containers.faces_container.assets.mouths.status),e.faces_container.cache(0,0,800,800),e.accessories_assets.motions.gotoAndStop(0),t&&e.end_gif("win",a),e.resize()}})},character.prototype.motions.fail=function(e,t,a){e.motions.stand(e);var s=11;t&&(e.start_gif(),s=3);e.face_assets.eyes.currentFrame,e.face_assets.mouths.currentFrame;e.face_assets.eyes.gotoAndStop("fail"),e.face_assets.mouths.gotoAndStop("fail"),e.accessories_assets.motions.gotoAndStop("fail"),e.faces_container.cache(0,0,800,800),TweenMax.to(e.head,2,{rotation:20*Math.random()-10,yoyo:!0,repeat:s,onComplete:function(){e.face_assets.eyes.gotoAndStop(e.params.datas.containers.faces_container.assets.eyes.status),e.face_assets.mouths.gotoAndStop(e.params.datas.containers.faces_container.assets.mouths.status),e.accessories_assets.motions.gotoAndStop(0),t&&e.end_gif("fail",a),e.resize()}})},character.prototype.define_vars=function(){this.head,this.arms_left,this.forearm_left,this.arms_right,this.forearm_rightn,this.front_leg_left,this.leg_left,this.front_leg_right,this.leg_right,this.body,this.e_p,this.format={width:0,height:0},this.last_redraw=(new Date).getTime(),this.is_move=!1,this.skin_color="#ffdeb8",this.bkcolor="rgba(0,0,0,0)",this.t_color="#FFFFFF",this.b_color="#FFFFFF",this.border_color="rgba(0,0,0,0)",this.none="rgba(0,0,0,0)",this.hair_color="#000000",this.shoes_color="#000000",this.glasses_color="#000000",this.eyes_color="#000000",this.color_changed=!1,this.size={w:this.width,h:this.height},this.print=!1,this.can_redraw=!0,this.mappings={},"undefined"!=typeof app._page_request.type&&(this.type=app._page_request.type),this.positions_list={stand:{icon:"images/character/none.png",infos:{rotation:{head:0,body:0,armLeft:0,farmLeft:0,armRight:0,farmRight:0,legLeft:0,flegLeft:0,legRight:0,flegRight:0},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.66,shoes_assets_2:.66}}},run:{icon:"/images/positions/pos_01.svg",infos:{rotation:{head:"-4.40",body:"0.00",armLeft:"64.74",farmLeft:"-56.46",armRight:"-60.74",farmRight:"-44.96",
legLeft:"12.46",flegLeft:"52.68",legRight:"-47.78",flegRight:"5.74"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},couscous:{icon:"/images/positions/pos_02.svg",infos:{rotation:{head:"-7.68",body:"-1.52",armLeft:"69.06",farmLeft:"20.48",armRight:"-116.34",farmRight:"-17.14",legLeft:"64.24",flegLeft:"42.40",legRight:"0.16",flegRight:"0.96"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},star:{icon:"/images/positions/pos_03.svg",infos:{rotation:{head:"1.14",body:"-1.52",armLeft:"89.76",farmLeft:"2.82",armRight:"-88.78",farmRight:"-1.10",legLeft:"40.44",flegLeft:"-1.76",legRight:"-42.16",flegRight:"0.96"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},happy:{icon:"/images/positions/pos_04.svg",infos:{rotation:{head:"10.06",body:"8.44",armLeft:"116.12",farmLeft:"31.06",armRight:"-77.84",farmRight:"-55.56",legLeft:"40.44",flegLeft:"-85.92",legRight:"-42.16",flegRight:"90.00"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},breakdance:{icon:"/images/positions/pos_05.svg",infos:{rotation:{head:"-16.64",body:"100.20",armLeft:"83.96",farmLeft:"-36.38",armRight:"-101.92",farmRight:"0.14",legLeft:"76.70",flegLeft:"50.92",legRight:"3.72",flegRight:"53.42"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},superman:{icon:"/images/positions/pos_06.svg",infos:{rotation:{head:"6.04",body:"9.32",armLeft:"109.40",farmLeft:"17.02",armRight:"-88.76",farmRight:"-8.84",legLeft:"10.24",flegLeft:"-22.76",legRight:"-73.20",flegRight:"8.92"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.6,shoes_assets_2:.6}}},pipi:{icon:"/images/positions/pos_07.svg",infos:{rotation:{head:"-2.42",body:"0.42",armLeft:"-9.98",farmLeft:"-8.20",armRight:"18.58",farmRight:"0.14",legLeft:"-5.00",flegLeft:"16.54",legRight:"3.72",flegRight:"-11.70"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},mouthand:{icon:"/images/positions/pos_08.svg",infos:{rotation:{head:"-2.42",body:"0.42",armLeft:"144.98",farmLeft:"90.00",armRight:"-139.32",farmRight:"-90.00",legLeft:"41.38",flegLeft:"-42.58",legRight:"-41.24",flegRight:"39.90"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.86,shoes_assets_2:.86}}},ninja:{icon:"/images/positions/pos_09.svg",infos:{rotation:{head:"9.86",body:"-25.56",armLeft:"105.16",farmLeft:"38.34",armRight:"-75.76",farmRight:"-26.42",legLeft:"1.46",flegLeft:"-51.42",legRight:"-70.52",flegRight:"2.90"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.6,shoes_assets_2:.6}}},tada:{icon:"/images/positions/pos_10.svg",infos:{rotation:{head:"7.60",body:"-21.94",armLeft:"95.60",farmLeft:"32.46",armRight:"-62.08",farmRight:"-4.92",legLeft:"69.20",flegLeft:"-21.58",legRight:"-26.94",flegRight:"-54.44"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.6,shoes_assets_2:.6}}},fresh:{icon:"/images/positions/pos_11.svg",infos:{rotation:{head:"0.80",body:"2.04",armLeft:"97.44",farmLeft:"-57.60",armRight:"-103.22",farmRight:"54.38",legLeft:"82.36",flegLeft:"-57.60",legRight:"-69.16",flegRight:"68.36"},scaleX:{hands_assets_1:.6,hands_assets_2:.6,shoes_assets_1:.6,shoes_assets_2:.6}}}},this.filters={color:["#ffdbac","#f1c27d","#e0ac69","#c68642","#8d5524","#000000","#FFFFFF","#622C9B","#44AD34","#FF831D","#475FC4","#008374","#FFD000","#34CAD2","#E51794","#784217","#0096A7","#DA0037","#7D868C","#db8160","#f298b9","#e05967","#e0886d","#ea807e","#19b71e","#59db9e","#edf99d","#56ff97","#89e884","#7c66ff","#998df4","#68d5f9","#92dee5","#0665cc","#8567bc","#935bcc","#cbb7f4","#9a76e2","#8519b7","#dd5a65","#c64a2b","#f4b4b2","#f7b4c5","#f24153","#ffd7af","#ffd775","#ffd987","#e07033","#dd986c","#eaa788","#eab01e","#fcb35f","#fce2a1","#f7d083","#c69b17","#b25320","#d1801d","#fce3c2","#e28451"],skin_color:["#ffdbac","#f1c27d","#e0ac69","#c68642","#8d5524","#000000"],eyes_color:["#00BFFF","#00C957","#2F4F4F","#3E766D","#5E2605","#668B8B","#e0886d","#000000"],hairs_color:["#000000","#ffdbac","#f1c27d","#e0ac69","#c68642","#8d5524","#ffd7af","#ffd775","#ffd987","#e07033","#dd986c","#eaa788","#eab01e","#fcb35f","#fce2a1","#f7d083","#E3E3E3","#c69b17","#b25320","#d1801d","#fce3c2","#e28451"],wear_color:["#db8160","#f298b9","#e05967","#e0886d","#ea807e","#19b71e","#59db9e","#edf99d","#56ff97","#89e884","#7c66ff","#998df4","#68d5f9","#92dee5","#0665cc","#8567bc","#935bcc","#cbb7f4","#9a76e2","#8519b7","#dd5a65","#c64a2b","#f4b4b2","#f7b4c5","#f24153","#ffd7af","#ffd775","#ffd987","#e07033","#dd986c","#eaa788","#eab01e","#fcb35f","#fce2a1","#f7d083"],color_older:["#e2bc74","#c8a767","#af925a","#967d4d","#7d6840","#645333","#4b3e26","#322919","#19140c","#000000","#622C9B","#44AD34","#FF831D","#475FC4","#008374","#FFD000","#34CAD2","#E51794","#784217","#0096A7","#DA0037","#7D868C"]},this.bkcolor=this.filters.color[Math.floor(Math.random()*this.filters.color.length)],this.t_color=this.filters.color[Math.floor(Math.random()*this.filters.color.length)],this.b_color=this.filters.color[Math.floor(Math.random()*this.filters.color.length)],this.containers={body:{reg:"top center",contrainst:{scale:[]},rotate:{min:-180,max:180}},head:{parent:"body",reg:"bottom center",contrainst:{scale:[]},rotate:{min:-30,max:30}},backhairs_container:{parent:"head",reg:"bottom center",movieclip:"backhair_assets",movieclipname:"backhair_assets",contrainst:{scale:[]},assets:{backhairs:{status:0}},rotate:{min:-20,max:20}},hairs_container:{parent:"head",reg:"bottom center",movieclip:"hair_assets",movieclipname:"hair_assets",contrainst:{scale:[]},assets:{hairs:{status:0},ears:{status:0}}},faces_container:{parent:"head",reg:"bottom center",movieclip:"face_assets",movieclipname:"face_assets",contrainst:{scale:[]},assets:{eyes:{status:0},noses:{status:0},mouths:{status:0},glasses:{status:0},eyebrow:{status:0},mustach:{status:0}}},accessories_container:{parent:"head",reg:"bottom center",movieclip:"accessories_assets",movieclipname:"accessories_assets",contrainst:{scale:[]},assets:{hats:{status:0}}},legLeft:{parent:"body",reg:"top top center",contrainst:{scale:["legRight"]},rotate:{min:-5,max:90}},flegLeft:{parent:"legLeft",reg:"top center",contrainst:{scale:["legRight"]},rotate:{min:-90,max:90}},shoes_01:{parent:"flegLeft",reg:"top center",movieclip:"shoes_assets",movieclipname:"shoes_assets_1",contrainst:{scale:[]},assets:{shoes:{status:0}},rotate:{min:-90,max:0}},legRight:{parent:"body",reg:"top top center",contrainst:{scale:["legLeft"]},rotate:{min:-90,max:5}},flegRight:{parent:"legRight",reg:"top center",contrainst:{scale:["legLeft"]},rotate:{min:-90,max:90}},shoes_02:{parent:"flegRight",reg:"top center",movieclip:"shoes_assets",movieclipname:"shoes_assets_2",contrainst:{scale:[]},assets:{shoes:{status:0}}},tops_container:{parent:"body",reg:"center center",movieclip:"tops_assets",movieclipname:"tops_assets",contrainst:{scale:[]},assets:{tshirt:{status:0}}},armLeft:{parent:"body",reg:"top center",contrainst:{scale:["armRight"]},rotate:{min:-20,max:170}},farmLeft:{parent:"armLeft",reg:"top center",contrainst:{scale:["armRight"]},rotate:{min:-90,max:90}},hands_01:{parent:"farmLeft",reg:"bottom center",movieclip:"hands_assets",movieclipname:"hands_assets_1",contrainst:{scale:[]},assets:{hand:{status:0}}},armRight:{parent:"body",reg:"top center",contrainst:{scale:["armLeft"]},rotate:{min:-170,max:20}},farmRight:{parent:"armRight",reg:"top center",contrainst:{scale:["armLeft"]},rotate:{min:-90,max:90}},hands_02:{parent:"farmRight",reg:"bottom center",movieclip:"hands_assets",movieclipname:"hands_assets_2",contrainst:{scale:[]},assets:{hand:{status:0}}},barbes_container:{parent:"head",reg:"top center",movieclip:"barbes_assets",movieclipname:"barbes_assets",contrainst:{scale:[]},assets:{barbes:{status:0}},rotate:{min:-20,max:20}}},this.default_elements={ghead:{container:"head",element:"ghead",width:258,height:231,min_width:80,min_height:80,max_width:450,max_height:400,min_scale:.5,max_scale:2,scale:1,radius:{tl:225,tr:225,bl:100,br:100},reg:"bottom center",color:"skin_color",contrainst:{width:[],height:[],min_height:"<width/2"},map_style:"cover",current_radius:{tl:129,tr:129,bl:102,br:102}},farm_left:{container:"farmLeft",element:"farm_left",width:30,height:65,min_width:30,min_height:60,max_width:50,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top center",color:"t_color",current_radius:{tl:15,tr:15,bl:15,br:15},contrainst:{width:["arm_left","farm_right","arm_right"],height:["farm_right","arm_right","arm_left"]},map_style:"cover"},arm_left:{container:"armLeft",element:"arm_left",width:30,height:65,min_width:30,min_height:60,max_width:50,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top center",color:"t_color",contrainst:{width:["arm_right","farm_right","farm_left"],height:["arm_right","farm_right","farm_left"]},map:"hamburger",map_style:"cover",current_radius:{tl:15,tr:15,bl:15,br:15}},farm_right:{container:"farmRight",element:"farm_right",width:30,height:65,min_width:30,min_height:60,max_width:50,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top center",color:"t_color",contrainst:{width:["farm_left","arm_left","arm_right"],height:["farm_left","arm_left","arm_right"]},map_style:"cover",current_radius:{tl:15,tr:15,bl:15,br:15}},arm_right:{container:"armRight",element:"arm_right",width:30,height:65,min_width:30,min_height:60,max_width:50,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top center",color:"t_color",contrainst:{width:["arm_left","farm_left","farm_right"],height:["arm_left","farm_left","farm_right"]},map_style:"cover",current_radius:{tl:15,tr:15,bl:15,br:15}},gbody:{container:"body",element:"gbody",width:69,height:80,min_width:60,min_height:80,max_width:200,max_height:200,min_scale:.5,max_scale:2,scale:1,radius:{tl:40,tr:40,bl:0,br:0},reg:"top top center",color:"t_color",contrainst:{width:[],height:[]},map_style:"cover",current_radius:{tl:34.5,tr:34.5,bl:0,br:0}},neck:{container:"head",element:"neck",width:20,height:10,min_width:15,min_height:10,max_width:100,max_height:200,min_scale:.5,max_scale:2,scale:1,radius:{tl:0,tr:0,bl:7,br:7},reg:"top center",color:"skin_color",contrainst:{width:[],height:[]},map_style:"cover"},fleg_left:{container:"flegLeft",element:"fleg_left",width:30,height:60,min_width:30,min_height:60,max_width:150,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top left",color:"b_color",current_radius:{tl:15,tr:15,bl:15,br:15},contrainst:{width:["fleg_right","leg_left","leg_right"],height:["fleg_right","leg_left","leg_right"],max_width:"gbody.width/2"},map_style:"cover"},leg_left:{container:"legLeft",element:"leg_left",width:30,height:60,min_width:30,min_height:60,max_width:150,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{max:75},reg:"top left",color:"b_color",contrainst:{width:["leg_right","fleg_right","fleg_left"],height:["leg_right","fleg_right","fleg_left"],max_width:"gbody.width/2"},map_style:"cover",current_radius:{tl:15,tr:15,bl:15,br:15}},fleg_right:{container:"flegRight",element:"fleg_right",width:30,height:60,min_width:30,min_height:60,max_width:150,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top right",color:"b_color",contrainst:{width:["fleg_left","leg_left","leg_right"],height:["fleg_left","leg_left","leg_right"],max_width:"gbody.width/2"},map_style:"cover",current_radius:{tl:15,tr:15,bl:15,br:15}},leg_right:{container:"legRight",element:"leg_right",width:30,height:60,min_width:30,min_height:60,max_width:150,max_height:150,min_scale:.5,max_scale:2,scale:1,radius:{tl:75,tr:75,bl:75,br:75},reg:"top right",color:"b_color",contrainst:{width:["leg_left","fleg_left","fleg_right"],height:["leg_left","fleg_left","fleg_right"],max_width:"gbody.width/2"},map_style:"cover",current_radius:{tl:15,tr:15,bl:15,br:15}}},this.navigation_types={skins:{icon:"images/assets/nav/nav_buttons_skin.svg",type:"all",colors:this.filters.color},eyes:{icon:"images/assets/nav/nav_buttons_eyes.svg",type:"all",colors:this.filters.color,maps:{eyes_00:{preview:"images/character/none.png",frame:1,type:"all"},eyes_01:{preview:"images/character/faces/eyes0002.png",frame:2,type:"all"},eyes_02:{preview:"images/character/faces/eyes0003.png",frame:3,type:"all"},eyes_03:{preview:"images/character/faces/eyes0004.png",frame:4,type:"all"},eyes_04:{preview:"images/character/faces/eyes0005.png",frame:5,type:"all"},eyes_05:{preview:"images/character/faces/eyes0006.png",frame:6,type:"all"},eyes_06:{preview:"images/character/faces/eyes0007.png",frame:7,type:"all"},eyes_07:{preview:"images/character/faces/eyes0008.png",frame:8,type:"all"},eyes_08:{preview:"images/character/faces/eyes0009.png",frame:9,type:"all"},eyes_09:{preview:"images/character/faces/eyes0010.png",frame:10,type:"all"},eyes_10:{preview:"images/character/faces/eyes0011.png",frame:11,type:"all"},eyes_11:{preview:"images/character/faces/eyes0012.png",frame:12,type:"1"},eyes_12:{preview:"images/character/faces/eyes0013.png",frame:13,type:"1"},eyes_13:{preview:"images/character/faces/eyes0014.png",frame:14,type:"1"},eyes_14:{preview:"images/character/faces/eyes0015.png",frame:15,type:"1"},eyes_15:{preview:"images/character/faces/eyes0016.png",frame:16,type:"1"},eyes_16:{preview:"images/character/faces/eyes0017.png",frame:17,type:"1"},eyes_17:{preview:"images/character/faces/eyes0018.png",frame:17,type:"1"}}},eyebrow:{icon:"images/assets/nav/nav_buttons_eyebrow.svg",type:"all",maps:{eyebrow_00:{preview:"images/character/none.png",frame:1,type:"all"},eyebrow_01:{preview:"images/character/faces/eyebrow0002.png",frame:2,type:"all"},eyebrow_02:{preview:"images/character/faces/eyebrow0003.png",frame:3,type:"all"},eyebrow_03:{preview:"images/character/faces/eyebrow0004.png",frame:4,type:"all"},eyebrow_04:{preview:"images/character/faces/eyebrow0005.png",frame:5,type:"all"},eyebrow_05:{preview:"images/character/faces/eyebrow0006.png",frame:6,type:"all"},eyebrow_06:{preview:"images/character/faces/eyebrow0007.png",frame:7,type:"all"},eyebrow_07:{preview:"images/character/faces/eyebrow0008.png",frame:8,type:"all"},eyebrow_08:{preview:"images/character/faces/eyebrow0009.png",frame:9,type:"all"},eyebrow_09:{preview:"images/character/faces/eyebrow0010.png",frame:10,type:"all"},eyebrow_10:{preview:"images/character/faces/eyebrow0011.png",frame:11,type:"all"},eyebrow_11:{preview:"images/character/faces/eyebrow0012.png",frame:12,type:"all"},eyebrow_12:{preview:"images/character/faces/eyebrow0013.png",frame:13,type:"all"},eyebrow_13:{preview:"images/character/faces/eyebrow0014.png",frame:14,type:"all"},eyebrow_14:{preview:"images/character/faces/eyebrow0015.png",frame:15,type:"all"}}},noses:{icon:"images/assets/nav/nav_buttons_noses.svg",type:"all",maps:{nose_00:{preview:"images/character/none.png",frame:1,type:"all"},nose_01:{preview:"images/character/faces/noses0002.png",frame:2,type:"all"},nose_02:{preview:"images/character/faces/noses0003.png",frame:3,type:"all"},nose_03:{preview:"images/character/faces/noses0004.png",frame:4,type:"all"},nose_04:{preview:"images/character/faces/noses0005.png",frame:5,type:"all"},nose_05:{preview:"images/character/faces/noses0006.png",frame:6,type:"all"},nose_06:{preview:"images/character/faces/noses0007.png",frame:7,type:"all"},nose_07:{preview:"images/character/faces/noses0008.png",frame:8,type:"all"},nose_08:{preview:"images/character/faces/noses0009.png",frame:9,type:"all"},nose_09:{preview:"images/character/faces/noses0010.png",frame:10,type:"all"},nose_10:{preview:"images/character/faces/noses0011.png",frame:11,type:"all"},nose_11:{preview:"images/character/faces/noses0012.png",frame:12,type:"all"}}},hairs:{icon:"images/assets/nav/nav_buttons_hairs.svg",type:"all",colors:this.filters.color,maps:{hairs_00:{preview:"images/character/none.png",frame:1,type:"all"},hairs_01:{preview:"images/character/hairs/hairs_preview0002.png",frame:2,type:"2"},hairs_02:{preview:"images/character/hairs/hairs_preview0003.png",frame:3,type:"2"},hairs_03:{preview:"images/character/hairs/hairs_preview0004.png",frame:4,type:"2"},hairs_04:{preview:"images/character/hairs/hairs_preview0005.png",frame:5,type:"2"},hairs_05:{preview:"images/character/hairs/hairs_preview0006.png",frame:6,type:"2"},hairs_06:{preview:"images/character/hairs/hairs_preview0007.png",frame:7,type:"2"},hairs_07:{preview:"images/character/hairs/hairs_preview0008.png",frame:8,type:"2"},hairs_08:{preview:"images/character/hairs/hairs_preview0009.png",frame:9,type:"2"},hairs_09:{preview:"images/character/hairs/hairs_preview0010.png",frame:10,type:"2"},hairs_10:{preview:"images/character/hairs/hairs_preview0011.png",frame:11,type:"2"},hairs_11:{preview:"images/character/hairs/hairs_preview0012.png",frame:12,type:"2"},hairs_12:{preview:"images/character/hairs/hairs_preview0013.png",frame:13,type:"2"},hairs_13:{preview:"images/character/hairs/hairs_preview0014.png",frame:14,type:"2"},hairs_14:{preview:"images/character/hairs/hairs_preview0015.png",frame:15,type:"1"},hairs_15:{preview:"images/character/hairs/hairs_preview0016.png",frame:16,type:"1"},hairs_16:{preview:"images/character/hairs/hairs_preview0017.png",frame:17,type:"1"},hairs_17:{preview:"images/character/hairs/hairs_preview0018.png",frame:18,type:"1"},hairs_18:{preview:"images/character/hairs/hairs_preview0019.png",frame:19,type:"1"},hairs_19:{preview:"images/character/hairs/hairs_preview0020.png",frame:20,type:"1"},hairs_20:{preview:"images/character/hairs/hairs_preview0021.png",frame:21,type:"1"},hairs_21:{preview:"images/character/hairs/hairs_preview0022.png",frame:22,type:"1"},hairs_22:{preview:"images/character/hairs/hairs_preview0023.png",frame:23,type:"1"},hairs_23:{preview:"images/character/hairs/hairs_preview0024.png",frame:24,type:"1"},hairs_24:{preview:"images/character/hairs/hairs_preview0025.png",frame:25,type:"all"},hairs_25:{preview:"images/character/hairs/hairs_preview0026.png",frame:26,type:"all"},hairs_26:{preview:"images/character/hairs/hairs_preview0027.png",frame:27,type:"all"},hairs_27:{preview:"images/character/hairs/hairs_preview0028.png",frame:28,type:"all"},hairs_28:{preview:"images/character/hairs/hairs_preview0029.png",frame:29,type:"all"},hairs_29:{preview:"images/character/hairs/hairs_preview0030.png",frame:30,type:"all"}}},mouths:{icon:"images/assets/nav/nav_buttons_mouths.svg",type:"all",maps:{mouth_00:{preview:"images/character/none.png",frame:1,type:"all"},mouth_01:{preview:"images/character/faces/mouths0002.png",frame:2,type:"all"},mouth_02:{preview:"images/character/faces/mouths0003.png",frame:3,type:"all"},mouth_03:{preview:"images/character/faces/mouths0004.png",frame:4,type:"all"},mouth_04:{preview:"images/character/faces/mouths0005.png",frame:5,type:"all"},mouth_05:{preview:"images/character/faces/mouths0006.png",frame:6,type:"all"},mouth_06:{preview:"images/character/faces/mouths0007.png",frame:7,type:"all"},mouth_07:{preview:"images/character/faces/mouths0008.png",frame:8,type:"all"},mouth_08:{preview:"images/character/faces/mouths0009.png",frame:9,type:"all"},mouth_09:{preview:"images/character/faces/mouths0010.png",frame:10,type:"all"},mouth_10:{preview:"images/character/faces/mouths0011.png",frame:11,type:"all"},mouth_11:{preview:"images/character/faces/mouths0012.png",frame:12,type:"all"},mouth_12:{preview:"images/character/faces/mouths0013.png",frame:13,type:"all"},mouth_13:{preview:"images/character/faces/mouths0014.png",frame:14,type:"all"},mouth_14:{preview:"images/character/faces/mouths0015.png",frame:14,type:"all"},mouth_15:{preview:"images/character/faces/mouths0016.png",frame:14,type:"1"},mouth_16:{preview:"images/character/faces/mouths0017.png",frame:14,type:"1"},mouth_17:{preview:"images/character/faces/mouths0018.png",frame:14,type:"1"},mouth_18:{preview:"images/character/faces/mouths0019.png",frame:14,type:"1"},mouth_19:{preview:"images/character/faces/mouths0020.png",frame:14,type:"1"}}},tops:{icon:"images/assets/nav/nav_buttons_tops.svg",type:"all",colors:this.filters.color,maps:{tops_00:{preview:"images/character/none.png",frame:1,type:"all"},tops_01:{preview:"images/character/tops/tshirt0002.png",frame:2,type:"all"},tops_02:{preview:"images/character/tops/tshirt0003.png",frame:3,type:"all"},tops_03:{preview:"images/character/tops/tshirt0004.png",frame:4,type:"all"},tops_04:{preview:"images/character/tops/tshirt0005.png",frame:5,type:"all"},tops_05:{preview:"images/character/tops/tshirt0006.png",frame:6,type:"all"},tops_06:{preview:"images/character/tops/tshirt0007.png",frame:7,type:"all"},tops_07:{preview:"images/character/tops/tshirt0008.png",frame:8,type:"all"},tops_08:{preview:"images/character/tops/tshirt0009.png",frame:9,type:"all"},tops_09:{preview:"images/character/tops/tshirt0010.png",frame:10,type:"all"},tops_10:{preview:"images/character/tops/tshirt0011.png",frame:11,type:"all"},tops_11:{preview:"images/character/tops/tshirt0012.png",frame:12,type:"all"}}},bottoms:{icon:"images/assets/nav/nav_buttons_bottoms.svg",type:"all",colors:this.filters.color},glasses:{icon:"images/assets/nav/nav_buttons_glasses.svg",type:"all",colors:this.filters.color,maps:{glasses_00:{preview:"images/character/none.png",frame:1,type:"all"},glasses_01:{preview:"images/character/glasses/glasses0002.png",frame:2,type:"all"},glasses_02:{preview:"images/character/glasses/glasses0003.png",frame:3,type:"all"},glasses_03:{preview:"images/character/glasses/glasses0004.png",frame:4,type:"all"},glasses_04:{preview:"images/character/glasses/glasses0005.png",frame:5,type:"all"},glasses_05:{preview:"images/character/glasses/glasses0006.png",frame:6,type:"all"},glasses_06:{preview:"images/character/glasses/glasses0007.png",frame:7,type:"all"},glasses_07:{preview:"images/character/glasses/glasses0008.png",frame:8,type:"all"},glasses_08:{preview:"images/character/glasses/glasses0009.png",frame:9,type:"all"},glasses_09:{preview:"images/character/glasses/glasses0010.png",frame:10,type:"all"},glasses_10:{preview:"images/character/glasses/glasses0011.png",frame:11,type:"all"},glasses_11:{preview:"images/character/glasses/glasses0012.png",frame:12,type:"all"},glasses_12:{preview:"images/character/glasses/glasses0013.png",frame:13,type:"all"},glasses_13:{preview:"images/character/glasses/glasses0014.png",frame:14,type:"all"},glasses_14:{preview:"images/character/glasses/glasses0015.png",frame:15,type:"all"},glasses_15:{preview:"images/character/glasses/glasses0016.png",frame:16,type:"all"}}},shoes:{icon:"images/assets/nav/nav_buttons_foots.svg",type:"all",colors:this.filters.color,maps:{foots_00:{preview:"images/character/none.png",gfoot_left:"none",gfoot_right:"none",frame:1,type:"all"},foots_01:{preview:"images/character/shoes/shoes0002.png",gfoot_left:"none",gfoot_right:"none",frame:2,type:"all"},foots_02:{preview:"images/character/shoes/shoes0003.png",gfoot_left:"none",gfoot_right:"none",frame:3,type:"all"},foots_03:{preview:"images/character/shoes/shoes0004.png",gfoot_left:"none",gfoot_right:"none",frame:4,type:"all"},foots_04:{preview:"images/character/shoes/shoes0005.png",gfoot_left:"none",gfoot_right:"none",frame:5,type:"all"},foots_05:{preview:"images/character/shoes/shoes0006.png",gfoot_left:"none",gfoot_right:"none",frame:6,type:"all"},foots_06:{preview:"images/character/shoes/shoes0007.png",gfoot_left:"none",gfoot_right:"none",frame:7,type:"all"},foots_07:{preview:"images/character/shoes/shoes0008.png",gfoot_left:"none",gfoot_right:"none",frame:8,type:"all"},foots_08:{preview:"images/character/shoes/shoes0009.png",gfoot_left:"none",gfoot_right:"none",frame:9,type:"all"},foots_09:{preview:"images/character/shoes/shoes0010.png",gfoot_left:"none",gfoot_right:"none",frame:10,type:"all"},foots_10:{preview:"images/character/shoes/shoes0011.png",gfoot_left:"none",gfoot_right:"none",frame:11,type:"all"},foots_11:{preview:"images/character/shoes/shoes0012.png",gfoot_left:"none",gfoot_right:"none",frame:12,type:"all"}}},mustach:{icon:"images/assets/nav/nav_buttons_mustach.svg",type:"2",maps:{mustach_00:{preview:"images/character/faces/none.png",frame:1,type:"all"},mustach_01:{preview:"images/character/faces/mustach0002.png",frame:2,type:"all"},mustach_02:{preview:"images/character/faces/mustach0003.png",frame:3,type:"all"},mustach_03:{preview:"images/character/faces/mustach0004.png",frame:4,type:"all"},mustach_04:{preview:"images/character/faces/mustach0005.png",frame:5,type:"all"},mustach_05:{preview:"images/character/faces/mustach0006.png",frame:6,type:"all"},mustach_06:{preview:"images/character/faces/mustach0007.png",frame:7,type:"all"},mustach_07:{preview:"images/character/faces/mustach0008.png",frame:8,type:"all"},mustach_08:{preview:"images/character/faces/mustach0009.png",frame:9,type:"all"},mustach_09:{preview:"images/character/faces/mustach0010.png",frame:10,type:"all"},mustach_10:{preview:"images/character/faces/mustach0011.png",frame:11,type:"all"},mustach_11:{preview:"images/character/faces/mustach0012.png",frame:12,type:"all"},mustach_12:{preview:"images/character/faces/mustach0013.png",frame:13,type:"all"},mustach_13:{preview:"images/character/faces/mustach0014.png",frame:14,type:"all"},mustach_14:{preview:"images/character/faces/mustach0015.png",frame:15,type:"all"},mustach_15:{preview:"images/character/faces/mustach0016.png",frame:16,type:"all"},mustach_16:{preview:"images/character/faces/mustach0017.png",frame:17,type:"all"},mustach_17:{preview:"images/character/faces/mustach0018.png",frame:18,type:"all"}}},barbes:{icon:"images/assets/nav/nav_buttons_barbes.svg",type:"2",maps:{mustach_00:{preview:"images/character/none.png",frame:1,type:"all"},mustach_01:{preview:"images/character/faces/barbes0002.png",frame:2,type:"all"},mustach_02:{preview:"images/character/faces/barbes0003.png",frame:3,type:"all"},mustach_03:{preview:"images/character/faces/barbes0004.png",frame:4,type:"all"},mustach_04:{preview:"images/character/faces/barbes0005.png",frame:5,type:"all"},mustach_05:{preview:"images/character/faces/barbes0006.png",frame:6,type:"all"},mustach_06:{preview:"images/character/faces/barbes0007.png",frame:7,type:"all"},mustach_07:{preview:"images/character/faces/barbes0008.png",frame:8,type:"all"},mustach_08:{preview:"images/character/faces/barbes0009.png",frame:9,type:"all"},mustach_09:{preview:"images/character/faces/barbes0010.png",frame:10,type:"all"},mustach_10:{preview:"images/character/faces/barbes0011.png",frame:11,type:"all"},mustach_11:{preview:"images/character/faces/barbes0012.png",frame:12,type:"all"},mustach_12:{preview:"images/character/faces/barbes0013.png",frame:13,type:"all"},mustach_13:{preview:"images/character/faces/barbes0014.png",frame:14,type:"all"},mustach_14:{preview:"images/character/faces/barbes0015.png",frame:15,type:"all"},mustach_15:{preview:"images/character/faces/barbes0016.png",frame:16,type:"all"},mustach_16:{preview:"images/character/faces/barbes0017.png",frame:17,type:"all"},mustach_17:{preview:"images/character/faces/barbes0018.png",frame:18,type:"all"}}},ears:{icon:"images/assets/nav/nav_buttons_ears.svg",type:"all",maps:{ears_00:{preview:"images/character/none.png",frame:1,type:"all"},ears_01:{preview:"images/character/faces/ears0002.png",frame:2,type:"all"},ears_02:{preview:"images/character/faces/ears0003.png",frame:3,type:"all"},ears_03:{preview:"images/character/faces/ears0004.png",frame:4,type:"all"},ears_04:{preview:"images/character/faces/ears0005.png",frame:5,type:"all"},ears_05:{preview:"images/character/faces/ears0006.png",frame:6,type:"all"},ears_06:{preview:"images/character/faces/ears0007.png",frame:7,type:"all"},ears_07:{preview:"images/character/faces/ears0008.png",frame:8,type:"all"}}},bkcolor:{icon:"images/assets/nav/nav_buttons_skin.svg",type:"all",colors:this.filters.color},hats:{icon:"images/assets/nav/nav_buttons_hats.svg",type:"all",maps:{hats_00:{preview:"images/character/faces/hats0001.png",frame:1,type:"all"},hats_01:{preview:"images/character/faces/hats0002.png",frame:2,type:"all"},hats_02:{preview:"images/character/faces/hats0003.png",frame:3,type:"all"},hats_03:{preview:"images/character/faces/hats0004.png",frame:4,type:"all"},hats_04:{preview:"images/character/faces/hats0005.png",frame:5,type:"all"},hats_05:{preview:"images/character/faces/hats0006.png",frame:6,type:"all"},hats_06:{preview:"images/character/faces/hats0007.png",frame:7,type:"all"},hats_07:{preview:"images/character/faces/hats0008.png",frame:8,type:"all"},hats_08:{preview:"images/character/faces/hats0009.png",frame:9,type:"all"},hats_09:{preview:"images/character/faces/hats0010.png",frame:10,type:"all"},hats_10:{preview:"images/character/faces/hats0011.png",frame:11,type:"all"},hats_11:{preview:"images/character/faces/hats0012.png",frame:12,type:"all"},hats_12:{preview:"images/character/faces/hats0013.png",frame:13,type:"all"},hats_13:{preview:"images/character/faces/hats0014.png",frame:14,type:"all"}}}}},character.prototype.save=function(){console.log("------------------------------------ this.type ------------------------- ",this.type);var e={containers:this.containers,type:this.type,e_p:this.e_p,skin_color:this.skin_color,bkcolor:this.bkcolor,t_color:this.t_color,b_color:this.b_color,hair_color:this.hair_color,shoes_color:this.shoes_color,glasses_color:this.glasses_color,border_color:this.border_color,eyes_color:this.eyes_color,positions:this.save_pos()};window.localStorage.setItem("last_character",JSON.stringify(e)),this.skin_color="#FFFFFF",this.b_color="#FFFFFF",this.background.graphics.clear(),this.stage.update(),this.redraw_body(),exporter=new SVGExporter(this.stage,!1,!1,!1);(new Date).getTime();exporter.run();var a=(new XMLSerializer).serializeToString(exporter.svg);window.localStorage.setItem("last_character_svg",a),this.skin_color=e.skin_color,this.b_color=e.b_color,this.redraw_body(),this.stage.update(),this.container.scaleX=this.container.scaleY=.35;var s=document.getElementById(this.params.canvas),i=s.getContext("2d"),n=(i.getImageData(0,0,250,300).data,s.toDataURL("image/png",1));window.localStorage.setItem("last_character_pix",n),this.background.graphics.beginFill(e.bkcolor).drawRect(0,0,25),this.redraw_body(),this.stage.update(),setTimeout(function(){app._router.navigate("page/save",{trigger:!0,replace:!1})},100)},character.prototype.load_last=function(){var e=JSON.parse(window.localStorage.getItem("last_character"));this.set_datas(e)},character.prototype.set_containers=function(){for(var e=0;e<_.keys(this.containers).length;e++){var t=_.keys(this.containers)[e];if("undefined"!=typeof this.containers[t].movieclip)for(var a=0;a<_.keys(this.containers[t].assets).length;a++){var s=_.keys(this.containers[t].assets)[a];if("undefined"!=typeof this.containers[t].assets[s]){this[this.containers[t].movieclipname][s].gotoAndStop(this.containers[t].assets[s].status);for(var i=_.keys(this[this.containers[t].movieclipname][s]),o="hair_color",n=o.toUpperCase(),r=jQuery.grep(i,function(e){return e.toUpperCase().indexOf(n)>=0}),c=0;c<r.length;c++){var l=r[c];"undefined"!=typeof this[this.containers[t].movieclipname][s][l].shape&&(null!==this[this.containers[t].movieclipname][s][l].shape.graphics._fill&&"undefined"!=typeof this[this.containers[t].movieclipname][s][l].shape.graphics._fill.style&&(this[this.containers[t].movieclipname][s][l].shape.graphics._fill.style=this.hair_color),null!==this[this.containers[t].movieclipname][s][l].shape.graphics._stroke&&"undefined"!=typeof this[this.containers[t].movieclipname][s][l].shape.graphics._stroke.style&&(this[this.containers[t].movieclipname][s][l].shape.graphics._stroke.style=this.hair_color))}for(var o="skin",n=o.toUpperCase(),p=jQuery.grep(i,function(e){return e.toUpperCase().indexOf(n)>=0}),c=0;c<p.length;c++){var l=p[c];this[this.containers[t].movieclipname][s][l].shape.graphics._fill.style=this.skin_color}for(var o="shoes_color",n=o.toUpperCase(),h=jQuery.grep(i,function(e){return e.toUpperCase().indexOf(n)>=0}),c=0;c<h.length;c++){var l=h[c];this[this.containers[t].movieclipname][s][l].shape.graphics._fill.style=this.shoes_color;
}for(var o="glasses_color",n=o.toUpperCase(),g=jQuery.grep(i,function(e){return e.toUpperCase().indexOf(n)>=0}),c=0;c<g.length;c++){var l=g[c];this[this.containers[t].movieclipname][s][l].shape.graphics._fill.style=this.glasses_color}for(var o="eyes_color",n=o.toUpperCase(),f=jQuery.grep(i,function(e){return e.toUpperCase().indexOf(n)>=0}),c=0;c<f.length;c++){var l=f[c];"undefined"!=typeof this[this.containers[t].movieclipname][s][l].shape&&(this[this.containers[t].movieclipname][s][l].shape.graphics._fill.style=this.eyes_color)}this[t]}}}this.faces_container.cache(0,0,800,800),this.hairs_container.cache(0,0,800,800),this.backhairs_container.cache(0,0,800,800)},character.prototype.set_datas=function(e){this.containers=e.containers,this.e_p=e.e_p,this.skin_color=e.skin_color,this.t_color=e.t_color,this.b_color=e.b_color,this.hair_color=e.hair_color,this.eyes_color=e.eyes_color,this.border_color=e.border_color,this.type=e.type,"undefined"!=typeof e.bkcolor&&(this.bkcolor=e.bkcolor),this.color_changed=!0,setTimeout($.proxy(function(){this.background.graphics.clear(),this.background.graphics.beginFill(this.bkcolor).drawRect(0,0,window.innerWidth,window.innerHeight),this.current_target=this.gbody,this.color_changed=!0,setTimeout($.proxy(function(){this.color_changed=!0,this.current_target=this.ghead,this.redraw_body(),this.resize(),$("#"+this.params.canvas).css("visibility","visible"),setTimeout($.proxy(function(){!this.params.touch_enabled,this.resize()},this),10)},this),10)},this),10)};
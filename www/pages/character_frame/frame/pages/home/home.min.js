function home_page(){this.game_settings={character_id:0,locale:app.locale,characters:[]}}home_page.prototype.init=function(){var e=this;this.create_eyes(),setTimeout(function(){$("#play_button").css({position:"absolute",top:"0",bottom:"0",margin:"auto",width:$("#play_button").width()+"px"}),e.open_nav()},3e3)},home_page.prototype.open_nav=function(){var e=this;e.exportRoot.eyes.gotoAndPlay("down"),TweenLite.to($(".hero_eyes"),.8,{height:"50%",ease:Power4.easeIn}),TweenLite.to($(".hero_eyes"),.5,{height:"25%",ease:Power4.easeOut,delay:.4}),TweenLite.to($(".hero_mouth"),.5,{height:"25%",ease:Power4.easeOut,delay:.4,onComplete:function(){$("#play_button").off("click").on("click",function(t){app.play_sound("hit"),e.open_play_screen()}),$("#play_next_button").off("click").on("click",function(t){app.play_sound("hit"),e.open_config_screen()}),$("#play_config_button").off("click").on("click",function(t){app.play_sound("hit"),e.open_game_screen()}),$("#create_column").off("click").on("click",function(t){app.play_sound("hit"),e.open_create_nav()}),$("#gallery_column").off("click").on("click",function(t){app.play_sound("hit"),e.open_gallery_nav()})}}),characters_helper.get_user_characters(function(t){if(0===t.length)return $("#gallery_column").css("display","none"),$("#create_column").css("width","100%"),!1;e.characters_datas=t;for(var s=0;4>s;s++)$("#char_0"+(s+1)).css({"background-image":"url("+encodeURI(app.pix_to_uri(t[s].base64,"thumb"))+")"});$("#gallery_button").css("background-color",t[0].parsed_datas.bkcolor),$("#gallery_button .icon img").attr("src",encodeURI(app.pix_to_uri(t[0].base64,"thumb")))},!1)},home_page.prototype.open_create_nav=function(){var e=this;TweenLite.to($(".hero_eyes"),.5,{height:"50%",ease:Power4.easeOut}),this.exportRoot.eyes.gotoAndPlay("left"),TweenLite.to($(".hero_mouth"),.5,{height:"0%",ease:Power4.easeOut,onComplete:function(){$("#gallery_column").css({top:$("#gallery_column").offset().top,left:$("#gallery_column").offset().left,position:"absolute"}),$("#create_column").css({top:$("#create_column").offset().top,left:$("#create_column").offset().left,position:"absolute"}),$(".hero_mouth").css({top:$(".hero_eyes").offset().top,left:$(".hero_eyes").offset().left,position:"absolute"}),$(".hero_eyes").css({top:$(".hero_eyes").position().top,left:$(".hero_eyes").position().left,position:"absolute"}),TweenLite.to($(".hero_eyes"),.7,{delay:.1,rotation:"30deg",left:"150%",top:"-10%",ease:Power4.easeIn}),TweenLite.to($(".hero_mouth"),.7,{delay:.1,rotation:"30deg",left:"150%",ease:Power4.easeIn}),TweenLite.to($("#gallery_column"),.7,{delay:.1,rotation:"-30deg",left:"250%",top:"90%",ease:Power4.easeIn}),TweenLite.to($("#create_column"),.7,{delay:.1,rotation:"-30deg",left:"150%",top:"110%",ease:Power4.easeIn}),TweenLite.set($("#girl_button"),{rotation:"30deg",top:"-30%",left:"-160%"}),TweenLite.set($("#boy_button"),{rotation:"-30deg",top:"90%",left:"-160%"}),TweenLite.to($("#girl_button"),.6,{delay:.6,ease:Power4.easeOut,rotation:0,top:"0%",left:"0%"}),TweenLite.to($("#boy_button"),.6,{delay:.6,ease:Power4.easeOut,rotation:0,top:"50%",left:"0%",onComplete:function(){$("#global_close_button").css("display","block"),$("#global_close_button").off("click").on("click",function(t){_UI.displayTouch($(this)),e.close_create_nav()})}})}})},home_page.prototype.close_create_nav=function(){var e=this;this.exportRoot.eyes.gotoAndStop(1),TweenLite.to($("#girl_button"),.7,{ease:Power4.easeIn,rotation:"30deg",top:"-30%",left:"-160%"}),TweenLite.to($("#boy_button"),.7,{ease:Power4.easeIn,rotation:"-30deg",top:"90%",left:"-160%"}),TweenLite.to($(".hero_eyes"),.7,{delay:.5,rotation:"0deg",left:"0%",top:"0%",ease:Power4.easeOut}),TweenLite.to($(".hero_mouth"),.7,{delay:.5,rotation:"0deg",left:"0%",ease:Power4.easeOut}),TweenLite.to($("#gallery_column"),.7,{delay:.5,rotation:"0deg",left:window.innerWidth/2+"px",top:window.innerHeight/2+"px",ease:Power4.easeOut}),TweenLite.to($("#create_column"),.7,{delay:.5,rotation:"0deg",left:"0%",top:window.innerHeight/2+"px",ease:Power4.easeOut,onComplete:function(){$("#gallery_column").css({left:"0%",top:"0%",position:"relative"}),$("#create_column").css({left:"0%",top:"0%",position:"relative"}),$(".hero_mouth").css({left:"0%",top:"0%",position:"relative"}),$(".hero_eyes").css({left:"0%",top:"0%",position:"relative"}),e.exportRoot.eyes.gotoAndPlay("down"),$("#global_close_button").css("display","none"),TweenLite.to($(".hero_eyes"),.5,{delay:.2,height:"25%",ease:Back.easeOut}),TweenLite.to($(".hero_mouth"),.5,{delay:.2,height:"25%",ease:Back.easeOut})}})},home_page.prototype.open_gallery_nav=function(){var e=this;TweenLite.to($(".hero_eyes"),.5,{height:"50%",ease:Power4.easeOut}),e.exportRoot.eyes.gotoAndPlay("right"),TweenLite.to($(".hero_mouth"),.5,{height:"0%",ease:Power4.easeOut,onComplete:function(){$("#gallery_column").css({top:$("#gallery_column").offset().top,left:$("#gallery_column").offset().left,position:"absolute"}),$("#create_column").css({top:$("#create_column").offset().top,left:$("#create_column").offset().left,position:"absolute"}),$(".hero_mouth").css({top:$(".hero_eyes").offset().top,left:$(".hero_eyes").offset().left,position:"absolute"}),$(".hero_eyes").css({top:$(".hero_eyes").position().top,left:$(".hero_eyes").position().left,position:"absolute"}),TweenLite.to($(".hero_eyes"),.7,{delay:.1,rotation:"30deg",left:"-150%",top:"-10%",ease:Power4.easeIn}),TweenLite.to($(".hero_mouth"),.7,{delay:.1,rotation:"30deg",left:"-150%",ease:Power4.easeIn}),TweenLite.to($("#gallery_column"),.7,{delay:.1,rotation:"-30deg",left:"-150%",top:"90%",ease:Power4.easeIn}),TweenLite.to($("#create_column"),.7,{delay:.1,rotation:"-30deg",left:"-150%",top:"110%",ease:Power4.easeIn}),TweenLite.set($("#gallery_button"),{rotation:"30deg",top:"-30%",left:"260%"}),TweenLite.set($("#world_gallery_button"),{rotation:"-30deg",top:"90%",left:"260%"}),TweenLite.to($("#gallery_button"),.6,{delay:.6,ease:Power4.easeOut,rotation:0,top:"0%",left:"0%"}),TweenLite.to($("#world_gallery_button"),.6,{delay:.6,ease:Power4.easeOut,rotation:0,top:"50%",left:"0%",onComplete:function(){$("#global_close_button").css("display","block"),$("#global_close_button").off("click").on("click",function(t){e.close_gallery_nav()})}})}})},home_page.prototype.close_gallery_nav=function(){var e=this;this.exportRoot.eyes.gotoAndStop(1),TweenLite.to($("#gallery_button"),.7,{ease:Power4.easeIn,rotation:"30deg",top:"-30%",left:"260%"}),TweenLite.to($("#world_gallery_button"),.7,{ease:Power4.easeIn,rotation:"-30deg",top:"90%",left:"260%"}),TweenLite.to($(".hero_eyes"),.7,{delay:.5,rotation:"0deg",left:"0%",top:"0%",ease:Power4.easeOut}),TweenLite.to($(".hero_mouth"),.7,{delay:.5,rotation:"0deg",left:"0%",ease:Power4.easeOut}),TweenLite.to($("#gallery_column"),.7,{delay:.5,rotation:"0deg",left:window.innerWidth/2+"px",top:window.innerHeight/2+"px",ease:Power4.easeOut}),TweenLite.to($("#create_column"),.7,{delay:.5,rotation:"0deg",left:"0%",top:window.innerHeight/2+"px",ease:Power4.easeOut,onComplete:function(){$("#gallery_column").css({left:"0%",top:"0%",position:"relative"}),$("#create_column").css({left:"0%",top:"0%",position:"relative"}),$(".hero_mouth").css({left:"0%",top:"0%",position:"relative"}),$(".hero_eyes").css({left:"0%",top:"0%",position:"relative"}),e.exportRoot.eyes.gotoAndPlay("down"),$("#global_close_button").css("display","none"),TweenLite.to($(".hero_eyes"),.5,{delay:.2,height:"25%",ease:Back.easeOut}),TweenLite.to($(".hero_mouth"),.5,{delay:.2,height:"25%",ease:Back.easeOut})}})},home_page.prototype.open_play_screen=function(){var e=this;$("#global_close_button").css("display","block"),$("#global_close_button").off("click").on("click",function(t){_UI.displayTouch($(this)),e.close_game_screen()}),e.exportRoot.eyes.gotoAndStop(1),TweenLite.to($(".hero_eyes"),.6,{height:"0%",ease:Power4.easeOut}),TweenLite.to($(".hero_mouth"),.6,{height:"100%",ease:Power4.easeOut,onComplete:function(){TweenLite.to($(".play_screen"),.7,{x:-window.innerWidth,ease:Power4.easeOut,onComplete:function(){app.say($("#rules_slider").children().eq(0).find(".description").html().replace(/<br>/g," "),e.game_settings.locale,1.5)}}),e.game_settings.characters.length<16||e.game_settings.characters===[]?characters_helper.get_game_characters(function(t){e.game_settings.characters=app.shuffle(t),e.set_char_choice()},!0):e.set_char_choice()}}),$("[data-locale]").off("click").on("click",function(t){_UI.displayTouch($(this)),$("[data-locale]").removeClass("selected"),$(this).addClass("selected"),app.locale=$(this).attr("data-locale"),console.log("change app.locale ::: ",app.locale),app.trad(),e.game_settings.locale=$(this).attr("data-locale")});var t=0,s=null;this.rules_slider=Draggable.create("#rules_slider",{type:"x",edgeResistance:.5,bounds:"#rules_wrapper",throwProps:!0,snap:{x:function(e){var i=Math.round(e/window.innerWidth)*window.innerWidth;return t=Math.abs(i)/window.innerWidth,$("#rules_dots ul li").removeClass("selected"),$("#rules_dots ul").children().eq(t).addClass("selected"),i}},onDragEnd:function(){console.log("complete"),s=setTimeout(function(){app.say($("#rules_slider").children().eq(t).find(".description").html().replace(/<br>/g," "),e.game_settings.locale,1.5),clearTimeout(s),s=null},500)}})},home_page.prototype.set_char_choice=function(){var e=this;$(".character_slider ul").css("width",window.innerWidth*this.game_settings.characters.length+"px");for(var t=0;t<this.game_settings.characters.length;t++)$(".character_slider ul").append('<li data-id="'+this.game_settings.characters[t].id+'"><div class="avatar" style="background-image:url('+encodeURI(app.pix_to_uri(this.game_settings.characters[t].base64,"thumb"))+')"></div><div class="label">'+this.game_settings.characters[t].label+"</label></li>");var s=0;$(".character_slider ul li").css("width",window.innerWidth+"px"),this.game_settings.character_id=this.game_settings.characters[0].id,this.char_slider=Draggable.create("#character_slider",{type:"x",edgeResistance:.5,bounds:"#character_wrapper",throwProps:!0,snap:{x:function(t){var i=Math.round(t/window.innerWidth)*window.innerWidth;return s=Math.abs(i)/window.innerWidth,e.game_settings.character_id=$(".character_slider ul").children().eq(s).attr("data-id"),$("#character_dots ul li").removeClass("selected"),$("#character_dots ul").children().eq(s).addClass("selected"),i}},onDragEnd:function(){console.log("complete")}})},home_page.prototype.open_config_screen=function(){TweenLite.to($(".play_screen"),.7,{x:2*-window.innerWidth,ease:Power4.easeOut})},home_page.prototype.open_game_screen=function(){window.localStorage.setItem("game_settings",JSON.stringify(this.game_settings)),app.transition="left",app._router.navigate("page/guess_game",{trigger:!0,replace:!1})},home_page.prototype.close_game_screen=function(){var e=this;$("#global_close_button").css("display","none"),TweenLite.to($(".hero_eyes"),.6,{height:"50%",ease:Power4.easeOut}),e.exportRoot.eyes.gotoAndStop(1),TweenLite.to($(".hero_mouth"),.6,{height:"0%",ease:Power4.easeOut,onComplete:function(){TweenLite.to($(".play_screen"),.2,{x:0,ease:Power4.easeOut}),e.exportRoot.eyes.gotoAndPlay("down"),TweenLite.to($(".hero_mouth"),1,{height:"25%",ease:Elastic.easeOut,delay:.4}),TweenLite.to($(".hero_eyes"),1,{height:"25%",ease:Elastic.easeOut,delay:.4})}}),app.play_audio()},home_page.prototype.create_eyes=function(){var e=this;this.canvas=document.getElementById("hero_eyes_canvas"),this.exportRoot=new lib.hero_eyes,this.stage=new createjs.Stage(this.canvas),this.stage.addChild(this.exportRoot),createjs.Ticker.setFPS(lib.properties.fps),createjs.Ticker.addEventListener("tick",this.stage),function(t,s,i,n){function h(){var h=lib.properties.width,A=lib.properties.height,g=window.innerWidth,l=window.innerHeight,c=window.devicePixelRatio,u=g/h,p=l/A,f=1;t&&("width"==s&&a==g||"height"==s&&r==l?f=o:i?1==n?f=Math.min(u,p):2==n&&(f=Math.max(u,p)):(h>g||A>l)&&(f=Math.min(u,p))),e.canvas.width=h*c*f,e.canvas.height=A*c*f,e.canvas.style.width=h*f+"px",e.canvas.style.height=A*f+"px",e.stage.scaleX=c*f,e.stage.scaleY=c*f,a=g,r=l,o=f}var a,r,o=1;window.addEventListener("resize",h),h()}(!1,"both",!1,1)},home_page.prototype.play=function(){},home_page.prototype.pause=function(){},home_page.prototype.update=function(){},home_page.prototype.refresh=function(e){},home_page.prototype.destroy=function(e){$("#global_close_button").off("click").css("display","none"),e()};
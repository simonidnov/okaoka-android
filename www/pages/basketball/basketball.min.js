var $jscomp={scope:{}};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){if(c.get||c.set)throw new TypeError("ES3 does not support getters and setters.");a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.array=$jscomp.array||{};$jscomp.iteratorFromArray=function(a,b){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var c=0,d={next:function(){if(c<a.length){var e=c++;return{value:b(e,a[e]),done:!1}}d.next=function(){return{done:!0,value:void 0}};return d.next()}};d[Symbol.iterator]=function(){return d};return d};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6-impl","es3");var _okg=null;
function basketball(){this.debug=!1;this.player1={points:0,balls:[]};this.player2={points:0,balls:[]};this.touchs={};this.basket_visibility=!0;this.gameInfos={score:{player_1:0,player_2:0},delay:6E4,start:0,status:""};_okg=this}
basketball.prototype.init=function(){$("#ball_zone1").css({top:window.innerHeight-180,left:130});$("#ball_zone2").css({top:window.innerHeight-180,left:window.innerWidth-180});$("#phaser-basketball").css({width:window.innerWidth+"px",height:window.innerHeight+"px"});_okg.game=new Phaser.Game(window.innerWidth,window.innerHeight,Phaser.WEBGL,"phaser-basketball",{preload:_okg.preload,create:_okg.create,update:_okg.update,render:_okg.render})};
basketball.prototype.preload=function(){_okg.game.time.advancedTiming=!0;_okg.game.load.image("mark_points","pages/basketball/images/three_points.png");_okg.game.load.image("basket_maille","pages/basketball/images/basket_maille.png");_okg.game.load.image("basket_maille_collider","pages/basketball/images/basket_maille.png");_okg.game.load.image("basket_v_maille_1","pages/basketball/images/basket_v_maille_1.png");_okg.game.load.image("ball","pages/basketball/images/ball.png");_okg.game.load.image("ball2",
"pages/basketball/images/ball2.png");_okg.game.load.image("basket_ground","pages/basketball/images/backet_ground.png");_okg.game.load.image("basket_arc","pages/basketball/images/basket_arc.png");_okg.game.load.image("basket_center","pages/basketball/images/basket_center.png");_okg.game.load.image("attachment","pages/basketball/images/atachment.png");_okg.game.load.physics("colliders","pages/basketball/images/basket_colliders.json");_okg.game.load.spritesheet("okaoka_dribble","pages/basketball/images/okaoka_basket.png",
75,75);_okg.game.load.image("replay_btn","./images/assets/btn_replay.png");_okg.game.load.image("stats_btn","./images/assets/btn_podium.png");_okg.game.load.image("chronos_icon","pages/dots/assets/chronos_icon_small.png");_okg.game.load.image("player_1","pages/basketball/images/player_1.png");_okg.game.load.image("player_2","pages/basketball/images/player_2.png")};
basketball.prototype.create=function(){_okg.game.time.events.loop(Phaser.Timer.SECOND,_okg.check_basket,this);_okg.game.time.events.loop(2*Phaser.Timer.SECOND,_okg.clean_game,this);_okg.game.stage.backgroundColor=navigation._current_interface_color;_okg.game.physics.startSystem(Phaser.Physics.P2JS);_okg.game.physics.p2.restitution=1;_okg.game.physics.p2.friction=10;_okg.game.physics.p2.gravity.y=1E3;_okg.basket={};_okg.basket.ground=_okg.game.add.sprite(window.innerWidth/2,window.innerHeight/2,"basket_ground");
_okg.balls=_okg.game.add.group();_okg.create_ball(1);utilities.is_touch_screen()?_okg.create_ball(2):$("#ball_zone2").remove();_okg.create_basket2(window.innerWidth/2,window.innerHeight/2);_okg.move_basket2(window.innerWidth/2,window.innerHeight-100);_okg.create_task_bar();_okg.trajectory=_okg.game.add.graphics(0,0);_okg.chronos=_okg.game.add.bitmapData(this.game.width,this.game.height);_okg.chronos.context.fillStyle="rgb(255, 255, 255)";_okg.chronos.context.strokeStyle="rgb(255, 255, 255)";_okg.game.add.image(0,
0,_okg.chronos);_okg.hero_chronos=_okg.game.add.sprite(200,-1E3,"okaoka_dribble");_okg.hero_chronos.scale.set(1);_okg.hero_chronos.smoothed=!0;_okg.hero_chronos.animations.add("walk",[0,1,2,3,4,5,6,7,8,9],20,!0);_okg.hero_chronos.animations.add("pause",[10],1,!1);_okg.hero_chronos.y=window.innerHeight-75-30;_okg.hero_chronos.x=-75;_okg.bitmap=_okg.game.add.bitmapData(this.game.width,this.game.height);_okg.bitmap.context.fillStyle="rgb(255, 255, 255)";_okg.bitmap.context.strokeStyle="rgb(255, 255, 255)";
_okg.game.add.image(0,0,_okg.bitmap);_okg.start_game()};basketball.prototype.start_game=function(){_okg.hide_basket2();_okg.basket_visibility=!1;utilities.show_popup({color:navigation._current_interface_color,motion:"intro_basketball",buttons:["play"]},function(a){_okg.basket_visibility=!0;_okg.display_basket2();utilities.destroy_over_motion();_okg.lets_play()})};
basketball.prototype.lets_play=function(){_okg.move_basket2(window.innerWidth/2,window.innerHeight/2);$("#ball_zone1").css("display","block");$("#ball_zone2").css("display","block");_okg.gameInfos.start=(new Date).getTime();_okg.gameInfos.status="started";_okg.hero_chronos.play("walk");_okg.set_events()};basketball.prototype.move_basket2=function(a,b){TweenMax.to(_okg.basket.attachment.body,3,{x:a,y:b})};basketball.prototype.move_basket=function(a,b){};
basketball.prototype.display_basket2=function(a,b){$.each(_.keys(_okg.basket),function(a,b){_okg.basket[b].alpha=1})};basketball.prototype.hide_basket2=function(a,b){$.each(_.keys(_okg.basket),function(a,b){_okg.basket[b].alpha=0})};
basketball.prototype.create_basket2=function(a,b){_okg.basket.attachment=_okg.game.add.sprite(a+100,b+100,"basket_center");_okg.basket.attach1=_okg.game.add.sprite(a-50,b+50,"attachment");_okg.basket.attach2=_okg.game.add.sprite(a+0,b+50,"attachment");_okg.basket.attach3=_okg.game.add.sprite(a+50,b+50,"attachment");_okg.basket.maille1=_okg.game.add.sprite(a-50,b+55,"basket_maille");_okg.basket.maille2=_okg.game.add.sprite(a-50,b+75,"basket_maille");_okg.basket.maille3=_okg.game.add.sprite(a-50,b+
95,"basket_maille");_okg.basket.maille4=_okg.game.add.sprite(a+0,b+55,"basket_maille");_okg.basket.maille5=_okg.game.add.sprite(a+0,b+75,"basket_maille_collider");_okg.basket.maille6=_okg.game.add.sprite(a+0,b+95,"basket_maille");_okg.basket.maille7=_okg.game.add.sprite(a+50,b+55,"basket_maille");_okg.basket.maille8=_okg.game.add.sprite(a+50,b+75,"basket_maille");_okg.basket.maille9=_okg.game.add.sprite(a+50,b+95,"basket_maille");_okg.basket.arc=_okg.game.add.sprite(a+0,b+0,"basket_arc");$.each(_.keys(_okg.basket),
function(a,b){_okg.game.physics.p2.enable(_okg.basket[b],_okg.debug);_okg.basket[b].body.mass=50});_okg.basket.attachment.body["static"]=!0;_okg.basket.attachment.body.clearCollision(!0,!0);_okg.basket.ground.body.clearCollision(!0,!0);_okg.basket.arc.body.clearShapes();_okg.basket.arc.body.loadPolygon("colliders","basket_arc_collider");_okg.basket.attach1.body.clearCollision(!0,!0);_okg.basket.attach2.body.clearCollision(!0,!0);_okg.basket.attach3.body.clearCollision(!0,!0);_okg.basket.maille4.body.clearCollision(!0,
!0);_okg.basket.maille6.body.clearCollision(!0,!0);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.ground,[0,0],_okg.basket.attachment,[0,0],2E4);_okg.game.physics.p2.createGearConstraint(_okg.basket.ground,_okg.basket.attachment,0,2);_okg.game.physics.p2.createGearConstraint(_okg.basket.ground,_okg.basket.arc,0,2);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.arc,[0,0],_okg.basket.ground,[0,50],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.arc,[0,0],_okg.basket.attachment,
[0,50],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.attach1,[0,0],_okg.basket.arc,[-50,5],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.attach2,[0,0],_okg.basket.arc,[0,5],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.attach3,[0,0],_okg.basket.arc,[50,5],2E4);_okg.basket.maille1.body.mass=50;_okg.basket.maille2.body.mass=50;_okg.basket.maille3.body.mass=50;_okg.basket.maille4.body.mass=10;_okg.basket.maille5.body.mass=.1;_okg.basket.maille6.body.mass=
1;_okg.basket.maille7.body.mass=50;_okg.basket.maille8.body.mass=50;_okg.basket.maille9.body.mass=50;_okg.basket.maille5.body.onBeginContact.add(_okg.basket_collision,this);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille1,[0,-15],_okg.basket.attach1,[0,5],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille2,[0,-15],_okg.basket.maille1,[0,15],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille3,[0,-15],_okg.basket.maille2,[0,15],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille4,
[0,-15],_okg.basket.attach2,[0,5],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille5,[0,-15],_okg.basket.maille4,[0,15],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille6,[0,-15],_okg.basket.maille5,[0,15],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille7,[0,-15],_okg.basket.attach3,[0,5],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille8,[0,-15],_okg.basket.maille7,[0,15],2E4);_okg.game.physics.p2.createRevoluteConstraint(_okg.basket.maille9,
[0,-15],_okg.basket.maille8,[0,15],2E4);_okg.game.physics.p2.createDistanceConstraint(_okg.basket.maille1,_okg.basket.maille4,40);_okg.game.physics.p2.createDistanceConstraint(_okg.basket.maille7,_okg.basket.maille4,40);_okg.game.physics.p2.createDistanceConstraint(_okg.basket.maille2,_okg.basket.maille5,25);_okg.game.physics.p2.createDistanceConstraint(_okg.basket.maille8,_okg.basket.maille5,30);_okg.game.physics.p2.createDistanceConstraint(_okg.basket.maille3,_okg.basket.maille6,25);_okg.game.physics.p2.createDistanceConstraint(_okg.basket.maille9,
_okg.basket.maille6,30);_okg.filet=_okg.game.add.bitmapData(window.innerWidth,window.innerHeight);_okg.filet.ctx.beginPath();_okg.filet.ctx.lineWidth="6";_okg.filet.ctx.strokeStyle="#FFFFFF";_okg.filet.ctx.stroke();_okg.sprite=_okg.game.add.sprite(0,0,_okg.filet)};
basketball.prototype.destroy_basket=function(){_okg.basket.attachment.destroy();_okg.basket.ground.destroy();_okg.basket.attach1.destroy();_okg.basket.attach2.destroy();_okg.basket.attach3.destroy();_okg.basket.maille1.destroy();_okg.basket.maille2.destroy();_okg.basket.maille3.destroy();_okg.basket.maille4.destroy();_okg.basket.maille5.destroy();_okg.basket.maille6.destroy();_okg.basket.maille7.destroy();_okg.basket.maille8.destroy();_okg.basket.maille9.destroy();_okg.basket.arc.destroy()};
basketball.prototype.destroy_balls=function(){$.each(_okg.player1.balls,function(a,b){b&&b.destroy()});$.each(_okg.player2.balls,function(a,b){b&&b.destroy()})};
basketball.prototype.redraw_filet=function(){_okg.filet.clear();_okg.basket_visibility&&(_okg.filet.ctx.beginPath(),_okg.filet.ctx.moveTo(_okg.basket.attach1.position.x,_okg.basket.attach1.position.y),_okg.filet.ctx.lineTo(_okg.basket.maille1.position.x,_okg.basket.maille1.position.y),_okg.filet.ctx.moveTo(_okg.basket.maille9.position.x,_okg.basket.maille9.position.y),_okg.filet.ctx.lineTo(_okg.basket.maille9.position.x,_okg.basket.maille9.position.y+10),_okg.filet.ctx.lineWidth=6,_okg.filet.ctx.stroke(),
_okg.filet.ctx.closePath())};basketball.prototype.get_velocity=function(a,b){return{x:5*(a.x-b.position.x),y:5*(a.y-b.position.y)}};
basketball.prototype.redraw_chronos=function(){if("started"===_okg.gameInfos.status){_okg.chronos.context.clearRect(0,0,window.innerWidth,window.innerHeight);var a=(new Date).getTime()-_okg.gameInfos.start,a=_okg.gameInfos.delay-a;_okg.chronos_text.text=Math.ceil(a/1E3);var b=100-100*a/_okg.gameInfos.delay;_okg.chronos.context.fillStyle="rgba(0, 0, 0, .2)";_okg.chronos.context.fillRect(0,window.innerHeight-30,window.innerWidth,window.innerHeight);_okg.chronos.context.fillStyle="#FFFFFF";_okg.chronos.context.fillRect(0,
window.innerHeight-30,b/100*window.innerWidth,window.innerHeight);_okg.hero_chronos.x=b/100*window.innerWidth-75;_okg.chronos_text.y=_okg.player_2_text.y=_okg.player_1_text.y=70;5===Math.round(a)&&"undefined"===typeof _okg.five_last_sound&&audio_manager.play_sound("chronos_five_seconds",0,function(a){_okg.five_last_sound=a});0>=a&&_okg.end_game()}_okg.chronos_text.x=_okg.chronos_icon.getBounds().x+_okg.chronos_icon.getBounds().width/2-_okg.chronos_text.getBounds().width/2;_okg.player_1_text.x=_okg.player_1.getBounds().x+
_okg.player_1.getBounds().width/2-_okg.player_1_text.getBounds().width/2;_okg.player_2_text.x=_okg.player_2.getBounds().x+_okg.player_2.getBounds().width/2-_okg.player_2_text.getBounds().width/2};
basketball.prototype.set_events=function(){utilities.is_touch_screen()?($("body").on("touchstart",_okg.touchstart),$("body").on("touchmove",_okg.touchmove),$("body").on("touchend",_okg.touchend)):($("#ball_zone1").on("mousedown",_okg.mousestart),$("#ball_zone2").on("mousedown",_okg.mousestart),$("#phaser-basketball canvas").on("mousemove",_okg.mousemove),$("#phaser-basketball canvas").on("mouseup",_okg.mouseend))};
basketball.prototype.unset_events=function(){utilities.is_touch_screen()?($("body").off("touchstart",_okg.touchstart),$("body").off("touchmove",_okg.touchmove),$("body").off("touchend",_okg.touchend)):($("#ball_zone1").off("mousedown",_okg.mousestart),$("#ball_zone2").off("mousedown",_okg.mousestart),$("#phaser-basketball canvas").off("mousemove",_okg.mousemove),$("#phaser-basketball canvas").off("mouseup",_okg.mouseend))};
basketball.prototype.end_game=function(){audio_manager.play_sound("chronos_end",0,function(a){});_okg.gameInfos.status="ended";_okg.task_bar.fixedToCamera=!1;TweenMax.to(_okg.task_bar,.8,{y:window.innerHeight/2-100,delay:.5,onComplete:function(){if("undefined"===typeof _okg)return!1;_okg.total_text=_okg.task_bar.add(_okg.game.make.text(0,0,"0",{font:"700 100px Roboto",fill:"#FFFFFF",align:"center"}));_okg.total_text.text="000";_okg.total_text.y=120;_okg.total_text.alpha=0;_okg.total_text.x=window.innerWidth/
2-_okg.total_text.getBounds().width/2;TweenMax.to(_okg.total_text,.5,{alpha:1});var a=_okg.gameInfos.score.player_1+_okg.gameInfos.score.player_2,b={total:0};utilities.create_over_motion({size:{width:290,height:200},position:{x:window.innerWidth/2-150,y:window.innerHeight/2-300},motion:"basketball_end_motion"},function(){});TweenMax.to(b,.8,{total:a,delay:.6,onUpdate:function(){if("undefined"!==typeof _okg){var a="",d=Math.ceil(b.total);if(3>d.toString().length)for(var e=3-d.toString().length,f=0;f<
e;f++)a+="0";"undefined"!==typeof _okg.total_text&&(_okg.total_text.y=120,_okg.total_text.x=window.innerWidth/2-_okg.total_text.getBounds().width/2,a+=d.toString(),_okg.total_text.text=a)}},ease:Power4.easeOut,onComplete:function(){if("undefined"===typeof _okg)return!1;_okg.stat_button=_okg.game.add.button(_okg.game.camera.position.x-120,_okg.game.camera.position.y+150,"stats_btn",_okg.show_stats,this);_okg.replay_button=_okg.game.add.button(_okg.game.camera.position.x+20,_okg.game.camera.position.y+
150,"replay_btn",_okg.replay_game,this);utilities.save_score_game("basketball",a);_okg.stat_button.scale.x=_okg.stat_button.scale.y=_okg.replay_button.scale.x=_okg.replay_button.scale.y=0;var b={s:0};TweenMax.to(b,.5,{s:1,onUpdate:function(){if("undefined"===typeof _okg||"undefined"===typeof _okg.stat_button)return!1;_okg.stat_button.scale.x=_okg.stat_button.scale.y=_okg.replay_button.scale.x=_okg.replay_button.scale.y=b.s}})}})}});_okg.unset_events();_okg.hero_chronos.play("pause");$("#ball_zone1").css("display",
"none");$("#ball_zone2").css("display","none");_okg.destroy_basket();_okg.destroy_balls();_okg.filet.clear();_okg.trajectory.clear();_okg.bitmap.context.clearRect(0,0,window.innerWidth,window.innerHeight)};basketball.prototype.replay_game=function(){utilities.destroy_over_motion();window.location.href="#page/"+navigation._current_page_name+"/intro/false/date/"+(new Date).getTime();"undefined"!==typeof gui&&gui.Window.get().reload(3)};
basketball.prototype.show_stats=function(){utilities.show_score_game("basketball",_okg.gameInfos.score.player_1+_okg.gameInfos.score.player_2)};
basketball.prototype.getTrajectoryPoint=function(a,b,c,d,e){var f=1/60;c=f*_okg.game.physics.p2.pxm(-c);var g=f*_okg.game.physics.p2.pxm(-d);d=f*f*_okg.game.physics.p2.pxm(-_okg.game.physics.p2.gravity.x);f=f*f*_okg.game.physics.p2.pxm(-_okg.game.physics.p2.gravity.y);a=_okg.game.physics.p2.pxm(-a);b=_okg.game.physics.p2.pxm(-b);b=b+e*g+.5*(e*e+e)*f;a=_okg.game.physics.p2.mpx(-(a+e*c+.5*(e*e+e)*d));b=_okg.game.physics.p2.mpx(-b);return{x:a,y:b}};
basketball.prototype.draw_trajectory=function(a,b){var c=window.innerHeight-80,d=Math.atan2(a-80,b-c);distance=Math.sqrt(80*a+b*c);_okg.BULLET_SPEED=2*-distance;_okg.GRAVITY=_okg.game.physics.p2.gravity.y;_okg.bitmap.context.clearRect(0,0,_okg.game.width,_okg.game.height);_okg.bitmap.context.fillStyle="rgba(255, 255, 255, 0.5)";_okg.timeOffset=_okg.timeOffset+1||0;for(var e,f,g=0+_okg.timeOffset/1E3;3>g&&!(e=_okg.BULLET_SPEED*g*Math.cos(d)*.99,f=_okg.BULLET_SPEED*g*Math.sin(d)*.99-.5*_okg.GRAVITY*
g*g,_okg.bitmap.context.fillRect(e+80,c-f,3,3),-15>f);g+=.03);_okg.bitmap.dirty=!0};basketball.prototype.create_ball=function(a){1===a?_okg.player1.balls[_okg.player1.balls.length]=_okg.balls.create(155,window.innerHeight-155,"ball"):_okg.player2.balls[_okg.player2.balls.length]=_okg.balls.create(window.innerWidth-155,window.innerHeight-155,"ball2")};
basketball.prototype.basket_collision=function(a,b,c,d,e){a&&-1!==a.sprite.key.indexOf("ball")&&("undefined"===typeof a.sprite.body.match&&(a.sprite.body.match=!1),0<a.velocity.y&&!a.sprite.body.match&&("undefined"===typeof _okg._mark_sound?audio_manager.play_sound("basket_win",0,function(a){_okg._mark_sound=a}):_okg._mark_sound.play(),1===a.sprite.body.player?_okg.gameInfos.score.player_1+=3:_okg.gameInfos.score.player_2+=3,_okg.threepoints(),_okg.update_score(),a.sprite.body.match=!0,_okg.move_basket2(window.innerWidth/
4+Math.random()*window.innerWidth/2,window.innerHeight/4+Math.random()*window.innerHeight/2)))};basketball.prototype.update_score=function(){_okg.player_1_text.text=_okg.gameInfos.score.player_1;_okg.player_2_text.text=_okg.gameInfos.score.player_2};basketball.prototype.collision=function(a,b,c,d,e){a&&"basket_arc"===a.sprite.key&&audio_manager.play_sound("basket_rebond",0,function(a){})};
basketball.prototype.clean_game=function(){$.each(_okg.player1.balls,function(a,b){b&&b.body&&"undefined"!==typeof b.body.life&&8E3<(new Date).getTime()-b.body.life&&("undefined"===typeof b.body.match&&(b.body.match=!1),_okg.player1.balls.splice(a,1),b.kill())});$.each(_okg.player2.balls,function(a,b){b&&b.body&&"undefined"!==typeof b.body.life&&1E4<(new Date).getTime()-b.body.life&&("undefined"===typeof b.body.match&&(b.body.match=!1),_okg.player2.balls.splice(a,1),b.kill())});_okg.update_score()};
basketball.prototype.render=function(){};basketball.prototype.update=function(){};basketball.prototype.check_basket=function(){"started"===_okg.gameInfos.status&&_okg.redraw_chronos()};basketball.prototype.play=function(){"undefined"!==typeof _okg.game&&(_okg.game.paused=!1)};basketball.prototype.pause=function(){"undefined"!==typeof _okg.game&&(_okg.game.paused=!0)};basketball.prototype.create_interface=function(){this.init()};
basketball.prototype.destroy=function(a){_okg.game.destroy();_okg.delete_objects(_okg);utilities.destroy_over_motion();a()};basketball.prototype.delete_objects=function(a){$.each(_.keys(a),function(b,c){delete a[c];a[c]=null})};
basketball.prototype.create_task_bar=function(){_okg.task_bar=_okg.game.add.group();_okg.task_bar.fixedToCamera=!0;_okg.chronos_icon=_okg.task_bar.create(0,0,"chronos_icon");_okg.chronos_icon.x=window.innerWidth/2-105;_okg.player_1=_okg.task_bar.create(0,0,"player_1");_okg.player_1.x=window.innerWidth/2-25;_okg.player_2=_okg.task_bar.create(0,0,"player_2");_okg.player_2.x=window.innerWidth/2+60;_okg.player_1.y=_okg.player_2.y=_okg.chronos_icon.y=20;_okg.chronos_text=_okg.task_bar.add(_okg.game.make.text(0,
0,"0",{font:"100 35px Roboto",fill:"#FFFFFF",align:"center"}));_okg.player_1_text=_okg.task_bar.add(_okg.game.make.text(0,0,"0",{font:"100 35px Roboto",fill:"#FFFFFF",align:"center"}));_okg.player_2_text=_okg.task_bar.add(_okg.game.make.text(0,0,"0",{font:"100 35px Roboto",fill:"#FFFFFF",align:"center"}));_okg.chronos_text.y=_okg.player_2_text.y=_okg.player_1_text.y=80;setTimeout(function(){_okg.chronos_text.x=_okg.chronos_icon.getBounds().x+_okg.chronos_icon.getBounds().width/2-_okg.chronos_text.getBounds().width/
2;_okg.player_1_text.x=_okg.player_1.getBounds().x+_okg.player_1.getBounds().width/2-_okg.player_1_text.getBounds().width/2;_okg.player_2_text.x=_okg.player_2.getBounds().x+_okg.player_2.getBounds().width/2-_okg.player_2_text.getBounds().width/2},10)};basketball.prototype.mousestart=function(a){navigation.set_update_events();_okg._is_down=!0};
basketball.prototype.mousemove=function(a){if(_okg._is_down){_okg.bitmap.context.clearRect(0,0,window.innerWidth,window.innerHeight);_okg.trajectory.clear();_okg.trajectory.lineStyle(8,16777215,.5);for(var b=_okg.player1.balls[_okg.player1.balls.length-1],c=0;50>c;c++)if(0==c%2){var d=_okg.get_velocity({x:a.pageX,y:a.pageY},b),d=_okg.getTrajectoryPoint(b.x+25,b.y+25,d.x,d.y,c);0===c?_okg.trajectory.moveTo(d.x,d.y):_okg.trajectory.lineTo(d.x,d.y)}}};
basketball.prototype.mouseend=function(a){if(_okg._is_down){"undefined"===typeof _okg._launch_sound?audio_manager.play_sound("basket_launch",0,function(a){_okg._launch_sound=a}):_okg._launch_sound.play();_okg._is_down=!1;var b=_okg.player1.balls[_okg.player1.balls.length-1];_okg.game.physics.p2.enable(b,_okg.debug);b.body.life=(new Date).getTime();b.body.player=1;b.body.setCircle(26);b.body.mass=50;b.body.collideWorldBounds=!0;b.body.onBeginContact.add(_okg.collision,this);b.body.collision_list=[];
_okg.bitmap.context.clearRect(0,0,window.innerWidth,window.innerHeight);_okg.trajectory.clear();a=_okg.get_velocity({x:a.pageX,y:a.pageY},b);b.body.velocity.x=a.x;b.body.velocity.y=a.y;_okg.create_ball(1)}};basketball.prototype.touchstart=function(a){navigation.set_update_events();$.each(a.originalEvent.touches,function(b,c){a.originalEvent.touches[b].target.id.indexOf("ball_zone")});$("body").off("touchstart").on("touchstart",_okg.touchstart)};
basketball.prototype.touchmove=function(a){_okg.bitmap.context.clearRect(0,0,window.innerWidth,window.innerHeight);_okg.trajectory.clear();_okg.trajectory.lineStyle(8,16777215,.5);$.each(a.originalEvent.touches,function(a,c){var b=c.clientX<window.innerWidth/2?_okg.player1.balls[_okg.player1.balls.length-1]:_okg.player2.balls[_okg.player2.balls.length-1];for(a=0;50>a;a++)if(0===a%2){var e=_okg.get_velocity({x:c.pageX,y:c.pageY},b),e=_okg.getTrajectoryPoint(b.x+25,b.y+25,e.x,e.y,a);0===a?_okg.trajectory.moveTo(e.x,
e.y):_okg.trajectory.lineTo(e.x,e.y)}})};
basketball.prototype.threepoints=function(){var a=_okg.game.add.sprite(_okg.basket.attachment.position.x,_okg.basket.attachment.position.y,"mark_points");a.scale.x=a.scale.y=.1;var b={value:.1,x:_okg.basket.attachment.position.x,y:_okg.basket.attachment.position.y};TweenMax.to(b,.5,{value:1,x:_okg.basket.attachment.position.x-200,y:_okg.basket.attachment.position.y-200,onUpdate:function(){a.scale.x=a.scale.y=b.value;a.position.x=b.x;a.position.y=b.y},onComplete:function(){a.kill()}});TweenMax.to(a,
.5,{alpha:0})};
basketball.prototype.touchend=function(a){"undefined"===typeof _okg._launch_sound?audio_manager.play_sound("basket_launch",0,function(a){_okg._launch_sound=a}):_okg._launch_sound.play();var b=null,c=null;"ball_zone1"===a.originalEvent.target.id?(b=_okg.player1.balls[_okg.player1.balls.length-1],c=1):"ball_zone2"===a.originalEvent.target.id&&(b=_okg.player2.balls[_okg.player2.balls.length-1],c=2);b&&(_okg.game.physics.p2.enable(b,_okg.debug),b.body.life=(new Date).getTime(),b.body.player=c,b.body.setCircle(26),
b.body.mass=50,b.body.collision_list=[],_okg.bitmap.context.clearRect(0,0,window.innerWidth,window.innerHeight),_okg.trajectory.clear(),a=_okg.get_velocity({x:a.originalEvent.changedTouches[0].pageX,y:a.originalEvent.changedTouches[0].pageY},b),b.body.velocity.x=a.x,b.body.velocity.y=a.y,_okg.create_ball(c))};
